(function(){var b=Array.prototype.slice,a=Array.prototype.indexOf||function(e){for(var d=0,c=this.length;d<c;d++){if(this[d]===e){return d}}return -1};Array.prototype.shuffle=function(){var e,d,f,c;f=this.length;for(e=f;f<=1?e<=1:e>=1;f<=1?e++:e--){this[e]=this[e];d=parseInt(Math.random()*e);c=this[--e];this[e]=this[d];this[d]=c}return this};Array.prototype.contains=function(e){var c,d;d=this.length;for(c=0;0<=d?c<d:c>d;0<=d?c++:c--){if(e===this[c]){return true}}return false};(function(c){c.fn.reverse=[].reverse;c.fn.shuffle=[].shuffle;return c.fn.as2dArray=function(d){var e,f,g;g=0;f=0;e=c("");e[g]=c("");this.each(function(){e[g][f]=c(this);f++;if(f===d){g++;f=0;return e[g]=c("")}});return e}})(jQuery);(function(e){var f,d,c;c=["stop","start","option","effect"];e.fn.ramblingSlider=function(){var l,m,h,g,i,j,k;h=arguments[0],i=2<=arguments.length?b.call(arguments,1):[];m=a.call(c,h)>=0;g=(typeof h)==="string";j=this.data("rambling:slider");l=function(n,o){return !o.length||(n==="option"&&o.length===1&&typeof o[0]==="string")};if(j){if(m){k=j[h].apply(j,i);if(l(h,i)){return k}else{return this}}else{if(g){return e.error("Method '"+h+"' not found.")}else{if(h){return e.error("Slider already initialized.")}}}}else{if(m||g){return e.error("Tried to call method '"+h+"' on element without slider.")}}return this.each(function(o,p){var n;n=e(this);if(n.data("rambling:slider")){return}j=new f(this,h);n.data("rambling:slider",j);j.initialize();return j.run()})};e.fn.ramblingSlider.defaults={slices:15,boxCols:8,boxRows:4,speed:500,pauseTime:3000,manualAdvance:false,captionOpacity:0.8,startSlide:0,effect:"random",directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};d=["startSlide","directionNav","directionNavHide","controlNav","controlNavThumbs","controlNavThumbsFromRel","controlNavThumbsSearch","controlNavThumbsReplace","adaptImages","useLargerImage","alignBottom","keyboardNav","pauseOnHover","prevText","nextText"];return f=function(t,z){var q,J,I,w,ab,p,l,C,Y,Z,m,v,B,T,X,g,ac,N,D,r,j,W,K,P,L,aa,s,G,R,F,o,y,U,Q,O,H,V,x,i,S,k,n,A,u,E,h,M;n=e(t);W=n.children(":not(#rambling-animation)");V=e.extend({},e.fn.ramblingSlider.defaults,z);m=[];E=0;Y=0;M={currentSlide:0,currentImage:"",totalSlides:0,randomAnimation:"",running:false,paused:false,stopped:false};n.data("rambling:vars",M);u=function(){M.stopped=true;return n};A=function(){M.stopped=false;return n};K=function(){var ae,ad,af;ad=1<=arguments.length?b.call(arguments,0):[];if(!ad.length){return V}K=ad[0];af=ad[1];ae=typeof K==="object";if(K==="effect"){if(af){return T(af)}else{return T()}}if(ae){return e.extend(V,K)}else{if(af!=null){if(a.call(d,K)>=0){return e.error("Slider already running. Option '"+K+"' cannot be changed.")}return V[K]=af}else{return V[K]}}};T=function(){var ad;ad=1<=arguments.length?b.call(arguments,0):[];if(!ad.length){return V.effect}V.effect=ad[0];m=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","foldLeft","fade","slideInRight","slideInLeft","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"];if(V.effect.contains(",")){m=V.effect.split(",")}return V.effect};j=function(){T(V.effect);H();M.currentSlide=V.startSlide=V.startSlide%M.totalSlides;O(n,M);q();I();J(W);w();if(V.pauseOnHover){n.hover(P,h)}return U()};y=function(){if(!V.manualAdvance&&W.length>1){return E=window.setInterval((function(){return R(n,W,V,false)}),V.pauseTime)}};H=function(){n.css({position:"relative"});n.addClass("ramblingSlider");M.totalSlides=W.length;if(V.adaptImages){L()}return aa()};L=function(){var ad;ad=e('<div id="rambling-animation"></div>');ad.css({width:n.width(),height:n.height(),overflow:"hidden"});n.prepend(ad);return n.addClass("adaptingSlider")};aa=function(){var ad;W.each(function(){var ah,ae,af,ag;ah=e(this);ag=null;if(!ah.is("img")){if(ah.is("a")){ag=ah.addClass("rambling-imageLink")}ah=ah.find("img:first")}af=ah.width()||ah.attr("width");ae=ah.height()||ah.attr("height");if(af>n.width()&&V.useLargerImage){n.width(af)}if(ae>n.height()&&(V.useLargerImage||!V.adaptImages)){n.height(ae)}if(ag){ag.css({display:"none"})}return ah.css({display:"none"})});ad=Q(W);if(ad.is("a")){return ad.css({display:"block"})}};q=function(){var ad;ad=e('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:V.captionOpacity});n.append(ad);return s(V)};I=function(){var ad;if(V.directionNav&&M.totalSlides>1){ad=e("<div class='rambling-directionNav'><a class='rambling-prevNav'>"+V.prevText+"</a><a class='rambling-nextNav'>"+V.nextText+"</a></div>");n.append(ad);if(V.directionNavHide){ad.hide();n.hover((function(){return ad.show()}),(function(){return ad.hide()}))}n.find("a.rambling-prevNav").live("click",function(){return i("prev")});return n.find("a.rambling-nextNav").live("click",function(){return i("next")})}};J=function(){var ae,ad,af,ah,ag;if(V.controlNav){af=e('<div class="rambling-controlNav"></div>');n.append(af);ah=function(ai){var aj;if(V.controlNavThumbs){aj=W.eq(ai);if(!aj.is("img")){aj=aj.find("img:first")}if(V.controlNavThumbsFromRel){return af.append("<a class='rambling-control' rel='"+ai+"'><img src='"+(aj.attr("rel"))+"' alt='' /></a>")}else{return af.append("<a class='rambling-control' rel='"+ai+"'><img src='"+(aj.attr("src").replace(V.controlNavThumbsSearch,V.controlNavThumbsReplace))+"' alt='' /></a>")}}else{return af.append("<a class='rambling-control' rel='"+ai+"'>"+(ai+1)+"'</a>")}};for(ad=0,ag=W.length;0<=ag?ad<ag:ad>ag;0<=ag?ad++:ad--){ah(ad)}ae=n.find(".rambling-controlNav a");ae.filter(":eq("+M.currentSlide+")").addClass("active");return ae.live("click",function(){if(M.running){return false}if(e(this).hasClass("active")){return false}o();O(n,M);M.currentSlide=e(this).attr("rel")-1;return R(n,W,V,"control")})}};w=function(){if(V.keyboardNav){return e(window).keypress(function(ad){if(ad.keyCode===37){i("prev")}if(ad.keyCode===39){return i("next")}})}};U=function(){return n.bind("rambling:finished",function(){var ad;M.running=false;W.filter("a").css({display:"none"});ad=e(W[M.currentSlide]);if(ad.is("a")){ad.css({display:"block"})}if(E===""&&!M.paused){y()}O(n,M);return V.afterChange.call(this)})};D=function(){return m[Math.floor(Math.random()*m.length)]||"fade"};s=function(ae){var ad,af;ad=n.find(".rambling-caption");af=M.currentImage.attr("title");if(af){if(af.substr(0,1)==="#"){af=e(af).html()}if(ad.css("display")==="block"){ad.find("p").fadeOut(ae.speed,function(){e(this).html(af);return e(this).fadeIn(ae.speed)})}else{ad.find("p").html(af)}return ad.fadeIn(ae.speed)}else{return ad.fadeOut(ae.speed)}};Q=function(ae){var ad;ad=e(ae[M.currentSlide]);M.currentImage=ad;if(!ad.is("img")){M.currentImage=ad.find("img:first")}return ad};o=function(){clearInterval(E);return E=""};P=function(){M.paused=true;return o()};h=function(){M.paused=false;if(E===""){return y()}};i=function(ad){if(M.running||M.totalSlides===1){return false}o();if(ad==="prev"){M.currentSlide-=2}return R(n,W,V,ad)};B=function(af,ae,ah){var ad,ai,ag;ai=function(ak){var aj,al;al=Math.round(af.width()/ae.slices);aj=af;if(ae.adaptImages){aj=af.find("#rambling-animation")}return aj.append(N(al,ak,ae.slices,ah))};for(ad=0,ag=ae.slices;0<=ag?ad<ag:ad>ag;0<=ag?ad++:ad--){ai(ad)}return af.find(".rambling-slice")};v=function(af,ad,ai){var aj,ae,ah,ak,ag;ae=Math.round(af.width()/ad.boxCols);aj=Math.round(af.height()/ad.boxRows);ak=function(am){var an,ao,al;al=[];for(an=0,ao=ad.boxCols;0<=ao?an<ao:an>ao;0<=ao?an++:an--){al.push((function(aq){var ap;ap=af;if(ad.adaptImages){ap=af.find("#rambling-animation")}return ap.append(ac(ae,aj,am,aq,ad,ai))})(an))}return al};for(ah=0,ag=ad.boxRows;0<=ag?ah<ag:ah>ag;0<=ag?ah++:ah--){ak(ah)}return af.find(".rambling-box")};O=function(ad,ae){return ad.css({background:"url("+(ae.currentImage.attr("src"))+") no-repeat"})};N=function(ai,ad,ag,ah){var ae,aj,af;ae="url("+(ah.currentImage.attr("src"))+") no-repeat -"+((ai+(ad*ai))-ai)+"px 0%";af=ai;if(ad===(ag-1)){ae="url("+(ah.currentImage.attr("src"))+") no-repeat -"+((ai+(ad*ai))-ai)+"px 0%";af=n.width()-(ai*ad)}aj={left:""+(ai*ad)+"px",width:""+af+"px",height:"0px",opacity:"0",background:ae,overflow:"hidden"};return e('<div class="rambling-slice"></div>').css(aj)};ac=function(ah,aj,al,af,ag,ai){var ad,ak,ae;ad="url("+(ai.currentImage.attr("src"))+") no-repeat -"+((ah+(af*ah))-ah)+"px -"+((aj+(al*aj))-aj)+"px";ae=ah;if(af===(ag.boxCols-1)){ad="url("+(ai.currentImage.attr("src"))+") no-repeat -"+((ah+(af*ah))-ah)+"px -"+((aj+(al*aj))-aj)+"px";ae=n.width()-(ah*af)}ak={opacity:0,left:""+(ah*af)+"px",top:""+(aj*al)+"px",width:""+ae+"px",height:""+aj+"px",background:ad,overflow:"hidden"};return e('<div class="rambling-box"></div>').css(ak)};if(V.adaptImages){r=N;g=ac;O=function(){var af,ad,ae;ae=M.currentImage;ad=n.find(".currentImage");if(!ad.length){af="alignTop";if(V.alignBottom){af="alignBottom"}ad=e('<img src="" alt="currentImage" class="currentImage"/>');ad.addClass(af);ad.css({display:"block"});n.find("#rambling-animation").prepend(ad)}return ad.attr({src:ae.attr("src"),alt:ae.attr("alt")})};N=function(ak,ad,ah,aj){var af,ag,ae,ai;ag=r(ak,ad,ah,aj);ag.css({background:"none"});ag.append('<span><img src="'+(aj.currentImage.attr("src"))+'" alt=""/></span>');af=0;ai="auto";if(V.alignBottom){af="auto";ai=0}ae={display:"block",width:n.width(),left:"-"+((ak+(ad*ak))-ak)+"px",bottom:af,top:ai};ag.find("img").css(ae);return ag};ac=function(ai,ak,am,af,ag,aj){var ad,ah,ae,al;ah=g(ai,ak,am,af,ag,aj);ad=false;al=""+((ak+(am*ak))-ak)+"px";if(ag.alignBottom){ad=""+(ak*(ag.boxRows-(am+1)))+"px";al=false}ae={display:"block",width:n.width(),left:"-"+((ai+(af*ai))-ai)+"px",top:"auto",bottom:"auto"};if(al){ae.top="-"+al}if(ad){ae.bottom="-"+ad}ah.css({background:"none",top:al||"auto",bottom:ad||"auto"});ah.append("<span><img src='"+(aj.currentImage.attr("src"))+"' alt=''/></span>");ah.find("img").css(ae);return ah}}p=function(ae){var af,ad,ah,ag;ag=B(n,V,M);ah=ag.filter(":first");ah.css(ae.style);if(V.adaptImages&&ae.style["background-position"]){af=ah.find("img");ad=ae.style["background-position"].split(" ");af.css({left:ad[0]});af.animate({left:ae.animate["background-position"].split(" ")[0]},V.speed*2)}return ah.animate(ae.animate||{width:""+(n.width())+"px"},V.speed*2,"",function(){if(ae.afterChange){ae.afterChange.apply(ah)}return n.trigger("rambling:finished")})};l=function(ad,af){var ae;ae=B(n,V,M);Y=0;if(af){ae=af.apply(ae)}return ae.each(ad)};ab=function(ad,af){var ae;ae=v(n,V,M);Y=0;if(af){ae=af.apply(ae)}return ad.apply(ae)};x=function(ad){return l(function(ae){var af;af=e(this);af.css({top:"0px"});if(ae===V.slices-1){window.setTimeout(function(){return af.animate({height:""+(n.height())+"px",opacity:"1.0"},V.speed,"",function(){return n.trigger("rambling:finished")})},100+Y)}else{window.setTimeout((function(){return af.animate({height:""+(n.height())+"px",opacity:"1.0"},V.speed)}),100+Y)}return Y+=50},ad)};k=function(ad){return l(function(ae){var af;af=e(this);af.css({bottom:"0px"});if(ae===V.slices-1){window.setTimeout((function(){return af.animate({height:""+(n.height())+"px",opacity:"1.0"},V.speed,"",function(){return n.trigger("rambling:finished")})}),100+Y)}else{window.setTimeout((function(){return af.animate({height:""+(n.height())+"px",opacity:"1.0"},V.speed)}),100+Y)}return Y+=50},ad)};S=function(ad){return l(function(ae){var af;af=e(this);af.css((ae%2?{bottom:"0px"}:{top:"0px"}));if(ae===V.slices-1){window.setTimeout((function(){return af.animate({height:""+(n.height())+"px",opacity:"1.0"},V.speed,"",function(){return n.trigger("rambling:finished")})}),100+Y)}else{window.setTimeout((function(){return af.animate({height:""+(n.height())+"px",opacity:"1.0"},V.speed)}),100+Y)}return Y+=50},ad)};X=function(ad){return l(function(ae){var ag,af;af=e(this);ag=af.width();af.css({top:"0px",height:"100%",width:"0px"});if(ae===V.slices-1){window.setTimeout((function(){return af.animate({width:ag,opacity:"1.0"},V.speed,"",function(){return n.trigger("rambling:finished")})}),100+Y)}else{window.setTimeout((function(){return af.animate({width:ag,opacity:"1.0"},V.speed)}),100+Y)}return Y+=50},ad)};F=function(){return ab(function(){var ad;ad=this.length;return this.each(function(ae){var af;af=e(this);if(ae===ad-1){window.setTimeout((function(){return af.animate({opacity:"1"},V.speed,"",function(){return n.trigger("rambling:finished")})}),100+Y)}else{window.setTimeout((function(){return af.animate({opacity:"1"},V.speed)}),100+Y)}return Y+=20})},e.fn.shuffle)};G=function(ae,ad){return ab(function(){var ah,aj,ag,ak,ai,af;ah=this;ak=V.boxCols*V.boxRows;ag=0;af=[];for(aj=0,ai=V.boxCols*2;0<=ai?aj<ai:aj>ai;0<=ai?aj++:aj--){af.push((function(ao){var am,an,ap,al;am=ao;al=[];for(an=0,ap=V.boxRows;0<=ap?an<ap:an>ap;0<=ap?an++:an--){al.push((function(av){var au,ar,at,ax,aw,aq;if(am>=0&&am<V.boxCols){ax=av;ar=am;aw=Y;au=e(ah[ax][ar]);aq=au.width();at=au.height();if(ad){au.css({width:0,height:0})}if(ag===ak-1){window.setTimeout((function(){return au.animate({opacity:"1",width:aq,height:at},V.speed/1.3,"",function(){return n.trigger("rambling:finished")})}),100+Y)}else{window.setTimeout((function(){return au.animate({opacity:"1",width:aq,height:at},V.speed/1.3)}),100+Y)}ag++;Y+=20}return am--})(an))}return al})(aj))}return af},ae)};C={fade:{style:{height:"100%",width:""+(n.width())+"px",position:"absolute",top:0,left:0},animate:{opacity:"1"}},rolloverRight:{style:{height:"100%",width:"0px",opacity:"1"}},rolloverLeft:{animate:{width:""+(n.width()),"background-position":"0px"},style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px","background-position":""+(-n.width())+"px"}},slideInRight:{animate:{width:""+(n.width()),"background-position":"0px"},style:{height:"100%",width:"0px",opacity:"1","background-position":""+(-n.width())+"px"}},slideInLeft:{style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},afterChange:function(){return this.css({left:"0px",right:""})}}};Z={sliceDown:x,sliceDownRight:x,sliceDownLeft:function(){return x(e.fn.reverse)},sliceUp:k,sliceUpRight:k,sliceUpLeft:function(){return k(e.fn.reverse)},sliceUpDown:S,sliceUpDownRight:S,sliceUpDownLeft:function(){return S(e.fn.reverse)},fold:X,foldLeft:function(){return X(e.fn.reverse)},fade:function(){return p(C.fade)},slideIn:function(){return p(C.slideInRight)},slideInRight:function(){return p(C.slideInRight)},slideInLeft:function(){return p(C.slideInLeft)},rollover:function(){return p(C.rolloverRight)},rolloverRight:function(){return p(C.rolloverRight)},rolloverLeft:function(){return p(C.rolloverLeft)},boxRandom:F,boxRain:function(){return G(function(){return e(this).as2dArray(V.boxCols)})},boxRainReverse:function(){return G(function(){return e(this).reverse().as2dArray(V.boxCols)})},boxRainGrow:function(){return G((function(){return e(this).as2dArray(V.boxCols)}),true)},boxRainGrowReverse:function(){return G((function(){return e(this).reverse().as2dArray(V.boxCols)}),true)}};R=function(ah,af,ag,ad){var ae;if(M.currentSlide===M.totalSlides-1){ag.lastSlide.call(this)}if(M.stopped&&!ad){return false}ag.beforeChange.call(this);M.currentSlide++;if(M.currentSlide===M.totalSlides){M.currentSlide=0;ag.slideshowEnd.call(this)}if(M.currentSlide<0){M.currentSlide=M.totalSlides-1}Q(af);if(ag.controlNav){ah.find(".rambling-controlNav a").removeClass("active").filter(":eq("+M.currentSlide+")").addClass("active")}s(ag);ah.find(".rambling-slice,.rambling-box").remove();if(ag.effect==="random"||ag.effect.contains(",")){M.randomAnimation=D()}else{M.randomAnimation=null}M.running=true;ae=M.randomAnimation||ag.effect;return Z[ae].apply(this)};V.afterLoad.call(this);this.stop=u;this.start=A;this.effect=T;this.option=K;this.initialize=j;this.run=y;return this}})(jQuery);String.prototype.contains=function(c){return this.indexOf(c)!==-1};String.prototype.decapitalize=function(){var d,c;d=this.slice(0,1);c=this.slice(1);return""+(d.toLowerCase())+c}}).call(this);