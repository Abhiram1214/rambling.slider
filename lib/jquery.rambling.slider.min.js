(function(){Array.prototype.shuffle=function(){var c,b,d,a;d=this.length;for(c=d;d<=1?c<=1:c>=1;d<=1?c++:c--){this[c]=this[c];b=parseInt(Math.random()*c);a=this[--c];this[c]=this[b];this[b]=a}return this};Array.prototype.contains=function(c){var a,b;b=this.length;for(a=0;0<=b?a<b:a>b;0<=b?a++:a--){if(c===this[a]){return true}}return false};(function(a){a.fn.reverse=[].reverse;a.fn.shuffle=[].shuffle;return a.fn.as2dArray=function(b){var c,d,e;e=0;d=0;c=a("");c[e]=a("");this.each(function(){c[e][d]=a(this);d++;if(d===b){e++;d=0;return c[e]=a("")}});return c}})(jQuery);(function(b){var c,a;a=["stop","start"];b.fn.ramblingSlider=function(d){return this.each(function(f,h){var e,g;e=b(this);g=e.data("ramblingSlider");if(a.contains(d)&&g){g[d]()}if(g){return g}g=new c(this,d);return e.data("ramblingSlider",g)})};b.fn.ramblingSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};return c=function(e,f){var k,D,B,g,t,x,h,m,q,v,w,r,y,o,A,d,j,E,z,s,n,u,p,C,l;n=0;z=b.extend({},b.fn.ramblingSlider.defaults,f);p={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false};D=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","foldLeft","fade","slideInRight","slideInLeft","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"];this.stop=function(){var i;i=b(e);if(!i.data("rambling:vars").stop){i.data("rambling:vars").stop=true;return u("Stop Slider")}};this.start=function(){var i;i=b(e);if(i.data("rambling:vars").stop){i.data("rambling:vars").stop=false;return u("Start Slider")}};u=function(i){if(this.console&&console&&console.log){return console.log(i)}};o=function(F){var i,G;i=s.find(".rambling-caption");G=p.currentImage.attr("title");if((G!=null)&&G!==""){if(G.substr(0,1)==="#"){G=b(G).html()}if(i.css("display")==="block"){i.find("p").fadeOut(F.animSpeed,function(){b(this).html(G);return b(this).fadeIn(F.animSpeed)})}else{i.find("p").html(G)}return i.fadeIn(F.animSpeed)}else{return i.fadeOut(F.animSpeed)}};E=function(F){var i;i=b(F[p.currentSlide]);p.currentImage=i;if(!i.is("img")){p.currentImage=i.find("img:first")}return i};B=function(){clearInterval(n);return n=""};x=function(I,H,K){var G,J,F;F=[];for(G=0,J=H.slices;0<=J?G<J:G>J;0<=J?G++:G--){F.push((function(M){var L,N;N=Math.round(I.width()/H.slices);L=I;if(H.adaptImages){L=I.find("#rambling-animation")}return L.append(q.getRamblingSlice(N,M,H.slices,K))})(G))}return F};t=function(H,F,K){var L,G,J,I,i;G=Math.round(H.width()/F.boxCols);L=Math.round(H.height()/F.boxRows);i=[];for(J=0,I=F.boxRows;0<=I?J<I:J>I;0<=I?J++:J--){i.push((function(N){var O,P,M;M=[];for(O=0,P=F.boxCols;0<=P?O<P:O>P;0<=P?O++:O--){M.push((function(R){var Q;Q=H;if(F.adaptImages){Q=H.find("#rambling-animation")}return Q.append(q.getRamblingBox(G,L,N,R,F,K))})(O))}return M})(J))}return i};q={};h={setSliderBackground:function(i,F){return i.css({background:"url("+(F.currentImage.attr("src"))+") no-repeat"})},getRamblingSlice:function(J,i,H,I){var F,K,G;F="url("+(I.currentImage.attr("src"))+") no-repeat -"+((J+(i*J))-J)+"px 0%";G=J;if(i===(H-1)){F="url("+(I.currentImage.attr("src"))+") no-repeat -"+((J+(i*J))-J)+"px 0%";G=s.width()-(J*i)}K={left:""+(J*i)+"px",width:""+G+"px",height:"0px",opacity:"0",background:F,overflow:"hidden"};return b('<div class="rambling-slice"></div>').css(K)},getRamblingBox:function(I,K,M,G,H,J){var i,L,F;i="url("+(J.currentImage.attr("src"))+") no-repeat -"+((I+(G*I))-I)+"px -"+((K+(M*K))-K)+"px";F=I;if(G===(H.boxCols-1)){i="url("+(J.currentImage.attr("src"))+") no-repeat -"+((I+(G*I))-I)+"px -"+((K+(M*K))-K)+"px";F=s.width()-(I*G)}L={opacity:0,left:""+(I*G)+"px",top:""+(K*M)+"px",width:""+F+"px",height:""+K+"px",background:i,overflow:"hidden"};return b('<div class="rambling-box"></div>').css(L)}};k={setSliderBackground:function(){var G,i,F;F=p.currentImage;i=s.find(".currentImage");if(!i.length){G="alignTop";if(z.alignBottom){G="alignBottom"}i=b('<img src="" alt="currentImage" class="currentImage"/>');i.addClass(G);i.css({display:"block"});s.find("#rambling-animation").prepend(i)}return i.attr({src:F.attr("src"),alt:F.attr("alt")})},getRamblingSlice:function(L,i,I,K){var G,H,F,J;H=h.getRamblingSlice(L,i,I,K);H.css({background:"none"});H.append('<span><img src="'+(K.currentImage.attr("src"))+'" alt=""/></span>');G=0;J="auto";if(z.alignBottom){G="auto";J=0}F={display:"block",width:s.width(),left:"-"+((L+(i*L))-L)+"px",bottom:G,top:J};H.find("img").css(F);return H},getRamblingBox:function(J,L,N,G,H,K){var i,I,F,M;I=h.getRamblingBox(J,L,N,G,H,K);i=false;M=""+((L+(N*L))-L)+"px";if(H.alignBottom){i=""+(L*(H.boxRows-(N+1)))+"px";M=false}F={display:"block",width:s.width(),left:"-"+((J+(G*J))-J)+"px",top:"auto",bottom:"auto"};if(M){F.top="-"+M}if(i){F.bottom="-"+i}I.css({background:"none",top:M||"auto",bottom:i||"auto"});I.append("<span><img src='"+(K.currentImage.attr("src"))+"' alt=''/></span>");I.find("img").css(F);return I}};b.extend(q,h);if(z.adaptImages){b.extend(q,k)}s=b(e);s.data("rambling:vars",p);s.css({position:"relative"});s.addClass("ramblingSlider");if(z.adaptImages){A=b('<div id="rambling-animation"></div>');A.css({width:s.width(),height:s.height(),overflow:"hidden"});s.prepend(A);s.addClass("adaptingSlider")}r=s.children(":not(#rambling-animation)");r.each(function(){var H,i,F,G;H=b(this);G="";if(!H.is("img")){if(H.is("a")){H.addClass("rambling-imageLink");G=H}H=H.find("img:first")}F=H.width();if(F===0){F=H.attr("width")}i=H.height();if(i===0){i=H.attr("height")}if(F>s.width()&&z.useLargerImage){s.width(F)}if(i>s.height()&&(z.useLargerImage||!z.adaptImages)){s.height(i)}if(G!==""){G.css({display:"none"})}H.css({display:"none"});return p.totalSlides++});z.startSlide=z.startSlide%p.totalSlides;p.currentSlide=z.startSlide;w=E(r);if(w.is("a")){w.css({display:"block"})}q.setSliderBackground(s,p);s.append(b('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:z.captionOpacity},(function(){})()));o(z);if(!z.manualAdvance&&r.length>1){n=setInterval((function(){return j(s,r,z,false)}),z.pauseTime)}if(z.directionNav){s.append("<div class='rambling-directionNav'><a class='rambling-prevNav'>"+z.prevText+"</a><a class='rambling-nextNav'>"+z.nextText+"</a></div>");if(z.directionNavHide){m=s.find(".rambling-directionNav");m.hide();s.hover((function(){return m.show()}),(function(){return m.hide()}))}y=function(G,i,F,H){if(p.running){return false}B();p.currentSlide-=2;return j(G,i,F,H)};s.find("a.rambling-prevNav").live("click",function(){return y("prev")});s.find("a.rambling-nextNav").live("click",function(){return y("next")})}if(z.controlNav){d=b('<div class="rambling-controlNav"></div>');s.append(d);C=function(F){var G;if(z.controlNavThumbs){G=r.eq(F);if(!G.is("img")){G=G.find("img:first")}if(z.controlNavThumbsFromRel){return d.append("<a class='rambling-control' rel='"+F+"'><img src='"+(G.attr("rel"))+"' alt='' /></a>")}else{return d.append("<a class='rambling-control' rel='"+F+"'><img src='"+(G.attr("src").replace(z.controlNavThumbsSearch,z.controlNavThumbsReplace))+"' alt='' /></a>")}}else{return d.append("<a class='rambling-control' rel='"+F+"'>"+(F+1)+"'</a>")}};for(v=0,l=r.length;0<=l?v<l:v>l;0<=l?v++:v--){C(v)}g=s.find(".rambling-controlNav a");g.filter(":eq("+p.currentSlide+")").addClass("active");g.live("click",function(){if(p.running){return false}if(b(this).hasClass("active")){return false}B();q.setSliderBackground(s,p);p.currentSlide=b(this).attr("rel")-1;return j(s,r,z,"control")})}if(z.keyboardNav){b(window).keypress(function(i){if(i.keyCode==="37"){if(p.running){return false}B();p.currentSlide-=2;j(s,r,z,"prev")}if(i.keyCode==="39"){if(p.running){return false}B();return j(s,r,z,"next")}})}if(z.pauseOnHover){s.hover(function(){p.paused=true;return B()},function(){p.paused=false;if(n===""&&!z.manualAdvance){return n=setInterval((function(){return j(s,r,z,false)}),z.pauseTime)}})}s.bind("rambling:animFinished",function(){p.running=false;b(r).each(function(){w=b(this);if(w.is("a")){return w.css({display:"none"})}});w=b(r[p.currentSlide]);if(w.is("a")){w.css({display:"block"})}if(n===""&&!p.paused&&!z.manualAdvance){n=setInterval((function(){return j(s,r,z,false)}),z.pauseTime)}q.setSliderBackground(s,p);return z.afterChange.call(this)});j=function(N,M,R,L){var F,Q,H,J,G,V,S,U,O,I,i,T,P,K;p=N.data("rambling:vars");if(p&&p.currentSlide===p.totalSlides-1){R.lastSlide.call(this)}if((!p||p.stop)&&!L){return false}R.beforeChange.call(this);p.currentSlide++;if(p.currentSlide===p.totalSlides){p.currentSlide=0;R.slideshowEnd.call(this)}if(p.currentSlide<0){p.currentSlide=p.totalSlides-1}E(M);if(R.controlNav){g=N.find(".rambling-controlNav a");g.removeClass("active");g.filter(":eq("+p.currentSlide+")").addClass("active")}o(R);N.find(".rambling-slice").remove();N.find(".rambling-box").remove();if(R.effect==="random"){p.randAnim=D[Math.floor(Math.random()*(D.length+1))];if(!p.randAnim){p.randAnim="fade"}}if(R.effect.contains(",")){D=R.effect.split(",");p.randAnim=D[Math.floor(Math.random()*D.length)];if(!p.randAnim){p.randAnim="fade"}}p.running=true;U=p.randAnim||R.effect;if(U.contains("slice")||U.contains("fold")){x(N,R,p);T=0;v=0;K=0;i=N.find(".rambling-slice");if(U.contains("Left")){i=i.reverse()}Q=U.replace(/Right/,"").replace(/Left/,"");H={sliceDown:function(){var W;W=b(this);W.css({top:"0px"});if(v===R.slices-1){setTimeout(function(){return W.animate({height:"100%",opacity:"1.0"},R.animSpeed,"",function(){return N.trigger("rambling:animFinished")})},100+T)}else{setTimeout((function(){return W.animate({height:"100%",opacity:"1.0"},R.animSpeed)}),100+T)}T+=50;return v++},sliceUp:function(){var W;W=b(this);W.css({bottom:"0px"});if(v===R.slices-1){setTimeout((function(){return W.animate({height:"100%",opacity:"1.0"},R.animSpeed,"",function(){return N.trigger("rambling:animFinished")})}),100+T)}else{setTimeout((function(){return W.animate({height:"100%",opacity:"1.0"},R.animSpeed)}),100+T)}T+=50;return v++},sliceUpDown:function(){var W;W=b(this);if(v===0){W.css({top:"0px"});v++}else{W.css({bottom:"0px"});v=0}if(K===R.slices-1){setTimeout((function(){return W.animate({height:"100%",opacity:"1.0"},R.animSpeed,"",function(){return N.trigger("rambling:animFinished")})}),100+T)}else{setTimeout((function(){return W.animate({height:"100%",opacity:"1.0"},R.animSpeed)}),100+T)}T+=50;return K++},fold:function(){var X,W;W=b(this);X=W.width();W.css({top:"0px",height:"100%",width:"0px"});if(v===R.slices-1){setTimeout((function(){return W.animate({width:X,opacity:"1.0"},R.animSpeed,"",function(){return N.trigger("rambling:animFinished")})}),100+T)}else{setTimeout((function(){return W.animate({width:X,opacity:"1.0"},R.animSpeed)}),100+T)}T+=50;return v++}};return i.each(H[Q])}else{if(U==="fade"||U==="slideInRight"||U==="slideInLeft"){x(N,R,p);J={fade:{style:{height:"100%",width:""+(N.width())+"px",position:"absolute",top:0,left:0},animate:{opacity:"1"}},slideInRight:{style:{height:"100%",width:"0px",opacity:"1"}},slideInLeft:{style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},callback:function(W){var X;X={left:"0px",right:""};return W.css(X)}}};O=J[U];F=O.animate||{width:""+(N.width())+"px"};I=N.find(".rambling-slice:first");I.css(J[U].style);return I.animate(F,R.animSpeed*2,"",function(){if(O.callback){O.callback(I)}return N.trigger("rambling:animFinished")})}else{if(U.contains("box")){t(N,R,p);P=R.boxCols*R.boxRows;v=0;T=0;G=N.find(".rambling-box");if(U.contains("Reverse")){G=G.reverse()}H={random:{beforeAnimation:function(){return G=G.shuffle()},animate:function(W){return W.each(function(){var X;X=b(this);if(v===P-1){setTimeout((function(){return X.animate({opacity:"1"},R.animSpeed,"",function(){return N.trigger("rambling:animFinished")})}),100+T)}else{setTimeout((function(){return X.animate({opacity:"1"},R.animSpeed)}),100+T)}T+=20;return v++})}},rain:{beforeAnimation:function(){return G=G.as2dArray(R.boxCols)},animate:function(X){var Y,Z,W;W=[];for(Y=0,Z=R.boxCols*2;0<=Z?Y<Z:Y>Z;0<=Z?Y++:Y--){W.push((function(ad){var ab,ac,aa,ae;ab=ad;aa=function(aj){var ai,ag,ah,al,ak,af;if(ab>=0&&ab<R.boxCols){al=aj;ag=ab;ak=T;ai=b(X[al][ag]);af=ai.width();ah=ai.height();if(U.contains("Grow")){ai.css({width:0,height:0})}if(v===P-1){setTimeout((function(){return ai.animate({opacity:"1",width:af,height:ah},R.animSpeed/1.3,"",function(){return N.trigger("rambling:animFinished")})}),100+ak)}else{setTimeout((function(){return ai.animate({opacity:"1",width:af,height:ah},R.animSpeed/1.3)}),100+ak)}v++}return ab--};for(ac=0,ae=R.boxRows;0<=ae?ac<ae:ac>ae;0<=ae?ac++:ac--){aa(ac)}return T+=100})(Y))}return W}}};S=U.replace(/box/,"").replace(/Grow/,"").replace(/Reverse/,"").decapitalize();V=H[S];V.beforeAnimation();return V.animate(G)}}}};z.afterLoad.call(this);return this}})(jQuery);String.prototype.contains=function(a){return this.indexOf(a)!==-1};String.prototype.decapitalize=function(){var b,a;b=this.slice(0,1);a=this.slice(1);return""+(b.toLowerCase())+a}}).call(this);