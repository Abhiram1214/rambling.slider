(function(){var b=Array.prototype.slice,a=Array.prototype.indexOf||function(e){for(var d=0,c=this.length;d<c;d++){if(this[d]===e){return d}}return -1};Array.prototype.shuffle=function(){var e,d,f,c;f=this.length;for(e=f;f<=1?e<=1:e>=1;f<=1?e++:e--){this[e]=this[e];d=parseInt(Math.random()*e);c=this[--e];this[e]=this[d];this[d]=c}return this};Array.prototype.contains=function(e){var c,d;d=this.length;for(c=0;0<=d?c<d:c>d;0<=d?c++:c--){if(e===this[c]){return true}}return false};(function(c){c.fn.reverse=[].reverse;c.fn.shuffle=[].shuffle;return c.fn.as2dArray=function(d){var e,f,g;g=0;f=0;e=c("");e[g]=c("");this.each(function(){e[g][f]=c(this);f++;if(f===d){g++;f=0;return e[g]=c("")}});return e}})(jQuery);(function(e){var f,d,c;c=["stop","start","option","effect","destroy"];e.fn.ramblingSlider=function(){var l,m,h,g,i,j,k;h=arguments[0],i=2<=arguments.length?b.call(arguments,1):[];m=a.call(c,h)>=0;g=(typeof h)==="string";j=this.data("rambling:slider");l=function(n,o){return !o.length||(n==="option"&&o.length===1&&typeof o[0]==="string")};if(j){if(m){k=j[h].apply(j,i);if(l(h,i)){return k}else{return this}}else{if(g){return e.error("Method '"+h+"' not found.")}else{if(h){return e.error("Slider already initialized.")}}}}else{if(m||g){return e.error("Tried to call method '"+h+"' on element without slider.")}}return this.each(function(o,p){var n;n=e(this);if(n.data("rambling:slider")){return}j=new f(this,h);n.data("rambling:slider",j);j.initialize();return j.run()})};e.fn.ramblingSlider.defaults={slices:15,boxCols:8,boxRows:4,speed:500,pauseTime:3000,manualAdvance:false,captionOpacity:0.8,startSlide:0,effect:"random",directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};d=["startSlide","directionNav","directionNavHide","controlNav","controlNavThumbs","controlNavThumbsFromRel","controlNavThumbsSearch","controlNavThumbsReplace","adaptImages","useLargerImage","alignBottom","keyboardNav","pauseOnHover","prevText","nextText"];return f=function(t,z){var q,J,I,w,ac,p,l,C,Z,aa,m,v,B,Q,U,Y,g,ad,N,D,r,j,X,K,P,L,ab,s,G,S,F,o,y,V,R,O,H,W,x,i,T,k,n,A,u,E,h,M;n=e(t);X=n.children(":not(#rambling-animation)");W=e.extend({},e.fn.ramblingSlider.defaults,z);m=[];E=0;Z=0;M={currentSlide:0,currentImage:"",totalSlides:0,randomAnimation:"",running:false,paused:false,stopped:false};n.data("rambling:vars",M);u=function(){M.stopped=true;return n};A=function(){M.stopped=false;return n};Q=function(){n.find("#rambling-animation,.rambling-slice,.rambling-box,.rambling-caption,.rambling-directionNav,.rambling-controlNav").remove();n.removeClass("ramblingSlider");n.removeClass("adaptingSlider");n.removeAttr("style");n.data("rambling:vars",null);n.data("rambling:slider",null);n.unbind("rambling:finished");n.unbind("hover");o();X.show().children().show();return n};K=function(){var af,ae,ag;ae=1<=arguments.length?b.call(arguments,0):[];if(!ae.length){return W}K=ae[0];ag=ae[1];af=typeof K==="object";if(K==="effect"){if(ag){return U(ag)}else{return U()}}if(af){return e.extend(W,K)}else{if(ag!=null){if(a.call(d,K)>=0){return e.error("Slider already running. Option '"+K+"' cannot be changed.")}return W[K]=ag}else{return W[K]}}};U=function(){var ae;ae=1<=arguments.length?b.call(arguments,0):[];if(!ae.length){return W.effect}W.effect=ae[0];m=["sliceDownRight","sliceDownLeft","sliceDownRandom","sliceUpRight","sliceUpLeft","sliceUpRandom","sliceUpDown","sliceUpDownLeft","sliceUpDownRandom","foldRight","foldLeft","foldRandom","fade","slideInRight","slideInLeft","rolloverRight","rolloverLeft","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"];if(W.effect.contains(",")){m=W.effect.split(",")}return W.effect};j=function(){U(W.effect);H();M.currentSlide=W.startSlide=W.startSlide%M.totalSlides;O(n,M);q();I();J(X);w();if(W.pauseOnHover){n.hover(P,h)}return V()};y=function(){if(!W.manualAdvance&&X.length>1){return E=window.setInterval((function(){return S(n,X,W,false)}),W.pauseTime)}};H=function(){n.css({position:"relative"});n.addClass("ramblingSlider");M.totalSlides=X.length;if(W.adaptImages){L()}return ab()};L=function(){var ae;ae=e('<div id="rambling-animation"></div>');ae.css({width:n.width(),height:n.height(),overflow:"hidden"});n.prepend(ae);return n.addClass("adaptingSlider")};ab=function(){var ae;X.each(function(){var ai,af,ag,ah;ai=e(this);ah=null;if(!ai.is("img")){if(ai.is("a")){ah=ai.addClass("rambling-imageLink")}ai=ai.find("img:first")}ag=ai.width()||ai.attr("width");af=ai.height()||ai.attr("height");if(ag>n.width()&&W.useLargerImage){n.width(ag)}if(af>n.height()&&(W.useLargerImage||!W.adaptImages)){n.height(af)}if(ah){ah.css({display:"none"})}return ai.css({display:"none"})});ae=R(X);if(ae.is("a")){return ae.css({display:"block"})}};q=function(){var ae;ae=e('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:W.captionOpacity});n.append(ae);return s(W)};I=function(){var ae;if(W.directionNav&&M.totalSlides>1){ae=e("<div class='rambling-directionNav'><a class='rambling-prevNav'>"+W.prevText+"</a><a class='rambling-nextNav'>"+W.nextText+"</a></div>");n.append(ae);if(W.directionNavHide){ae.hide();n.hover((function(){return ae.show()}),(function(){return ae.hide()}))}n.find("a.rambling-prevNav").live("click",function(){return i("prev")});return n.find("a.rambling-nextNav").live("click",function(){return i("next")})}};J=function(){var af,ae,ag,ai,ah;if(W.controlNav){ag=e('<div class="rambling-controlNav"></div>');n.append(ag);ai=function(aj){var ak;if(W.controlNavThumbs){ak=X.eq(aj);if(!ak.is("img")){ak=ak.find("img:first")}if(W.controlNavThumbsFromRel){return ag.append("<a class='rambling-control' rel='"+aj+"'><img src='"+(ak.attr("rel"))+"' alt='' /></a>")}else{return ag.append("<a class='rambling-control' rel='"+aj+"'><img src='"+(ak.attr("src").replace(W.controlNavThumbsSearch,W.controlNavThumbsReplace))+"' alt='' /></a>")}}else{return ag.append("<a class='rambling-control' rel='"+aj+"'>"+(aj+1)+"'</a>")}};for(ae=0,ah=X.length;0<=ah?ae<ah:ae>ah;0<=ah?ae++:ae--){ai(ae)}af=n.find(".rambling-controlNav a");af.filter(":eq("+M.currentSlide+")").addClass("active");return af.live("click",function(){if(M.running){return false}if(e(this).hasClass("active")){return false}o();O(n,M);M.currentSlide=e(this).attr("rel")-1;return S(n,X,W,"control")})}};w=function(){if(W.keyboardNav){return e(window).keypress(function(ae){if(ae.keyCode===37){i("prev")}if(ae.keyCode===39){return i("next")}})}};V=function(){return n.bind("rambling:finished",function(){var ae;M.running=false;X.filter("a").css({display:"none"});ae=e(X[M.currentSlide]);if(ae.is("a")){ae.css({display:"block"})}if(E===""&&!M.paused){y()}O(n,M);return W.afterChange.call(this)})};D=function(){return m[Math.floor(Math.random()*m.length)]||"fade"};s=function(af){var ae,ag;ae=n.find(".rambling-caption");ag=M.currentImage.attr("title");if(ag){if(ag.substr(0,1)==="#"){ag=e(ag).html()}if(ae.css("display")==="block"){ae.find("p").fadeOut(af.speed,function(){e(this).html(ag);return e(this).fadeIn(af.speed)})}else{ae.find("p").html(ag)}return ae.fadeIn(af.speed)}else{return ae.fadeOut(af.speed)}};R=function(af){var ae;ae=e(af[M.currentSlide]);M.currentImage=ae;if(!ae.is("img")){M.currentImage=ae.find("img:first")}return ae};o=function(){window.clearInterval(E);return E=""};P=function(){M.paused=true;return o()};h=function(){M.paused=false;if(E===""){return y()}};i=function(ae){if(M.running||M.totalSlides===1){return false}o();if(ae==="prev"){M.currentSlide-=2}return S(n,X,W,ae)};B=function(ag,af,ai){var ae,aj,ah;aj=function(al){var ak,am;am=Math.round(ag.width()/af.slices);ak=ag;if(af.adaptImages){ak=ag.find("#rambling-animation")}return ak.append(N(am,al,af.slices,ai))};for(ae=0,ah=af.slices;0<=ah?ae<ah:ae>ah;0<=ah?ae++:ae--){aj(ae)}return ag.find(".rambling-slice")};v=function(ag,ae,aj){var ak,af,ai,al,ah;af=Math.round(ag.width()/ae.boxCols);ak=Math.round(ag.height()/ae.boxRows);al=function(an){var ao,ap,am;am=[];for(ao=0,ap=ae.boxCols;0<=ap?ao<ap:ao>ap;0<=ap?ao++:ao--){am.push((function(ar){var aq;aq=ag;if(ae.adaptImages){aq=ag.find("#rambling-animation")}return aq.append(ad(af,ak,an,ar,ae,aj))})(ao))}return am};for(ai=0,ah=ae.boxRows;0<=ah?ai<ah:ai>ah;0<=ah?ai++:ai--){al(ai)}return ag.find(".rambling-box")};O=function(ae,af){return ae.css({background:"url("+(af.currentImage.attr("src"))+") no-repeat"})};N=function(aj,ae,ah,ai){var af,ak,ag;af="url("+(ai.currentImage.attr("src"))+") no-repeat -"+((aj+(ae*aj))-aj)+"px 0%";ag=aj;if(ae===(ah-1)){af="url("+(ai.currentImage.attr("src"))+") no-repeat -"+((aj+(ae*aj))-aj)+"px 0%";ag=n.width()-(aj*ae)}ak={left:""+(aj*ae)+"px",width:""+ag+"px",height:"0px",opacity:"0",background:af,overflow:"hidden"};return e('<div class="rambling-slice"></div>').css(ak)};ad=function(ai,ak,am,ag,ah,aj){var ae,al,af;ae="url("+(aj.currentImage.attr("src"))+") no-repeat -"+((ai+(ag*ai))-ai)+"px -"+((ak+(am*ak))-ak)+"px";af=ai;if(ag===(ah.boxCols-1)){ae="url("+(aj.currentImage.attr("src"))+") no-repeat -"+((ai+(ag*ai))-ai)+"px -"+((ak+(am*ak))-ak)+"px";af=n.width()-(ai*ag)}al={opacity:0,left:""+(ai*ag)+"px",top:""+(ak*am)+"px",width:""+af+"px",height:""+ak+"px",background:ae,overflow:"hidden"};return e('<div class="rambling-box"></div>').css(al)};if(W.adaptImages){r=N;g=ad;O=function(){var ag,ae,af;af=M.currentImage;ae=n.find(".currentImage");if(!ae.length){ag="alignTop";if(W.alignBottom){ag="alignBottom"}ae=e('<img src="" alt="currentImage" class="currentImage"/>');ae.addClass(ag);ae.css({display:"block"});n.find("#rambling-animation").prepend(ae)}return ae.attr({src:af.attr("src"),alt:af.attr("alt")})};N=function(al,ae,ai,ak){var ag,ah,af,aj;ah=r(al,ae,ai,ak);ah.css({background:"none"});ah.append('<span><img src="'+(ak.currentImage.attr("src"))+'" alt=""/></span>');ag=0;aj="auto";if(W.alignBottom){ag="auto";aj=0}af={display:"block",width:n.width(),left:"-"+((al+(ae*al))-al)+"px",bottom:ag,top:aj};ah.find("img").css(af);return ah};ad=function(aj,al,an,ag,ah,ak){var ae,ai,af,am;ai=g(aj,al,an,ag,ah,ak);ae=false;am=""+((al+(an*al))-al)+"px";if(ah.alignBottom){ae=""+(al*(ah.boxRows-(an+1)))+"px";am=false}af={display:"block",width:n.width(),left:"-"+((aj+(ag*aj))-aj)+"px",top:"auto",bottom:"auto"};if(am){af.top="-"+am}if(ae){af.bottom="-"+ae}ai.css({background:"none",top:am||"auto",bottom:ae||"auto"});ai.append("<span><img src='"+(ak.currentImage.attr("src"))+"' alt=''/></span>");ai.find("img").css(af);return ai}}p=function(af){var ag,ae,ai,ah;ah=B(n,W,M);ai=ah.filter(":first");ai.css(af.style);if(W.adaptImages&&af.style["background-position"]){ag=ai.find("img");ae=af.style["background-position"].split(" ");ag.css({left:ae[0]});ag.animate({left:af.animate["background-position"].split(" ")[0]},W.speed*2)}return ai.animate(af.animate||{width:""+(n.width())+"px"},W.speed*2,"",function(){if(af.afterChange){af.afterChange.apply(ai)}return n.trigger("rambling:finished")})};l=function(ae,ag){var af;af=B(n,W,M);Z=0;if(ag){af=ag.apply(af)}return af.each(ae)};ac=function(ae,ag){var af;af=v(n,W,M);Z=0;if(ag){af=ag.apply(af)}return ae.apply(af)};x=function(ae){return l(function(af){var ag;ag=e(this);ag.css({top:"0px"});if(af===W.slices-1){window.setTimeout(function(){return ag.animate({height:""+(n.height())+"px",opacity:"1.0"},W.speed,"",function(){return n.trigger("rambling:finished")})},100+Z)}else{window.setTimeout((function(){return ag.animate({height:""+(n.height())+"px",opacity:"1.0"},W.speed)}),100+Z)}return Z+=50},ae)};k=function(ae){return l(function(af){var ag;ag=e(this);ag.css({bottom:"0px"});if(af===W.slices-1){window.setTimeout((function(){return ag.animate({height:""+(n.height())+"px",opacity:"1.0"},W.speed,"",function(){return n.trigger("rambling:finished")})}),100+Z)}else{window.setTimeout((function(){return ag.animate({height:""+(n.height())+"px",opacity:"1.0"},W.speed)}),100+Z)}return Z+=50},ae)};T=function(ae){return l(function(af){var ag;ag=e(this);ag.css((af%2?{bottom:"0px"}:{top:"0px"}));if(af===W.slices-1){window.setTimeout((function(){return ag.animate({height:""+(n.height())+"px",opacity:"1.0"},W.speed,"",function(){return n.trigger("rambling:finished")})}),100+Z)}else{window.setTimeout((function(){return ag.animate({height:""+(n.height())+"px",opacity:"1.0"},W.speed)}),100+Z)}return Z+=50},ae)};Y=function(ae){return l(function(af){var ah,ag;ag=e(this);ah=ag.width();ag.css({top:"0px",height:"100%",width:"0px"});if(af===W.slices-1){window.setTimeout((function(){return ag.animate({width:ah,opacity:"1.0"},W.speed,"",function(){return n.trigger("rambling:finished")})}),100+Z)}else{window.setTimeout((function(){return ag.animate({width:ah,opacity:"1.0"},W.speed)}),100+Z)}return Z+=50},ae)};F=function(){return ac(function(){var ae;ae=this.length;return this.each(function(af){var ag;ag=e(this);if(af===ae-1){window.setTimeout((function(){return ag.animate({opacity:"1"},W.speed,"",function(){return n.trigger("rambling:finished")})}),100+Z)}else{window.setTimeout((function(){return ag.animate({opacity:"1"},W.speed)}),100+Z)}return Z+=20})},e.fn.shuffle)};G=function(af,ae){return ac(function(){var ai,ak,ah,al,aj,ag;ai=this;al=W.boxCols*W.boxRows;ah=0;ag=[];for(ak=0,aj=W.boxCols*2;0<=aj?ak<aj:ak>aj;0<=aj?ak++:ak--){ag.push((function(ap){var an,ao,aq,am;an=ap;am=[];for(ao=0,aq=W.boxRows;0<=aq?ao<aq:ao>aq;0<=aq?ao++:ao--){am.push((function(aw){var av,at,au,ay,ax,ar;if(an>=0&&an<W.boxCols){ay=aw;at=an;ax=Z;av=e(ai[ay][at]);ar=av.width();au=av.height();if(ae){av.css({width:0,height:0})}if(ah===al-1){window.setTimeout((function(){return av.animate({opacity:"1",width:ar,height:au},W.speed/1.3,"",function(){return n.trigger("rambling:finished")})}),100+Z)}else{window.setTimeout((function(){return av.animate({opacity:"1",width:ar,height:au},W.speed/1.3)}),100+Z)}ah++;Z+=20}return an--})(ao))}return am})(ak))}return ag},af)};C={fade:{style:{height:"100%",width:""+(n.width())+"px",position:"absolute",top:0,left:0},animate:{opacity:"1"}},rolloverRight:{style:{height:"100%",width:"0px",opacity:"1"}},rolloverLeft:{animate:{width:""+(n.width()),"background-position":"0px"},style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px","background-position":""+(-n.width())+"px"}},slideInRight:{animate:{width:""+(n.width()),"background-position":"0px"},style:{height:"100%",width:"0px",opacity:"1","background-position":""+(-n.width())+"px"}},slideInLeft:{style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},afterChange:function(){return this.css({left:"0px",right:""})}}};aa={sliceDown:x,sliceDownRight:x,sliceDownLeft:function(){return x(e.fn.reverse)},sliceDownRandom:function(){return x(e.fn.shuffle)},sliceUp:k,sliceUpRight:k,sliceUpLeft:function(){return k(e.fn.reverse)},sliceUpRandom:function(){return k(e.fn.shuffle)},sliceUpDown:T,sliceUpDownRight:T,sliceUpDownLeft:function(){return T(e.fn.reverse)},sliceUpDownRandom:function(){return T(e.fn.shuffle)},fold:Y,foldRight:Y,foldLeft:function(){return Y(e.fn.reverse)},foldRandom:function(){return Y(e.fn.shuffle)},fade:function(){return p(C.fade)},slideIn:function(){return p(C.slideInRight)},slideInRight:function(){return p(C.slideInRight)},slideInLeft:function(){return p(C.slideInLeft)},rollover:function(){return p(C.rolloverRight)},rolloverRight:function(){return p(C.rolloverRight)},rolloverLeft:function(){return p(C.rolloverLeft)},boxRandom:F,boxRain:function(){return G(function(){return e(this).as2dArray(W.boxCols)})},boxRainReverse:function(){return G(function(){return e(this).reverse().as2dArray(W.boxCols)})},boxRainGrow:function(){return G((function(){return e(this).as2dArray(W.boxCols)}),true)},boxRainGrowReverse:function(){return G((function(){return e(this).reverse().as2dArray(W.boxCols)}),true)}};S=function(ai,ag,ah,ae){var af;if(M.currentSlide===M.totalSlides-1){ah.lastSlide.call(this)}if(M.stopped&&!ae){return false}ah.beforeChange.call(this);M.currentSlide++;if(M.currentSlide===M.totalSlides){M.currentSlide=0;ah.slideshowEnd.call(this)}if(M.currentSlide<0){M.currentSlide=M.totalSlides-1}R(ag);if(ah.controlNav){ai.find(".rambling-controlNav a").removeClass("active").filter(":eq("+M.currentSlide+")").addClass("active")}s(ah);ai.find(".rambling-slice,.rambling-box").remove();if(ah.effect==="random"||ah.effect.contains(",")){M.randomAnimation=D()}else{M.randomAnimation=null}M.running=true;af=M.randomAnimation||ah.effect;return aa[af].apply(this)};W.afterLoad.call(this);this.stop=u;this.start=A;this.effect=U;this.option=K;this.destroy=Q;this.initialize=j;this.run=y;return this}})(jQuery);String.prototype.contains=function(c){return this.indexOf(c)!==-1};String.prototype.decapitalize=function(){var d,c;d=this.slice(0,1);c=this.slice(1);return""+(d.toLowerCase())+c}}).call(this);