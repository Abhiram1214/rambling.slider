(function(){Array.prototype.shuffle=function(){var c,b,d,a;d=this.length;for(c=d;d<=1?c<=1:c>=1;d<=1?c++:c--){this[c]=this[c];b=parseInt(Math.random()*c);a=this[--c];this[c]=this[b];this[b]=a}return this};Array.prototype.contains=function(c){var a,b;b=this.length;for(a=0;0<=b?a<b:a>b;0<=b?a++:a--){if(c===this[a]){return true}}return false};(function(a){a.fn.reverse=[].reverse;a.fn.shuffle=[].shuffle;return a.fn.as2dArray=function(b){var c,d,e;e=0;d=0;c=a("");c[e]=a("");this.each(function(){c[e][d]=a(this);d++;if(d===b){e++;d=0;return c[e]=a("")}});return c}})(jQuery);(function(b){var c,a;a=["stop","start"];b.fn.ramblingSlider=function(d){return this.each(function(f,h){var e,g;e=b(this);g=e.data("ramblingSlider");if(a.contains(d)&&g){g[d]()}if(g){return g}g=new c(this,d);return e.data("ramblingSlider",g)})};b.fn.ramblingSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};return c=function(f,h){var E,B,j,v,y,n,D,l,u,g,w,x,s,p,A,d,k,F,e,z,q,t,o,r,C,m;t=b(f);z=b.extend({},b.fn.ramblingSlider.defaults,h);o=0;r={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false};E=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","foldLeft","fade","slideInRight","slideInLeft","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"];this.stop=function(){var i;i=t.data("rambling:vars");if(!i.stop){return i.stop=true}};this.start=function(){var i;i=t.data("rambling:vars");if(i.stop){return i.stop=false}};p=function(G){var i,H;i=t.find(".rambling-caption");H=r.currentImage.attr("title");if(H){if(H.substr(0,1)==="#"){H=b(H).html()}if(i.css("display")==="block"){i.find("p").fadeOut(G.animSpeed,function(){b(this).html(H);return b(this).fadeIn(G.animSpeed)})}else{i.find("p").html(H)}return i.fadeIn(G.animSpeed)}else{return i.fadeOut(G.animSpeed)}};F=function(G){var i;i=b(G[r.currentSlide]);r.currentImage=i;if(!i.is("img")){r.currentImage=i.find("img:first")}return i};B=function(){clearInterval(o);return o=""};q=function(i){if(r.running){return false}B();if(i==="prev"){r.currentSlide-=2}return k(t,s,z,i)};y=function(J,I,L){var H,K,G;G=[];for(H=0,K=I.slices;0<=K?H<K:H>K;0<=K?H++:H--){G.push((function(N){var M,O;O=Math.round(J.width()/I.slices);M=J;if(I.adaptImages){M=J.find("#rambling-animation")}return M.append(u(O,N,I.slices,L))})(H))}return G};v=function(I,G,L){var M,H,K,J,i;H=Math.round(I.width()/G.boxCols);M=Math.round(I.height()/G.boxRows);i=[];for(K=0,J=G.boxRows;0<=J?K<J:K>J;0<=J?K++:K--){i.push((function(O){var P,Q,N;N=[];for(P=0,Q=G.boxCols;0<=Q?P<Q:P>Q;0<=Q?P++:P--){N.push((function(S){var R;R=I;if(G.adaptImages){R=I.find("#rambling-animation")}return R.append(l(H,M,O,S,G,L))})(P))}return N})(K))}return i};e=function(i,G){return i.css({background:"url("+(G.currentImage.attr("src"))+") no-repeat"})};u=function(K,i,I,J){var G,L,H;G="url("+(J.currentImage.attr("src"))+") no-repeat -"+((K+(i*K))-K)+"px 0%";H=K;if(i===(I-1)){G="url("+(J.currentImage.attr("src"))+") no-repeat -"+((K+(i*K))-K)+"px 0%";H=t.width()-(K*i)}L={left:""+(K*i)+"px",width:""+H+"px",height:"0px",opacity:"0",background:G,overflow:"hidden"};return b('<div class="rambling-slice"></div>').css(L)};l=function(J,L,N,H,I,K){var i,M,G;i="url("+(K.currentImage.attr("src"))+") no-repeat -"+((J+(H*J))-J)+"px -"+((L+(N*L))-L)+"px";G=J;if(H===(I.boxCols-1)){i="url("+(K.currentImage.attr("src"))+") no-repeat -"+((J+(H*J))-J)+"px -"+((L+(N*L))-L)+"px";G=t.width()-(J*H)}M={opacity:0,left:""+(J*H)+"px",top:""+(L*N)+"px",width:""+G+"px",height:""+L+"px",background:i,overflow:"hidden"};return b('<div class="rambling-box"></div>').css(M)};if(z.adaptImages){g=u;D=l;e=function(){var H,i,G;G=r.currentImage;i=t.find(".currentImage");if(!i.length){H="alignTop";if(z.alignBottom){H="alignBottom"}i=b('<img src="" alt="currentImage" class="currentImage"/>');i.addClass(H);i.css({display:"block"});t.find("#rambling-animation").prepend(i)}return i.attr({src:G.attr("src"),alt:G.attr("alt")})};u=function(M,i,J,L){var H,I,G,K;I=g(M,i,J,L);I.css({background:"none"});I.append('<span><img src="'+(L.currentImage.attr("src"))+'" alt=""/></span>');H=0;K="auto";if(z.alignBottom){H="auto";K=0}G={display:"block",width:t.width(),left:"-"+((M+(i*M))-M)+"px",bottom:H,top:K};I.find("img").css(G);return I};l=function(K,M,O,H,I,L){var i,J,G,N;J=D(K,M,O,H,I,L);i=false;N=""+((M+(O*M))-M)+"px";if(I.alignBottom){i=""+(M*(I.boxRows-(O+1)))+"px";N=false}G={display:"block",width:t.width(),left:"-"+((K+(H*K))-K)+"px",top:"auto",bottom:"auto"};if(N){G.top="-"+N}if(i){G.bottom="-"+i}J.css({background:"none",top:N||"auto",bottom:i||"auto"});J.append("<span><img src='"+(L.currentImage.attr("src"))+"' alt=''/></span>");J.find("img").css(G);return J}}t.data("rambling:vars",r);t.css({position:"relative"});t.addClass("ramblingSlider");if(z.adaptImages){A=b('<div id="rambling-animation"></div>');A.css({width:t.width(),height:t.height(),overflow:"hidden"});t.prepend(A);t.addClass("adaptingSlider")}s=t.children(":not(#rambling-animation)");s.each(function(){var I,i,G,H;I=b(this);H="";if(!I.is("img")){if(I.is("a")){I.addClass("rambling-imageLink");H=I}I=I.find("img:first")}G=I.width();if(G===0){G=I.attr("width")}i=I.height();if(i===0){i=I.attr("height")}if(G>t.width()&&z.useLargerImage){t.width(G)}if(i>t.height()&&(z.useLargerImage||!z.adaptImages)){t.height(i)}if(H!==""){H.css({display:"none"})}I.css({display:"none"});return r.totalSlides++});z.startSlide=z.startSlide%r.totalSlides;r.currentSlide=z.startSlide;x=F(s);if(x.is("a")){x.css({display:"block"})}e(t,r);t.append(b('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:z.captionOpacity},(function(){})()));t.find(".rambling-caption").hide();p(z);if(!z.manualAdvance&&s.length>1){o=setInterval((function(){return k(t,s,z,false)}),z.pauseTime)}if(z.directionNav){t.append("<div class='rambling-directionNav'><a class='rambling-prevNav'>"+z.prevText+"</a><a class='rambling-nextNav'>"+z.nextText+"</a></div>");if(z.directionNavHide){n=t.find(".rambling-directionNav");n.hide();t.hover((function(){return n.show()}),(function(){return n.hide()}))}t.find("a.rambling-prevNav").live("click",function(){return q("prev")});t.find("a.rambling-nextNav").live("click",function(){return q("next")})}if(z.controlNav){d=b('<div class="rambling-controlNav"></div>');t.append(d);C=function(G){var H;if(z.controlNavThumbs){H=s.eq(G);if(!H.is("img")){H=H.find("img:first")}if(z.controlNavThumbsFromRel){return d.append("<a class='rambling-control' rel='"+G+"'><img src='"+(H.attr("rel"))+"' alt='' /></a>")}else{return d.append("<a class='rambling-control' rel='"+G+"'><img src='"+(H.attr("src").replace(z.controlNavThumbsSearch,z.controlNavThumbsReplace))+"' alt='' /></a>")}}else{return d.append("<a class='rambling-control' rel='"+G+"'>"+(G+1)+"'</a>")}};for(w=0,m=s.length;0<=m?w<m:w>m;0<=m?w++:w--){C(w)}j=t.find(".rambling-controlNav a");j.filter(":eq("+r.currentSlide+")").addClass("active");j.live("click",function(){if(r.running){return false}if(b(this).hasClass("active")){return false}B();e(t,r);r.currentSlide=b(this).attr("rel")-1;return k(t,s,z,"control")})}if(z.keyboardNav){b(window).keypress(function(i){if(i.keyCode==="37"){if(r.running){return false}B();r.currentSlide-=2;k(t,s,z,"prev")}if(i.keyCode==="39"){if(r.running){return false}B();return k(t,s,z,"next")}})}if(z.pauseOnHover){t.hover(function(){r.paused=true;return B()},function(){r.paused=false;if(o===""&&!z.manualAdvance){return o=setInterval((function(){return k(t,s,z,false)}),z.pauseTime)}})}t.bind("rambling:animFinished",function(){r.running=false;b(s).each(function(){x=b(this);if(x.is("a")){return x.css({display:"none"})}});x=b(s[r.currentSlide]);if(x.is("a")){x.css({display:"block"})}if(o===""&&!r.paused&&!z.manualAdvance){o=setInterval((function(){return k(t,s,z,false)}),z.pauseTime)}e(t,r);return z.afterChange.call(this)});k=function(O,N,S,M){var G,R,I,K,H,W,T,V,P,J,i,U,Q,L;r=O.data("rambling:vars");if(r&&r.currentSlide===r.totalSlides-1){S.lastSlide.call(this)}if((!r||r.stop)&&!M){return false}S.beforeChange.call(this);r.currentSlide++;if(r.currentSlide===r.totalSlides){r.currentSlide=0;S.slideshowEnd.call(this)}if(r.currentSlide<0){r.currentSlide=r.totalSlides-1}F(N);if(S.controlNav){j=O.find(".rambling-controlNav a");j.removeClass("active");j.filter(":eq("+r.currentSlide+")").addClass("active")}p(S);O.find(".rambling-slice").remove();O.find(".rambling-box").remove();if(S.effect==="random"){r.randAnim=E[Math.floor(Math.random()*(E.length+1))];if(!r.randAnim){r.randAnim="fade"}}if(S.effect.contains(",")){E=S.effect.split(",");r.randAnim=E[Math.floor(Math.random()*E.length)];if(!r.randAnim){r.randAnim="fade"}}r.running=true;V=r.randAnim||S.effect;if(V.contains("slice")||V.contains("fold")){y(O,S,r);U=0;w=0;L=0;i=O.find(".rambling-slice");if(V.contains("Left")){i=i.reverse()}R=V.replace(/Right/,"").replace(/Left/,"");I={sliceDown:function(){var X;X=b(this);X.css({top:"0px"});if(w===S.slices-1){setTimeout(function(){return X.animate({height:"100%",opacity:"1.0"},S.animSpeed,"",function(){return O.trigger("rambling:animFinished")})},100+U)}else{setTimeout((function(){return X.animate({height:"100%",opacity:"1.0"},S.animSpeed)}),100+U)}U+=50;return w++},sliceUp:function(){var X;X=b(this);X.css({bottom:"0px"});if(w===S.slices-1){setTimeout((function(){return X.animate({height:"100%",opacity:"1.0"},S.animSpeed,"",function(){return O.trigger("rambling:animFinished")})}),100+U)}else{setTimeout((function(){return X.animate({height:"100%",opacity:"1.0"},S.animSpeed)}),100+U)}U+=50;return w++},sliceUpDown:function(){var X;X=b(this);if(w===0){X.css({top:"0px"});w++}else{X.css({bottom:"0px"});w=0}if(L===S.slices-1){setTimeout((function(){return X.animate({height:"100%",opacity:"1.0"},S.animSpeed,"",function(){return O.trigger("rambling:animFinished")})}),100+U)}else{setTimeout((function(){return X.animate({height:"100%",opacity:"1.0"},S.animSpeed)}),100+U)}U+=50;return L++},fold:function(){var Y,X;X=b(this);Y=X.width();X.css({top:"0px",height:"100%",width:"0px"});if(w===S.slices-1){setTimeout((function(){return X.animate({width:Y,opacity:"1.0"},S.animSpeed,"",function(){return O.trigger("rambling:animFinished")})}),100+U)}else{setTimeout((function(){return X.animate({width:Y,opacity:"1.0"},S.animSpeed)}),100+U)}U+=50;return w++}};return i.each(I[R])}else{if(V==="fade"||V==="slideInRight"||V==="slideInLeft"){y(O,S,r);K={fade:{style:{height:"100%",width:""+(O.width())+"px",position:"absolute",top:0,left:0},animate:{opacity:"1"}},slideInRight:{style:{height:"100%",width:"0px",opacity:"1"}},slideInLeft:{style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},callback:function(X){var Y;Y={left:"0px",right:""};return X.css(Y)}}};P=K[V];G=P.animate||{width:""+(O.width())+"px"};J=O.find(".rambling-slice:first");J.css(K[V].style);return J.animate(G,S.animSpeed*2,"",function(){if(P.callback){P.callback(J)}return O.trigger("rambling:animFinished")})}else{if(V.contains("box")){v(O,S,r);Q=S.boxCols*S.boxRows;w=0;U=0;H=O.find(".rambling-box");if(V.contains("Reverse")){H=H.reverse()}I={random:{beforeAnimation:function(){return H=H.shuffle()},animate:function(X){return X.each(function(){var Y;Y=b(this);if(w===Q-1){setTimeout((function(){return Y.animate({opacity:"1"},S.animSpeed,"",function(){return O.trigger("rambling:animFinished")})}),100+U)}else{setTimeout((function(){return Y.animate({opacity:"1"},S.animSpeed)}),100+U)}U+=20;return w++})}},rain:{beforeAnimation:function(){return H=H.as2dArray(S.boxCols)},animate:function(Y){var Z,aa,X;X=[];for(Z=0,aa=S.boxCols*2;0<=aa?Z<aa:Z>aa;0<=aa?Z++:Z--){X.push((function(ae){var ac,ad,ab,af;ac=ae;ab=function(ak){var aj,ah,ai,am,al,ag;if(ac>=0&&ac<S.boxCols){am=ak;ah=ac;al=U;aj=b(Y[am][ah]);ag=aj.width();ai=aj.height();if(V.contains("Grow")){aj.css({width:0,height:0})}if(w===Q-1){setTimeout((function(){return aj.animate({opacity:"1",width:ag,height:ai},S.animSpeed/1.3,"",function(){return O.trigger("rambling:animFinished")})}),100+al)}else{setTimeout((function(){return aj.animate({opacity:"1",width:ag,height:ai},S.animSpeed/1.3)}),100+al)}w++}return ac--};for(ad=0,af=S.boxRows;0<=af?ad<af:ad>af;0<=af?ad++:ad--){ab(ad)}return U+=100})(Z))}return X}}};T=V.replace(/box/,"").replace(/Grow/,"").replace(/Reverse/,"").decapitalize();W=I[T];W.beforeAnimation();return W.animate(H)}}}};z.afterLoad.call(this);return this}})(jQuery);String.prototype.contains=function(a){return this.indexOf(a)!==-1};String.prototype.decapitalize=function(){var b,a;b=this.slice(0,1);a=this.slice(1);return""+(b.toLowerCase())+a}}).call(this);