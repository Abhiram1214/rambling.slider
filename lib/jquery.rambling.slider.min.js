(function(){var b=Array.prototype.slice,a=Array.prototype.indexOf||function(e){for(var d=0,c=this.length;d<c;d++){if(this[d]===e){return d}}return -1};Array.prototype.shuffle=function(){var e,d,f,c;f=this.length;for(e=f;f<=1?e<=1:e>=1;f<=1?e++:e--){this[e]=this[e];d=parseInt(Math.random()*e);c=this[--e];this[e]=this[d];this[d]=c}return this};Array.prototype.contains=function(e){var c,d;d=this.length;for(c=0;0<=d?c<d:c>d;0<=d?c++:c--){if(e===this[c]){return true}}return false};Array.prototype.where=function(d){var f,c,g,e;c=[];for(g=0,e=this.length;g<e;g++){f=this[g];if(d(f)){(function(h){return c.push(h)})(f)}}return c};Array.prototype.first=function(c){var e,f,d;if(!c){c=(function(g){return true})}for(f=0,d=this.length;f<d;f++){e=this[f];if(c(e)){return e}}return null};Array.prototype.map=function(g){var e,c,h,f,d;c=[];if(!g){g=(function(i){return i})}h=function(i){return c.push(g(i))};for(f=0,d=this.length;f<d;f++){e=this[f];h(e)}return c};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};Array.prototype.fromObject=function(d,g){var e,c,f,h;c=this;if(!g){g=(function(i,j){return j})}h=function(i,j){return c.push(g(i,j))};for(e in d){f=d[e];h(e,f)}return c};(function(c){c.fn.reverse=[].reverse;c.fn.shuffle=[].shuffle;return c.fn.as2dArray=function(d){var e,f,g;g=0;f=0;e=c("");e[g]=c("");this.each(function(){e[g][f]=c(this);f++;if(f===d){g++;f=0;return e[g]=c("")}});return e}})(jQuery);(function(e){var f,d,c;c=["stop","start","option","effect","destroy"];e.fn.ramblingSlider=function(){var l,m,h,g,i,j,k;h=arguments[0],i=2<=arguments.length?b.call(arguments,1):[];m=a.call(c,h)>=0;g=(typeof h)==="string";j=this.data("rambling:slider");l=function(n,o){return !o.length||(n==="option"&&o.length===1&&typeof o[0]==="string")};if(j){if(m){k=j[h].apply(j,i);if(l(h,i)){return k}else{return this}}else{if(g){return e.error("Method '"+h+"' not found.")}else{if(h){return e.error("Slider already initialized.")}}}}else{if(m||g){return e.error("Tried to call method '"+h+"' on element without slider.")}}return this.each(function(o,p){var n;n=e(this);if(n.data("rambling:slider")){return}j=new f(this,h);n.data("rambling:slider",j);j.initialize();return j.run()})};e.fn.ramblingSlider.defaults={slices:15,boxCols:8,boxRows:4,speed:500,pauseTime:3000,manualAdvance:false,captionOpacity:0.8,startSlide:0,effect:"random",directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};d=["startSlide","directionNav","directionNavHide","controlNav","controlNavThumbs","controlNavThumbsFromRel","controlNavThumbsSearch","controlNavThumbsReplace","adaptImages","useLargerImage","alignBottom","keyboardNav","pauseOnHover","prevText","nextText"];return f=function(v,C){var s,O,M,y,af,r,n,ad,x,E,V,Y,K,ac,N,g,h,ag,S,G,t,k,l,ab,P,U,Q,z,ae,u,J,W,I,q,B,Z,p,T,L,aa,A,j,X,m,o,D,w,H,F,i,R;o=e(v);ab=o.children(":not(#rambling-animation)");aa=e.extend({},e.fn.ramblingSlider.defaults,C);H=0;ad=0;R={currentSlide:0,currentSlideElement:"",previousSlideElement:"",totalSlides:0,running:false,paused:false,stopped:false};o.data("rambling:vars",R);w=function(){R.stopped=true;return o};D=function(){R.stopped=false;return o};V=function(){o.find("#rambling-animation,.rambling-slice,.rambling-box,.rambling-caption,.rambling-directionNav,.rambling-controlNav").remove();o.removeClass("ramblingSlider adaptingSlider");o.removeAttr("style");o.data("rambling:vars",null);o.data("rambling:slider",null);o.unbind("rambling:finished");o.unbind("hover");q();ab.show().children().show();return o};P=function(){var ai,ah,aj;ah=1<=arguments.length?b.call(arguments,0):[];if(!ah.length){return aa}P=ah[0];aj=ah[1];ai=typeof P==="object";if(P==="effect"){if(aj){return Y(aj)}else{return Y()}}if(ai){return e.extend(aa,P)}else{if(aj!=null){if(a.call(d,P)>=0){return e.error("Slider already running. Option '"+P+"' cannot be changed.")}return aa[P]=aj}else{return aa[P]}}};Y=function(){var ah;ah=1<=arguments.length?b.call(arguments,0):[];if(!ah.length){return aa.effect}return aa.effect=ah[0]};l=function(){Y(aa.effect);L();R.currentSlide=aa.startSlide=aa.startSlide%R.totalSlides;T();s();M();O(ab);y();if(aa.pauseOnHover){o.hover(U,i)}return Z()};B=function(){if(!aa.manualAdvance&&R.totalSlides>1){return H=window.setInterval((function(){return W(o,ab,aa,false)}),aa.pauseTime)}};L=function(){o.css({position:"relative"});o.addClass("ramblingSlider");R.totalSlides=ab.length;z();if(aa.adaptImages){Q()}return ae()};z=function(){var ah;ah=e('<div id="rambling-animation"></div>');ah.css({width:o.width(),height:o.height(),overflow:"hidden"});return o.prepend(ah)};Q=function(){return o.addClass("adaptingSlider")};ae=function(){var ai,ah;ah=e("#rambling-animation");ab.each(function(){var aj;aj=e(this);aj.css({display:"none"});return ah.append(aj.clone().addClass("slideElement"))});ab=ah.children();ab.each(function(){var am,aj,ak,al;am=e(this);al=null;if(am.is("a")){al=am.addClass("rambling-imageLink");am=am.find("img:first")}ak=am.width()||am.attr("width");aj=am.height()||am.attr("height");if(ak>o.width()&&aa.useLargerImage){o.width(ak)}if(aj>o.height()&&(aa.useLargerImage||!aa.adaptImages)){o.height(aj)}if(al){al.css({display:"none"})}return am.css({display:"none"})});ai=p(ab);if(ai.is("a")){return ai.css({display:"block"})}};s=function(){var ah;ah=e('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:aa.captionOpacity});o.append(ah);return u(aa)};M=function(){var ah;if(aa.directionNav&&R.totalSlides>1){ah=e("<div class='rambling-directionNav'><a class='rambling-prevNav'>"+aa.prevText+"</a><a class='rambling-nextNav'>"+aa.nextText+"</a></div>");o.append(ah);if(aa.directionNavHide){ah.hide();o.hover((function(){return ah.show()}),(function(){return ah.hide()}))}o.find("a.rambling-prevNav").live("click",function(){return j("prev")});return o.find("a.rambling-nextNav").live("click",function(){return j("next")})}};O=function(){var ai,ah,aj,al,ak;if(aa.controlNav){aj=e('<div class="rambling-controlNav"></div>');o.append(aj);al=function(am){var an;if(aa.controlNavThumbs){an=ab.eq(am);if(!an.is("img")){an=an.find("img:first")}if(aa.controlNavThumbsFromRel){return aj.append("<a class='rambling-control' rel='"+am+"'><img src='"+(an.attr("rel"))+"' alt='' /></a>")}else{return aj.append("<a class='rambling-control' rel='"+am+"'><img src='"+(an.attr("src").replace(aa.controlNavThumbsSearch,aa.controlNavThumbsReplace))+"' alt='' /></a>")}}else{return aj.append("<a class='rambling-control' rel='"+am+"'>"+(am+1)+"'</a>")}};for(ah=0,ak=ab.length;0<=ak?ah<ak:ah>ak;0<=ak?ah++:ah--){al(ah)}ai=o.find(".rambling-controlNav a");ai.filter(":eq("+R.currentSlide+")").addClass("active");return ai.live("click",function(){if(R.running){return false}if(e(this).hasClass("active")){return false}q();T();R.currentSlide=e(this).attr("rel")-1;return W(o,ab,aa,"control")})}};y=function(){if(aa.keyboardNav){return e(window).keypress(function(ah){if(ah.keyCode===37){j("prev")}if(ah.keyCode===39){return j("next")}})}};Z=function(){return o.bind("rambling:finished",function(){var ah;R.running=false;ab.filter("a").css({display:"none"});ah=e(ab[R.currentSlide]);if(ah.is("a")){ah.css({display:"block"})}if(H===""&&!R.paused){B()}if(!R.currentSlideElement.find("object,embed").length){T()}return aa.afterChange.call(this)})};N=function(){var ah;if(R.currentSlideElement.find("object,embed").length){return[K.fadeOut]}else{ah=[].fromObject(k,function(ai,aj){return ai});if(aa.effect!=="random"){ah=ah.where(function(ai){return aa.effect.contains(ai)})}return ah.map(function(ai){return k[ai]})}};G=function(){return N().random()||k.fade};u=function(ai){var ah,aj;ah=o.find(".rambling-caption");aj=R.currentSlideElement.attr("title");if(aj){if(aj.startsWith("#")){aj=e(aj).html()}if(ah.css("display")==="block"){ah.find("p").fadeOut(ai.speed,function(){var ak;ak=e(this);ak.html(aj);return ak.fadeIn(ai.speed)})}else{ah.find("p").html(aj)}return ah.fadeIn(ai.speed)}else{return ah.fadeOut(ai.speed)}};p=function(ai){var ah;ah=e(ai[R.currentSlide]);R.previousSlideElement=R.currentSlideElement;R.currentSlideElement=ah;if(ah.is("a")){R.currentSlideElement=ah.find("img:first")}return ah};q=function(){window.clearInterval(H);return H=""};U=function(){R.paused=true;return q()};i=function(){R.paused=false;if(H===""){return B()}};j=function(ah){if(R.running||R.totalSlides===1){return false}q();if(ah==="prev"){R.currentSlide-=2}return W(o,ab,aa,ah)};h=function(ah){if(ah==null){ah=R.currentSlideElement}return E(1,ah)};E=function(ai,ak){var ah,aj;if(ai==null){ai=aa.slices}if(ak==null){ak=R.currentSlideElement}aj=function(am){var al,an;an=Math.round(o.width()/ai);al=o.find("#rambling-animation");return al.append(S(an,am,ai,R,ak))};for(ah=0;0<=ai?ah<ai:ah>ai;0<=ai?ah++:ah--){aj(ah)}return o.find(".rambling-slice")};x=function(ai,ah){var al,aj,ak,am;if(ai==null){ai=aa.boxCols}if(ah==null){ah=aa.boxRows}aj=Math.round(o.width()/ai);al=Math.round(o.height()/ah);am=function(ao){var ap,an;an=[];for(ap=0;0<=ai?ap<ai:ap>ai;0<=ai?ap++:ap--){an.push((function(ar){var aq;aq=o.find("#rambling-animation");return aq.append(ag(aj,al,ao,ar,aa,R))})(ap))}return an};for(ak=0;0<=ah?ak<ah:ak>ah;0<=ah?ak++:ak--){am(ak)}return o.find(".rambling-box")};t=function(am,ah,ak,al,ao){var ai,an,aj;ai="url("+(ao.attr("src"))+") no-repeat -"+((am+(ah*am))-am)+"px 0%";aj=am;if(ah===(ak-1)){ai="url("+(ao.attr("src"))+") no-repeat -"+((am+(ah*am))-am)+"px 0%";aj=o.width()-(am*ah)}an={left:""+(am*ah)+"px",width:""+aj+"px",height:"0px",opacity:"0",background:ai,overflow:"hidden"};return e('<div class="rambling-slice"></div>').css(an)};g=function(al,an,ap,aj,ak,am){var ah,ao,ai;ah="url("+(am.currentSlideElement.attr("src"))+") no-repeat -"+((al+(aj*al))-al)+"px -"+((an+(ap*an))-an)+"px";ai=al;if(aj===(ak.boxCols-1)){ah="url("+(am.currentSlideElement.attr("src"))+") no-repeat -"+((al+(aj*al))-al)+"px -"+((an+(ap*an))-an)+"px";ai=o.width()-(al*aj)}ao={opacity:0,left:""+(al*aj)+"px",top:""+(an*ap)+"px",width:""+ai+"px",height:""+an+"px",background:ah,overflow:"hidden"};return e('<div class="rambling-box"></div>').css(ao)};T=function(){var aj,ah,ai;o.find(".currentSlideElement").removeClass("currentSlideElement alignTop alignBottom").css({display:"none"});R.currentSlideElement.siblings(".slideElement").css({display:"none"});ai=R.currentSlideElement.addClass("currentSlideElement");aj="alignTop";if(aa.alignBottom){aj="alignBottom"}ai.addClass(aj);ai.css({display:"block"});ah=ai.find("object,embed");ah.height(o.height());return ah.width(o.width())};S=function(an,ai,am,aj,al){var ah,ao,ap,ak;ao=t(an,ai,am,aj,al);ao.css({background:"none"});ao.append('<span><img src="'+(al.attr("src"))+'" alt=""/></span>');ah=0;ak="auto";if(aa.alignBottom){ah="auto";ak=0}ap={display:"block",width:o.width(),left:"-"+((an+(ai*an))-an)+"px",bottom:ah,top:ak};ao.find("img").css(ap);return ao};ag=function(am,ao,aq,aj,ak,an){var ah,al,ai,ap;al=g(am,ao,aq,aj,ak,an);ah=false;ap=""+((ao+(aq*ao))-ao)+"px";if(ak.alignBottom){ah=""+(ao*(ak.boxRows-(aq+1)))+"px";ap=false}ai={display:"block",width:o.width(),left:"-"+((am+(aj*am))-am)+"px",top:"auto",bottom:"auto"};if(ap){ai.top="-"+ap}if(ah){ai.bottom="-"+ah}al.css({background:"none",top:ap||"auto",bottom:ah||"auto"});al.append("<span><img src='"+(an.currentSlideElement.attr("src"))+"' alt=''/></span>");al.find("img").css(ai);return al};r=function(ah){var ai,aj;aj=h();if(aa.alignBottom){ah.style.bottom="0";ah.style.top="auto"}else{ah.style.top="0";ah.style.bottom="auto"}aj.css(ah.style);ai=aj.find("img");if(ah.imageStyle){ai.css(ah.imageStyle)}if(ah.imageAnimate){ai.animate(ah.imageAnimate,aa.speed*2)}return aj.animate(ah.animate||{width:""+(o.width())+"px"},aa.speed*2,"",function(){if(aa.afterChange){aa.afterChange.apply(aj)}return o.trigger("rambling:finished")})};n=function(ah,aj){var ai;ai=E();ad=0;if(aj){ai=aj.apply(ai)}return ai.each(ah)};af=function(ah,aj){var ai;ai=x();ad=0;if(aj){ai=aj.apply(ai)}return ah.apply(ai)};A=function(ah){return n(function(ai){var aj;aj=e(this);aj.css({top:"0px"});if(ai===aa.slices-1){window.setTimeout(function(){return aj.animate({height:""+(o.height())+"px",opacity:"1.0"},aa.speed,"",function(){return o.trigger("rambling:finished")})},100+ad)}else{window.setTimeout((function(){return aj.animate({height:""+(o.height())+"px",opacity:"1.0"},aa.speed)}),100+ad)}return ad+=50},ah)};m=function(ah){return n(function(ai){var aj;aj=e(this);aj.css({bottom:"0px"});if(ai===aa.slices-1){window.setTimeout((function(){return aj.animate({height:""+(o.height())+"px",opacity:"1.0"},aa.speed,"",function(){return o.trigger("rambling:finished")})}),100+ad)}else{window.setTimeout((function(){return aj.animate({height:""+(o.height())+"px",opacity:"1.0"},aa.speed)}),100+ad)}return ad+=50},ah)};X=function(ah){return n(function(ai){var aj;aj=e(this);aj.css((ai%2?{bottom:"0px"}:{top:"0px"}));if(ai===aa.slices-1){window.setTimeout((function(){return aj.animate({height:""+(o.height())+"px",opacity:"1.0"},aa.speed,"",function(){return o.trigger("rambling:finished")})}),100+ad)}else{window.setTimeout((function(){return aj.animate({height:""+(o.height())+"px",opacity:"1.0"},aa.speed)}),100+ad)}return ad+=50},ah)};ac=function(ah){return n(function(ai){var ak,aj;aj=e(this);ak=aj.width();aj.css({top:"0px",height:"100%",width:"0px"});if(ai===aa.slices-1){window.setTimeout((function(){return aj.animate({width:ak,opacity:"1.0"},aa.speed,"",function(){return o.trigger("rambling:finished")})}),100+ad)}else{window.setTimeout((function(){return aj.animate({width:ak,opacity:"1.0"},aa.speed)}),100+ad)}return ad+=50},ah)};I=function(){return af(function(){var ah;ah=this.length;return this.each(function(ai){var aj;aj=e(this);if(ai===ah-1){window.setTimeout((function(){return aj.animate({opacity:"1"},aa.speed,"",function(){return o.trigger("rambling:finished")})}),100+ad)}else{window.setTimeout((function(){return aj.animate({opacity:"1"},aa.speed)}),100+ad)}return ad+=20})},e.fn.shuffle)};J=function(ai,ah){return af(function(){var al,an,ak,ao,am,aj;al=this;ao=aa.boxCols*aa.boxRows;ak=0;aj=[];for(an=0,am=aa.boxCols*2;0<=am?an<am:an>am;0<=am?an++:an--){aj.push((function(at){var aq,ar,au,ap;aq=at;ap=[];for(ar=0,au=aa.boxRows;0<=au?ar<au:ar>au;0<=au?ar++:ar--){ap.push((function(az){var ay,aw,ax,aB,aA,av;if(aq>=0&&aq<aa.boxCols){aB=az;aw=aq;aA=ad;ay=e(al[aB][aw]);av=ay.width();ax=ay.height();if(ah){ay.css({width:0,height:0})}if(ak===ao-1){window.setTimeout((function(){return ay.animate({opacity:"1",width:av,height:ax},aa.speed/1.3,"",function(){return o.trigger("rambling:finished")})}),100+ad)}else{window.setTimeout((function(){return ay.animate({opacity:"1",width:av,height:ax},aa.speed/1.3)}),100+ad)}ak++;ad+=20}return aq--})(ar))}return ap})(an))}return aj},ai)};F={fadeIn:{style:{height:"100%",width:""+(o.width())+"px",position:"absolute",top:0,left:0},animate:{opacity:"1"}},fadeOut:{style:{height:"100%",width:""+(o.width())+"px",position:"absolute",top:0,left:0,opacity:"1"},animate:{opacity:"0"}},rolloverRight:{style:{height:"100%",width:"0px",opacity:"1"}},rolloverLeft:{imageAnimate:{left:"0px"},animate:{width:""+(o.width())},style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},imageStyle:{left:""+(-o.width())+"px"}},slideInRight:{imageAnimate:{left:"0px"},animate:{width:""+(o.width())},style:{height:"100%",width:"0px",opacity:"1"},imageStyle:{left:""+(-o.width())+"px"}},slideInLeft:{style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},afterChange:function(){return this.css({left:"0px",right:""})}}};k={sliceDown:A,sliceDownRight:A,sliceDownLeft:function(){return A(e.fn.reverse)},sliceDownRandom:function(){return A(e.fn.shuffle)},sliceUp:m,sliceUpRight:m,sliceUpLeft:function(){return m(e.fn.reverse)},sliceUpRandom:function(){return m(e.fn.shuffle)},sliceUpDown:X,sliceUpDownRight:X,sliceUpDownLeft:function(){return X(e.fn.reverse)},sliceUpDownRandom:function(){return X(e.fn.shuffle)},fold:ac,foldRight:ac,foldLeft:function(){return ac(e.fn.reverse)},foldRandom:function(){return ac(e.fn.shuffle)},fade:function(){return r(F.fadeIn)},fadeIn:function(){return r(F.fadeIn)},slideIn:function(){return r(F.slideInRight)},slideInRight:function(){return r(F.slideInRight)},slideInLeft:function(){return r(F.slideInLeft)},rollover:function(){return r(F.rolloverRight)},rolloverRight:function(){return r(F.rolloverRight)},rolloverLeft:function(){return r(F.rolloverLeft)},boxRandom:I,boxRain:function(){return J(function(){return e(this).as2dArray(aa.boxCols)})},boxRainReverse:function(){return J(function(){return e(this).reverse().as2dArray(aa.boxCols)})},boxRainGrow:function(){return J((function(){return e(this).as2dArray(aa.boxCols)}),true)},boxRainGrowReverse:function(){return J((function(){return e(this).reverse().as2dArray(aa.boxCols)}),true)}};K={fadeOut:function(){var ah,ai;ah=R.currentSlideElement.find("object,embed").length;ai=h(R.previousSlideElement);ai.css(F.fadeOut.style);T();return ai.animate(F.fadeOut.animate,aa.speed*2,"",function(){if(aa.afterChange){aa.afterChange.apply(ai)}ai.css({display:"none"});return o.trigger("rambling:finished")})}};W=function(ak,ai,aj,ah){if(R.currentSlide===R.totalSlides-1){aj.lastSlide.call(this)}if(R.stopped&&!ah){return false}aj.beforeChange.call(this);R.currentSlide++;if(R.currentSlide===R.totalSlides){R.currentSlide=0;aj.slideshowEnd.call(this)}if(R.currentSlide<0){R.currentSlide=R.totalSlides-1}p(ai);if(aj.controlNav){ak.find(".rambling-controlNav a").removeClass("active").filter(":eq("+R.currentSlide+")").addClass("active")}u(aj);ak.find(".rambling-slice,.rambling-box").remove();R.running=true;return G().apply(this)};aa.afterLoad.call(this);this.stop=w;this.start=D;this.effect=Y;this.option=P;this.destroy=V;this.initialize=l;this.run=B;return this}})(jQuery);String.prototype.contains=function(c){return this.indexOf(c)!==-1};String.prototype.decapitalize=function(){var d,c;d=this.slice(0,1);c=this.slice(1);return""+(d.toLowerCase())+c};String.prototype.startsWith=function(c){return this.substring(0,c.length)===c}}).call(this);