(function(){var b=Array.prototype.slice,a=Array.prototype.indexOf||function(e){for(var d=0,c=this.length;d<c;d++){if(this[d]===e){return d}}return -1};Array.prototype.shuffle=function(){var e,d,f,c;f=this.length;for(e=f;f<=1?e<=1:e>=1;f<=1?e++:e--){this[e]=this[e];d=parseInt(Math.random()*e);c=this[--e];this[e]=this[d];this[d]=c}return this};Array.prototype.contains=function(e){var c,d;d=this.length;for(c=0;0<=d?c<d:c>d;0<=d?c++:c--){if(e===this[c]){return true}}return false};Array.prototype.where=function(d){var f,c,g,e;c=[];for(g=0,e=this.length;g<e;g++){f=this[g];if(d(f)){(function(h){return c.push(h)})(f)}}return c};Array.prototype.first=function(c){var e,f,d;if(!c){c=(function(g){return true})}for(f=0,d=this.length;f<d;f++){e=this[f];if(c(e)){return e}}return null};Array.prototype.map=function(g){var e,c,h,f,d;c=[];if(!g){g=(function(i){return i})}h=function(i){return c.push(g(i))};for(f=0,d=this.length;f<d;f++){e=this[f];h(e)}return c};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]};Array.prototype.fromObject=function(d,g){var e,c,f,h;c=this;if(!g){g=(function(i,j){return j})}h=function(i,j){return c.push(g(i,j))};for(e in d){f=d[e];h(e,f)}return c};(function(c){c.fn.reverse=[].reverse;c.fn.shuffle=[].shuffle;c.fn.as2dArray=function(d){var e,f,g;g=0;f=0;e=c("");e[g]=c("");this.each(function(){e[g][f]=c(this);f++;if(f===d){g++;f=0;return e[g]=c("")}});return e};return c.fn.containsFlash=function(){return this.find("object,embed").length}})(jQuery);(function(e){var f,d,c;c=["stop","start","option","effect","destroy"];e.fn.ramblingSlider=function(){var l,m,h,g,i,j,k;h=arguments[0],i=2<=arguments.length?b.call(arguments,1):[];m=a.call(c,h)>=0;g=(typeof h)==="string";j=this.data("rambling:slider");l=function(n,o){return !o.length||(n==="option"&&o.length===1&&typeof o[0]==="string")};if(j){if(m){k=j[h].apply(j,i);if(l(h,i)){return k}else{return this}}else{if(g){return e.error("Method '"+h+"' not found.")}else{if(h){return e.error("Slider already initialized.")}}}}else{if(m||g){return e.error("Tried to call method '"+h+"' on element without slider.")}}return this.each(function(o,p){var n;n=e(this);if(n.data("rambling:slider")){return}j=new f(this,h);n.data("rambling:slider",j);j.initialize();return j.run()})};e.fn.ramblingSlider.defaults={slices:15,boxCols:8,boxRows:4,speed:500,pauseTime:3000,manualAdvance:false,captionOpacity:0.8,startSlide:0,effect:"random",directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};d=["startSlide","directionNav","directionNavHide","controlNav","controlNavThumbs","controlNavThumbsFromRel","controlNavThumbsSearch","controlNavThumbsReplace","adaptImages","useLargerImage","alignBottom","keyboardNav","pauseOnHover","prevText","nextText"];return f=function(v,D){var s,P,N,z,af,r,n,ad,w,y,F,W,Z,L,ac,O,g,h,ag,T,H,t,k,l,Q,V,R,A,ae,u,K,X,J,q,C,aa,p,U,M,ab,B,j,Y,m,o,E,x,I,G,i,S;o=e(v);w=o.children(":not(#rambling-animation)");ab=e.extend({},e.fn.ramblingSlider.defaults,D);I=0;ad=0;S={currentSlide:0,currentSlideElement:"",previousSlideElement:"",totalSlides:0,running:false,paused:false,stopped:false};o.data("rambling:vars",S);x=function(){S.stopped=true;return o};E=function(){S.stopped=false;return o};W=function(){o.find("#rambling-animation,.rambling-slice,.rambling-box,.rambling-caption,.rambling-directionNav,.rambling-controlNav").remove();o.removeClass("ramblingSlider adaptingSlider");o.removeAttr("style");o.data("rambling:vars",null);o.data("rambling:slider",null);o.unbind("rambling:finished");o.unbind("hover");q();o.children().show().children().show();return o};Q=function(){var ai,ah,aj;ah=1<=arguments.length?b.call(arguments,0):[];if(!ah.length){return ab}Q=ah[0];aj=ah[1];ai=typeof Q==="object";if(Q==="effect"){if(aj){return Z(aj)}else{return Z()}}if(ai){return e.extend(ab,Q)}else{if(aj!=null){if(a.call(d,Q)>=0){return e.error("Slider already running. Option '"+Q+"' cannot be changed.")}return ab[Q]=aj}else{return ab[Q]}}};Z=function(){var ah;ah=1<=arguments.length?b.call(arguments,0):[];if(!ah.length){return ab.effect}return ab.effect=ah[0]};l=function(){Z(ab.effect);M();S.currentSlide=ab.startSlide=ab.startSlide%S.totalSlides;U();s();N();P(w);z();if(ab.pauseOnHover){o.hover(V,i)}return aa()};C=function(){if(!ab.manualAdvance&&S.totalSlides>1){return I=window.setInterval((function(){return X(o,w,ab,false)}),ab.pauseTime)}};M=function(){o.css({position:"relative"});o.addClass("ramblingSlider");S.totalSlides=w.length;A();if(ab.adaptImages){R()}return ae()};A=function(){var ah;ah=e('<div id="rambling-animation"></div>');ah.css({width:o.width(),height:o.height(),overflow:"hidden"});return o.prepend(ah)};R=function(){return o.addClass("adaptingSlider")};ae=function(){var ai,ah;ah=e("#rambling-animation");w.each(function(){var ak,aj;ak=e(this);ak.css({display:"none"});aj=ak.clone().addClass("slideElement");if(aj.containsFlash()){if(!aj.find("param[name=wmode]").length){aj.find("object").prepend('<param name="wmode" value="opaque" />')}aj.find("embed").attr({wmode:"opaque"})}return ah.append(aj)});w=ah.children();w.each(function(){var an,ak,al,aj,am;an=e(this);am=null;if(an.is("a")){am=an.addClass("rambling-imageLink");an=an.find("img:first")}al=an.width()||an.attr("width");ak=an.height()||an.attr("height");if(al>o.width()&&ab.useLargerImage){o.width(al)}if(ak>o.height()&&(ab.useLargerImage||!ab.adaptImages)){o.height(ak)}aj=an.find("object,embed");aj.height(o.height());aj.width(o.width());if(am){am.css({display:"none"})}return an.css({display:"none"})});ai=p(w);if(ai.is("a")){return ai.css({display:"block"})}};s=function(){var ah;ah=e('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:ab.captionOpacity});o.append(ah);return u(ab)};N=function(){var ah;if(ab.directionNav&&S.totalSlides>1){ah=e("<div class='rambling-directionNav'><a class='rambling-prevNav'>"+ab.prevText+"</a><a class='rambling-nextNav'>"+ab.nextText+"</a></div>");o.append(ah);if(ab.directionNavHide){ah.hide();o.hover((function(){return ah.show()}),(function(){return ah.hide()}))}o.find("a.rambling-prevNav").live("click",function(){return j("prev")});return o.find("a.rambling-nextNav").live("click",function(){return j("next")})}};P=function(){var ai,ah,aj,al,ak;if(ab.controlNav){aj=e('<div class="rambling-controlNav"></div>');o.append(aj);al=function(am){var an;if(ab.controlNavThumbs){an=w.eq(am);if(!an.is("img")){an=an.find("img:first")}if(ab.controlNavThumbsFromRel){return aj.append("<a class='rambling-control' rel='"+am+"'><img src='"+(an.attr("rel"))+"' alt='' /></a>")}else{return aj.append("<a class='rambling-control' rel='"+am+"'><img src='"+(an.attr("src").replace(ab.controlNavThumbsSearch,ab.controlNavThumbsReplace))+"' alt='' /></a>")}}else{return aj.append("<a class='rambling-control' rel='"+am+"'>"+(am+1)+"'</a>")}};for(ah=0,ak=w.length;0<=ak?ah<ak:ah>ak;0<=ak?ah++:ah--){al(ah)}ai=o.find(".rambling-controlNav a");ai.filter(":eq("+S.currentSlide+")").addClass("active");return ai.live("click",function(){if(S.running){return false}if(e(this).hasClass("active")){return false}q();U();S.currentSlide=e(this).attr("rel")-1;return X(o,w,ab,"control")})}};z=function(){if(ab.keyboardNav){return e(window).keypress(function(ah){if(ah.keyCode===37){j("prev")}if(ah.keyCode===39){return j("next")}})}};aa=function(){return o.bind("rambling:finished",function(){var ah;S.running=false;w.filter("a").css({display:"none"});ah=e(w[S.currentSlide]);if(ah.is("a")){ah.css({display:"block"})}if(I===""&&!S.paused){C()}U();o.find(".rambling-slice,.rambling-box").remove();return ab.afterChange.call(this)})};O=function(){var ai,ah,aj;aj=[];ah=[];if(S.currentSlideElement.containsFlash()){if(S.previousSlideElement.containsFlash()){ah=[L.slideIn];ai=L.slideIn}else{ah=[L.fadeOut];ai=L.fadeOut}}else{ah=k;ai=k.fade}aj=[].fromObject(ah,function(ak,al){return ak});if(ab.effect!=="random"){aj=aj.where(function(ak){return ab.effect.contains(ak)})}aj=aj.map(function(ak){return k[ak]});aj["default"]=ai;return aj};H=function(){var ah;ah=O();return ah.random()||ah["default"]};u=function(ai){var ah,aj;ah=o.find(".rambling-caption");aj=S.currentSlideElement.attr("title");if(aj){if(aj.startsWith("#")){aj=e(aj).html()}if(ah.css("display")==="block"){ah.find("p").fadeOut(ai.speed,function(){var ak;ak=e(this);ak.html(aj);return ak.fadeIn(ai.speed)})}else{ah.find("p").html(aj)}return ah.fadeIn(ai.speed)}else{return ah.fadeOut(ai.speed)}};p=function(ah){var ai;ai=e(ah[S.currentSlide]);S.previousSlideElement=S.currentSlideElement;S.currentSlideElement=ai;if(ai.is("a")){S.currentSlideElement=ai.find("img:first")}return ai};q=function(){window.clearInterval(I);return I=""};V=function(){S.paused=true;return q()};i=function(){S.paused=false;if(I===""){return C()}};j=function(ah){if(S.running||S.totalSlides===1){return false}q();if(ah==="prev"){S.currentSlide-=2}return X(o,w,ab,ah)};h=function(ah){if(ah==null){ah=S.currentSlideElement}return F(1,ah)};F=function(ai,ak){var ah,aj;if(ai==null){ai=ab.slices}if(ak==null){ak=S.currentSlideElement}aj=function(am){var al,an;an=Math.round(o.width()/ai);al=o.find("#rambling-animation");return al.append(T(an,am,ai,S,ak))};for(ah=0;0<=ai?ah<ai:ah>ai;0<=ai?ah++:ah--){aj(ah)}return o.find(".rambling-slice")};y=function(ai,ah){var al,aj,ak,am;if(ai==null){ai=ab.boxCols}if(ah==null){ah=ab.boxRows}aj=Math.round(o.width()/ai);al=Math.round(o.height()/ah);am=function(ao){var ap,an;an=[];for(ap=0;0<=ai?ap<ai:ap>ai;0<=ai?ap++:ap--){an.push((function(ar){var aq;aq=o.find("#rambling-animation");return aq.append(ag(aj,al,ao,ar,ab,S))})(ap))}return an};for(ak=0;0<=ah?ak<ah:ak>ah;0<=ah?ak++:ak--){am(ak)}return o.find(".rambling-box")};t=function(am,ah,ak,al,ao){var ai,an,aj;ai="url("+(ao.attr("src"))+") no-repeat -"+((am+(ah*am))-am)+"px 0%";aj=am;if(ah===(ak-1)){ai="url("+(ao.attr("src"))+") no-repeat -"+((am+(ah*am))-am)+"px 0%";aj=o.width()-(am*ah)}an={left:""+(am*ah)+"px",width:""+aj+"px",height:"0px",opacity:"0",background:ai,overflow:"hidden"};return e('<div class="rambling-slice"></div>').css(an)};g=function(al,an,ap,aj,ak,am){var ah,ao,ai;ah="url("+(am.currentSlideElement.attr("src"))+") no-repeat -"+((al+(aj*al))-al)+"px -"+((an+(ap*an))-an)+"px";ai=al;if(aj===(ak.boxCols-1)){ah="url("+(am.currentSlideElement.attr("src"))+") no-repeat -"+((al+(aj*al))-al)+"px -"+((an+(ap*an))-an)+"px";ai=o.width()-(al*aj)}ao={opacity:0,left:""+(al*aj)+"px",top:""+(an*ap)+"px",width:""+ai+"px",height:""+an+"px",background:ah,overflow:"hidden"};return e('<div class="rambling-box"></div>').css(ao)};U=function(){var ai,ah;o.find(".currentSlideElement").removeClass("currentSlideElement alignTop alignBottom").css({display:"none","z-index":"0"});S.currentSlideElement.siblings(".slideElement").css({display:"none"});ah=S.currentSlideElement.addClass("currentSlideElement");ai="alignTop";if(ab.alignBottom){ai="alignBottom"}ah.addClass(ai);return ah.css({display:"block","z-index":"0"})};T=function(an,ai,am,aj,al){var ah,ao,ap,ak;ao=t(an,ai,am,aj,al);ao.css({background:"none"});ao.append('<span><img src="'+(al.attr("src"))+'" alt=""/></span>');ah=0;ak="auto";if(ab.alignBottom){ah="auto";ak=0}ap={display:"block",width:o.width(),left:"-"+((an+(ai*an))-an)+"px",bottom:ah,top:ak};ao.find("img").css(ap);return ao};ag=function(am,ao,aq,aj,ak,an){var ah,al,ai,ap;al=g(am,ao,aq,aj,ak,an);ah=false;ap=""+((ao+(aq*ao))-ao)+"px";if(ak.alignBottom){ah=""+(ao*(ak.boxRows-(aq+1)))+"px";ap=false}ai={display:"block",width:o.width(),left:"-"+((am+(aj*am))-am)+"px",top:"auto",bottom:"auto"};if(ap){ai.top="-"+ap}if(ah){ai.bottom="-"+ah}al.css({background:"none",top:ap||"auto",bottom:ah||"auto"});al.append("<span><img src='"+(an.currentSlideElement.attr("src"))+"' alt=''/></span>");al.find("img").css(ai);return al};r=function(ah){var ai,aj;aj=h();if(ab.alignBottom){ah.style.bottom="0";ah.style.top="auto"}else{ah.style.top="0";ah.style.bottom="auto"}aj.css(ah.style);ai=aj.find("img");if(ah.imageStyle){ai.css(ah.imageStyle)}if(ah.imageAnimate){ai.animate(ah.imageAnimate,ab.speed*2)}return aj.animate(ah.animate||{width:""+(o.width())+"px"},ab.speed*2,"",function(){if(ab.afterChange){ab.afterChange.apply(aj)}return o.trigger("rambling:finished")})};n=function(ah,aj){var ai;ai=F();ad=0;if(aj){ai=aj.apply(ai)}return ai.each(ah)};af=function(ah,aj){var ai;ai=y();ad=0;if(aj){ai=aj.apply(ai)}return ah.apply(ai)};B=function(ah){return n(function(ai){var aj;aj=e(this);aj.css({top:"0px"});if(ai===ab.slices-1){window.setTimeout(function(){return aj.animate({height:""+(o.height())+"px",opacity:"1.0"},ab.speed,"",function(){return o.trigger("rambling:finished")})},100+ad)}else{window.setTimeout((function(){return aj.animate({height:""+(o.height())+"px",opacity:"1.0"},ab.speed)}),100+ad)}return ad+=50},ah)};m=function(ah){return n(function(ai){var aj;aj=e(this);aj.css({bottom:"0px"});if(ai===ab.slices-1){window.setTimeout((function(){return aj.animate({height:""+(o.height())+"px",opacity:"1.0"},ab.speed,"",function(){return o.trigger("rambling:finished")})}),100+ad)}else{window.setTimeout((function(){return aj.animate({height:""+(o.height())+"px",opacity:"1.0"},ab.speed)}),100+ad)}return ad+=50},ah)};Y=function(ah){return n(function(ai){var aj;aj=e(this);aj.css((ai%2?{bottom:"0px"}:{top:"0px"}));if(ai===ab.slices-1){window.setTimeout((function(){return aj.animate({height:""+(o.height())+"px",opacity:"1.0"},ab.speed,"",function(){return o.trigger("rambling:finished")})}),100+ad)}else{window.setTimeout((function(){return aj.animate({height:""+(o.height())+"px",opacity:"1.0"},ab.speed)}),100+ad)}return ad+=50},ah)};ac=function(ah){return n(function(ai){var ak,aj;aj=e(this);ak=aj.width();aj.css({top:"0px",height:"100%",width:"0px"});if(ai===ab.slices-1){window.setTimeout((function(){return aj.animate({width:ak,opacity:"1.0"},ab.speed,"",function(){return o.trigger("rambling:finished")})}),100+ad)}else{window.setTimeout((function(){return aj.animate({width:ak,opacity:"1.0"},ab.speed)}),100+ad)}return ad+=50},ah)};J=function(){return af(function(){var ah;ah=this.length;return this.each(function(ai){var aj;aj=e(this);if(ai===ah-1){window.setTimeout((function(){return aj.animate({opacity:"1"},ab.speed,"",function(){return o.trigger("rambling:finished")})}),100+ad)}else{window.setTimeout((function(){return aj.animate({opacity:"1"},ab.speed)}),100+ad)}return ad+=20})},e.fn.shuffle)};K=function(ai,ah){return af(function(){var al,an,ak,ao,am,aj;al=this;ao=ab.boxCols*ab.boxRows;ak=0;aj=[];for(an=0,am=ab.boxCols*2;0<=am?an<am:an>am;0<=am?an++:an--){aj.push((function(at){var aq,ar,au,ap;aq=at;ap=[];for(ar=0,au=ab.boxRows;0<=au?ar<au:ar>au;0<=au?ar++:ar--){ap.push((function(az){var ay,aw,ax,aB,aA,av;if(aq>=0&&aq<ab.boxCols){aB=az;aw=aq;aA=ad;ay=e(al[aB][aw]);av=ay.width();ax=ay.height();if(ah){ay.css({width:0,height:0})}if(ak===ao-1){window.setTimeout((function(){return ay.animate({opacity:"1",width:av,height:ax},ab.speed/1.3,"",function(){return o.trigger("rambling:finished")})}),100+ad)}else{window.setTimeout((function(){return ay.animate({opacity:"1",width:av,height:ax},ab.speed/1.3)}),100+ad)}ak++;ad+=20}return aq--})(ar))}return ap})(an))}return aj},ai)};G={fadeIn:{style:{height:"100%",width:""+(o.width())+"px",position:"absolute",top:0,left:0},animate:{opacity:"1"}},fadeOut:{style:{height:"100%",width:""+(o.width())+"px",position:"absolute",top:0,left:0,opacity:"1"},animate:{opacity:"0"}},rolloverRight:{style:{height:"100%",width:"0px",opacity:"1"}},rolloverLeft:{imageAnimate:{left:"0px"},animate:{width:""+(o.width())},style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},imageStyle:{left:""+(-o.width())+"px"}},slideInRight:{imageAnimate:{left:"0px"},animate:{width:""+(o.width())},style:{height:"100%",width:"0px",opacity:"1"},imageStyle:{left:""+(-o.width())+"px"}},slideInLeft:{style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},afterChange:function(){return this.css({left:"0px",right:""})}}};k={sliceDown:B,sliceDownRight:B,sliceDownLeft:function(){return B(e.fn.reverse)},sliceDownRandom:function(){return B(e.fn.shuffle)},sliceUp:m,sliceUpRight:m,sliceUpLeft:function(){return m(e.fn.reverse)},sliceUpRandom:function(){return m(e.fn.shuffle)},sliceUpDown:Y,sliceUpDownRight:Y,sliceUpDownLeft:function(){return Y(e.fn.reverse)},sliceUpDownRandom:function(){return Y(e.fn.shuffle)},fold:ac,foldRight:ac,foldLeft:function(){return ac(e.fn.reverse)},foldRandom:function(){return ac(e.fn.shuffle)},fade:function(){return r(G.fadeIn)},fadeIn:function(){return r(G.fadeIn)},slideIn:function(){return r(G.slideInRight)},slideInRight:function(){return r(G.slideInRight)},slideInLeft:function(){return r(G.slideInLeft)},rollover:function(){return r(G.rolloverRight)},rolloverRight:function(){return r(G.rolloverRight)},rolloverLeft:function(){return r(G.rolloverLeft)},boxRandom:J,boxRain:function(){return K(function(){return e(this).as2dArray(ab.boxCols)})},boxRainReverse:function(){return K(function(){return e(this).reverse().as2dArray(ab.boxCols)})},boxRainGrow:function(){return K((function(){return e(this).as2dArray(ab.boxCols)}),true)},boxRainGrowReverse:function(){return K((function(){return e(this).reverse().as2dArray(ab.boxCols)}),true)}};L={fadeOut:function(){var ah;ah=h(S.previousSlideElement);ah.css(G.fadeOut.style);U();return ah.animate(G.fadeOut.animate,ab.speed*2,"",function(){if(ab.afterChange){ab.afterChange.apply(ah)}ah.css({display:"none"});return o.trigger("rambling:finished")})},slideIn:function(){S.currentSlideElement.css({top:"0",left:""+(-o.width())+"px",position:"absolute",display:"block"});return window.setTimeout((function(){return S.currentSlideElement.animate({left:"0"},ab.speed*2,function(){return S.currentSlideElement.css({top:"auto",left:"auto",position:"relative"})})}),ab.speed*1.5)}};X=function(ak,ai,aj,ah){if(S.currentSlide===S.totalSlides-1){aj.lastSlide.call(this)}if(S.stopped&&!ah){return false}aj.beforeChange.call(this);S.currentSlide++;if(S.currentSlide===S.totalSlides){S.currentSlide=0;aj.slideshowEnd.call(this)}if(S.currentSlide<0){S.currentSlide=S.totalSlides-1}p(ai);if(aj.controlNav){ak.find(".rambling-controlNav a").removeClass("active").filter(":eq("+S.currentSlide+")").addClass("active")}u(aj);S.running=true;return H().apply(this)};ab.afterLoad.call(this);this.stop=x;this.start=E;this.effect=Z;this.option=Q;this.destroy=W;this.initialize=l;this.run=C;return this}})(jQuery);String.prototype.contains=function(c){return this.indexOf(c)!==-1};String.prototype.decapitalize=function(){var d,c;d=this.slice(0,1);c=this.slice(1);return""+(d.toLowerCase())+c};String.prototype.startsWith=function(c){return this.substring(0,c.length)===c}}).call(this);