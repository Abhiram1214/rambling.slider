(function(){var b=Array.prototype.slice,a=Array.prototype.indexOf||function(e){for(var d=0,c=this.length;d<c;d++){if(this[d]===e){return d}}return -1};Array.prototype.shuffle=function(){var e,d,f,c;f=this.length;for(e=f;f<=1?e<=1:e>=1;f<=1?e++:e--){this[e]=this[e];d=parseInt(Math.random()*e);c=this[--e];this[e]=this[d];this[d]=c}return this};Array.prototype.contains=function(e){var c,d;d=this.length;for(c=0;0<=d?c<d:c>d;0<=d?c++:c--){if(e===this[c]){return true}}return false};Array.prototype.where=function(d){var f,c,g,e;c=[];for(g=0,e=this.length;g<e;g++){f=this[g];if(d(f)){(function(h){return c.push(h)})(f)}}return c};Array.prototype.first=function(c){var e,f,d;if(!c){c=(function(g){return true})}for(f=0,d=this.length;f<d;f++){e=this[f];if(c(e)){return e}}return null};Array.prototype.map=function(g){var e,c,h,f,d;c=[];if(!g){g=(function(i){return i})}h=function(i){return c.push(g(i))};for(f=0,d=this.length;f<d;f++){e=this[f];h(e)}return c};Array.prototype.fromObject=function(d,g){var e,c,f,h;c=this;if(!g){g=(function(i,j){return j})}h=function(i,j){return c.push(g(i,j))};for(e in d){f=d[e];h(e,f)}return c};(function(c){c.fn.reverse=[].reverse;c.fn.shuffle=[].shuffle;return c.fn.as2dArray=function(d){var e,f,g;g=0;f=0;e=c("");e[g]=c("");this.each(function(){e[g][f]=c(this);f++;if(f===d){g++;f=0;return e[g]=c("")}});return e}})(jQuery);(function(e){var f,d,c;c=["stop","start","option","effect","destroy"];e.fn.ramblingSlider=function(){var l,m,h,g,i,j,k;h=arguments[0],i=2<=arguments.length?b.call(arguments,1):[];m=a.call(c,h)>=0;g=(typeof h)==="string";j=this.data("rambling:slider");l=function(n,o){return !o.length||(n==="option"&&o.length===1&&typeof o[0]==="string")};if(j){if(m){k=j[h].apply(j,i);if(l(h,i)){return k}else{return this}}else{if(g){return e.error("Method '"+h+"' not found.")}else{if(h){return e.error("Slider already initialized.")}}}}else{if(m||g){return e.error("Tried to call method '"+h+"' on element without slider.")}}return this.each(function(o,p){var n;n=e(this);if(n.data("rambling:slider")){return}j=new f(this,h);n.data("rambling:slider",j);j.initialize();return j.run()})};e.fn.ramblingSlider.defaults={slices:15,boxCols:8,boxRows:4,speed:500,pauseTime:3000,manualAdvance:false,captionOpacity:0.8,startSlide:0,effect:"random",directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};d=["startSlide","directionNav","directionNavHide","controlNav","controlNavThumbs","controlNavThumbsFromRel","controlNavThumbsSearch","controlNavThumbsReplace","adaptImages","useLargerImage","alignBottom","keyboardNav","pauseOnHover","prevText","nextText"];return f=function(t,A){var q,K,J,w,ad,p,l,D,aa,ab,m,v,C,R,V,Z,g,ae,O,E,r,j,Y,L,Q,M,x,ac,s,H,T,G,o,z,W,S,P,I,X,y,i,U,k,n,B,u,F,h,N;n=e(t);Y=n.children(":not(#rambling-animation)");X=e.extend({},e.fn.ramblingSlider.defaults,A);F=0;aa=0;N={currentSlide:0,currentSlideElement:"",totalSlides:0,randomAnimation:"",running:false,paused:false,stopped:false};m=[];n.data("rambling:vars",N);u=function(){N.stopped=true;return n};B=function(){N.stopped=false;return n};R=function(){n.find("#rambling-animation,.rambling-slice,.rambling-box,.rambling-caption,.rambling-directionNav,.rambling-controlNav").remove();n.removeClass("ramblingSlider");n.removeClass("adaptingSlider");n.removeAttr("style");n.data("rambling:vars",null);n.data("rambling:slider",null);n.unbind("rambling:finished");n.unbind("hover");o();Y.show().children().show();return n};L=function(){var ag,af,ah;af=1<=arguments.length?b.call(arguments,0):[];if(!af.length){return X}L=af[0];ah=af[1];ag=typeof L==="object";if(L==="effect"){if(ah){return V(ah)}else{return V()}}if(ag){return e.extend(X,L)}else{if(ah!=null){if(a.call(d,L)>=0){return e.error("Slider already running. Option '"+L+"' cannot be changed.")}return X[L]=ah}else{return X[L]}}};V=function(){var af;af=1<=arguments.length?b.call(arguments,0):[];if(!af.length){return X.effect}X.effect=af[0];m=["sliceDownRight","sliceDownLeft","sliceDownRandom","sliceUpRight","sliceUpLeft","sliceUpRandom","sliceUpDown","sliceUpDownLeft","sliceUpDownRandom","foldRight","foldLeft","foldRandom","fade","slideInRight","slideInLeft","rolloverRight","rolloverLeft","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"];if(X.effect.contains(",")){m=X.effect.split(",")}return X.effect};j=function(){V(X.effect);I();N.currentSlide=X.startSlide=X.startSlide%N.totalSlides;P(n,N);q();J();K(Y);w();if(X.pauseOnHover){n.hover(Q,h)}return W()};z=function(){if(!X.manualAdvance&&Y.length>1){return F=window.setInterval((function(){return T(n,Y,X,false)}),X.pauseTime)}};I=function(){n.css({position:"relative"});n.addClass("ramblingSlider");N.totalSlides=Y.length;x();if(X.adaptImages){M()}return ac()};x=function(){var af;af=e('<div id="rambling-animation"><img src="" alt="currentSlideElement" class="currentSlideElement"></div>');af.css({width:n.width(),height:n.height(),overflow:"hidden"});return n.prepend(af)};M=function(){return n.addClass("adaptingSlider")};ac=function(){var af;Y.each(function(){var aj,ag,ah,ai;aj=e(this);ai=null;if(aj.is("a")){ai=aj.addClass("rambling-imageLink");aj=aj.find("img:first")}ah=aj.width()||aj.attr("width");ag=aj.height()||aj.attr("height");if(ah>n.width()&&X.useLargerImage){n.width(ah)}if(ag>n.height()&&(X.useLargerImage||!X.adaptImages)){n.height(ag)}if(ai){ai.css({display:"none"})}return aj.css({display:"none"})});af=S(Y);if(af.is("a")){return af.css({display:"block"})}};q=function(){var af;af=e('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:X.captionOpacity});n.append(af);return s(X)};J=function(){var af;if(X.directionNav&&N.totalSlides>1){af=e("<div class='rambling-directionNav'><a class='rambling-prevNav'>"+X.prevText+"</a><a class='rambling-nextNav'>"+X.nextText+"</a></div>");n.append(af);if(X.directionNavHide){af.hide();n.hover((function(){return af.show()}),(function(){return af.hide()}))}n.find("a.rambling-prevNav").live("click",function(){return i("prev")});return n.find("a.rambling-nextNav").live("click",function(){return i("next")})}};K=function(){var ag,af,ah,aj,ai;if(X.controlNav){ah=e('<div class="rambling-controlNav"></div>');n.append(ah);aj=function(ak){var al;if(X.controlNavThumbs){al=Y.eq(ak);if(!al.is("img")){al=al.find("img:first")}if(X.controlNavThumbsFromRel){return ah.append("<a class='rambling-control' rel='"+ak+"'><img src='"+(al.attr("rel"))+"' alt='' /></a>")}else{return ah.append("<a class='rambling-control' rel='"+ak+"'><img src='"+(al.attr("src").replace(X.controlNavThumbsSearch,X.controlNavThumbsReplace))+"' alt='' /></a>")}}else{return ah.append("<a class='rambling-control' rel='"+ak+"'>"+(ak+1)+"'</a>")}};for(af=0,ai=Y.length;0<=ai?af<ai:af>ai;0<=ai?af++:af--){aj(af)}ag=n.find(".rambling-controlNav a");ag.filter(":eq("+N.currentSlide+")").addClass("active");return ag.live("click",function(){if(N.running){return false}if(e(this).hasClass("active")){return false}o();P(n,N);N.currentSlide=e(this).attr("rel")-1;return T(n,Y,X,"control")})}};w=function(){if(X.keyboardNav){return e(window).keypress(function(af){if(af.keyCode===37){i("prev")}if(af.keyCode===39){return i("next")}})}};W=function(){return n.bind("rambling:finished",function(){var af;N.running=false;Y.filter("a").css({display:"none"});af=e(Y[N.currentSlide]);if(af.is("a")){af.css({display:"block"})}if(F===""&&!N.paused){z()}P(n,N);return X.afterChange.call(this)})};E=function(){return m[Math.floor(Math.random()*m.length)]||"fade"};s=function(ag){var af,ah;af=n.find(".rambling-caption");ah=N.currentSlideElement.attr("title");if(ah){if(ah.startsWith("#")){ah=e(ah).html()}if(af.css("display")==="block"){af.find("p").fadeOut(ag.speed,function(){var ai;ai=e(this);ai.html(ah);return ai.fadeIn(ag.speed)})}else{af.find("p").html(ah)}return af.fadeIn(ag.speed)}else{return af.fadeOut(ag.speed)}};S=function(ag){var af;af=e(ag[N.currentSlide]);N.currentSlideElement=af;if(af.is("a")){N.currentSlideElement=af.find("img:first")}return af};o=function(){window.clearInterval(F);return F=""};Q=function(){N.paused=true;return o()};h=function(){N.paused=false;if(F===""){return z()}};i=function(af){if(N.running||N.totalSlides===1){return false}o();if(af==="prev"){N.currentSlide-=2}return T(n,Y,X,af)};C=function(ah,ag,aj){var af,ak,ai;ak=function(am){var al,an;an=Math.round(ah.width()/ag.slices);al=ah.find("#rambling-animation");return al.append(O(an,am,ag.slices,aj))};for(af=0,ai=ag.slices;0<=ai?af<ai:af>ai;0<=ai?af++:af--){ak(af)}return ah.find(".rambling-slice")};v=function(ah,af,ak){var al,ag,aj,am,ai;ag=Math.round(ah.width()/af.boxCols);al=Math.round(ah.height()/af.boxRows);am=function(ao){var ap,aq,an;an=[];for(ap=0,aq=af.boxCols;0<=aq?ap<aq:ap>aq;0<=aq?ap++:ap--){an.push((function(at){var ar;ar=ah.find("#rambling-animation");return ar.append(ae(ag,al,ao,at,af,ak))})(ap))}return an};for(aj=0,ai=af.boxRows;0<=ai?aj<ai:aj>ai;0<=ai?aj++:aj--){am(aj)}return ah.find(".rambling-box")};r=function(ak,af,ai,aj){var ag,al,ah;ag="url("+(aj.currentSlideElement.attr("src"))+") no-repeat -"+((ak+(af*ak))-ak)+"px 0%";ah=ak;if(af===(ai-1)){ag="url("+(aj.currentSlideElement.attr("src"))+") no-repeat -"+((ak+(af*ak))-ak)+"px 0%";ah=n.width()-(ak*af)}al={left:""+(ak*af)+"px",width:""+ah+"px",height:"0px",opacity:"0",background:ag,overflow:"hidden"};return e('<div class="rambling-slice"></div>').css(al)};g=function(aj,al,an,ah,ai,ak){var af,am,ag;af="url("+(ak.currentSlideElement.attr("src"))+") no-repeat -"+((aj+(ah*aj))-aj)+"px -"+((al+(an*al))-al)+"px";ag=aj;if(ah===(ai.boxCols-1)){af="url("+(ak.currentSlideElement.attr("src"))+") no-repeat -"+((aj+(ah*aj))-aj)+"px -"+((al+(an*al))-al)+"px";ag=n.width()-(aj*ah)}am={opacity:0,left:""+(aj*ah)+"px",top:""+(al*an)+"px",width:""+ag+"px",height:""+al+"px",background:af,overflow:"hidden"};return e('<div class="rambling-box"></div>').css(am)};P=function(){var ag,af;af=N.currentSlideElement.clone().addClass("currentSlideElement");ag="alignTop";if(X.alignBottom){ag="alignBottom"}af.addClass(ag);af.css({display:"block"});if(!n.find(".currentSlideElement").replaceWith(af).length){return n.find("#rambling-animation").prepend(af)}};O=function(am,af,aj,al){var ah,ai,ag,ak;ai=r(am,af,aj,al);ai.css({background:"none"});ai.append('<span><img src="'+(al.currentSlideElement.attr("src"))+'" alt=""/></span>');ah=0;ak="auto";if(X.alignBottom){ah="auto";ak=0}ag={display:"block",width:n.width(),left:"-"+((am+(af*am))-am)+"px",bottom:ah,top:ak};ai.find("img").css(ag);return ai};ae=function(ak,am,ao,ah,ai,al){var af,aj,ag,an;aj=g(ak,am,ao,ah,ai,al);af=false;an=""+((am+(ao*am))-am)+"px";if(ai.alignBottom){af=""+(am*(ai.boxRows-(ao+1)))+"px";an=false}ag={display:"block",width:n.width(),left:"-"+((ak+(ah*ak))-ak)+"px",top:"auto",bottom:"auto"};if(an){ag.top="-"+an}if(af){ag.bottom="-"+af}aj.css({background:"none",top:an||"auto",bottom:af||"auto"});aj.append("<span><img src='"+(al.currentSlideElement.attr("src"))+"' alt=''/></span>");aj.find("img").css(ag);return aj};p=function(af){var ag,ai,ah;ah=C(n,X,N);ai=ah.first();ai.css(af.style);ag=ai.find("img");if(af.imageStyle){ag.css(af.imageStyle)}if(af.imageAnimate){ag.animate(af.imageAnimate,X.speed*2)}return ai.animate(af.animate||{width:""+(n.width())+"px"},X.speed*2,"",function(){if(af.afterChange){af.afterChange.apply(ai)}return n.trigger("rambling:finished")})};l=function(af,ah){var ag;ag=C(n,X,N);aa=0;if(ah){ag=ah.apply(ag)}return ag.each(af)};ad=function(af,ah){var ag;ag=v(n,X,N);aa=0;if(ah){ag=ah.apply(ag)}return af.apply(ag)};y=function(af){return l(function(ag){var ah;ah=e(this);ah.css({top:"0px"});if(ag===X.slices-1){window.setTimeout(function(){return ah.animate({height:""+(n.height())+"px",opacity:"1.0"},X.speed,"",function(){return n.trigger("rambling:finished")})},100+aa)}else{window.setTimeout((function(){return ah.animate({height:""+(n.height())+"px",opacity:"1.0"},X.speed)}),100+aa)}return aa+=50},af)};k=function(af){return l(function(ag){var ah;ah=e(this);ah.css({bottom:"0px"});if(ag===X.slices-1){window.setTimeout((function(){return ah.animate({height:""+(n.height())+"px",opacity:"1.0"},X.speed,"",function(){return n.trigger("rambling:finished")})}),100+aa)}else{window.setTimeout((function(){return ah.animate({height:""+(n.height())+"px",opacity:"1.0"},X.speed)}),100+aa)}return aa+=50},af)};U=function(af){return l(function(ag){var ah;ah=e(this);ah.css((ag%2?{bottom:"0px"}:{top:"0px"}));if(ag===X.slices-1){window.setTimeout((function(){return ah.animate({height:""+(n.height())+"px",opacity:"1.0"},X.speed,"",function(){return n.trigger("rambling:finished")})}),100+aa)}else{window.setTimeout((function(){return ah.animate({height:""+(n.height())+"px",opacity:"1.0"},X.speed)}),100+aa)}return aa+=50},af)};Z=function(af){return l(function(ag){var ai,ah;ah=e(this);ai=ah.width();ah.css({top:"0px",height:"100%",width:"0px"});if(ag===X.slices-1){window.setTimeout((function(){return ah.animate({width:ai,opacity:"1.0"},X.speed,"",function(){return n.trigger("rambling:finished")})}),100+aa)}else{window.setTimeout((function(){return ah.animate({width:ai,opacity:"1.0"},X.speed)}),100+aa)}return aa+=50},af)};G=function(){return ad(function(){var af;af=this.length;return this.each(function(ag){var ah;ah=e(this);if(ag===af-1){window.setTimeout((function(){return ah.animate({opacity:"1"},X.speed,"",function(){return n.trigger("rambling:finished")})}),100+aa)}else{window.setTimeout((function(){return ah.animate({opacity:"1"},X.speed)}),100+aa)}return aa+=20})},e.fn.shuffle)};H=function(ag,af){return ad(function(){var aj,al,ai,am,ak,ah;aj=this;am=X.boxCols*X.boxRows;ai=0;ah=[];for(al=0,ak=X.boxCols*2;0<=ak?al<ak:al>ak;0<=ak?al++:al--){ah.push((function(aq){var ao,ap,ar,an;ao=aq;an=[];for(ap=0,ar=X.boxRows;0<=ar?ap<ar:ap>ar;0<=ar?ap++:ap--){an.push((function(ax){var aw,au,av,az,ay,at;if(ao>=0&&ao<X.boxCols){az=ax;au=ao;ay=aa;aw=e(aj[az][au]);at=aw.width();av=aw.height();if(af){aw.css({width:0,height:0})}if(ai===am-1){window.setTimeout((function(){return aw.animate({opacity:"1",width:at,height:av},X.speed/1.3,"",function(){return n.trigger("rambling:finished")})}),100+aa)}else{window.setTimeout((function(){return aw.animate({opacity:"1",width:at,height:av},X.speed/1.3)}),100+aa)}ai++;aa+=20}return ao--})(ap))}return an})(al))}return ah},ag)};D={fade:{style:{height:"100%",width:""+(n.width())+"px",position:"absolute",top:0,left:0},animate:{opacity:"1"}},rolloverRight:{style:{height:"100%",width:"0px",opacity:"1"}},rolloverLeft:{imageAnimate:{left:"0px"},animate:{width:""+(n.width())},style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},imageStyle:{left:""+(-n.width())+"px"}},slideInRight:{imageAnimate:{left:"0px"},animate:{width:""+(n.width())},style:{height:"100%",width:"0px",opacity:"1"},imageStyle:{left:""+(-n.width())+"px"}},slideInLeft:{style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},afterChange:function(){return this.css({left:"0px",right:""})}}};ab={sliceDown:y,sliceDownRight:y,sliceDownLeft:function(){return y(e.fn.reverse)},sliceDownRandom:function(){return y(e.fn.shuffle)},sliceUp:k,sliceUpRight:k,sliceUpLeft:function(){return k(e.fn.reverse)},sliceUpRandom:function(){return k(e.fn.shuffle)},sliceUpDown:U,sliceUpDownRight:U,sliceUpDownLeft:function(){return U(e.fn.reverse)},sliceUpDownRandom:function(){return U(e.fn.shuffle)},fold:Z,foldRight:Z,foldLeft:function(){return Z(e.fn.reverse)},foldRandom:function(){return Z(e.fn.shuffle)},fade:function(){return p(D.fade)},slideIn:function(){return p(D.slideInRight)},slideInRight:function(){return p(D.slideInRight)},slideInLeft:function(){return p(D.slideInLeft)},rollover:function(){return p(D.rolloverRight)},rolloverRight:function(){return p(D.rolloverRight)},rolloverLeft:function(){return p(D.rolloverLeft)},boxRandom:G,boxRain:function(){return H(function(){return e(this).as2dArray(X.boxCols)})},boxRainReverse:function(){return H(function(){return e(this).reverse().as2dArray(X.boxCols)})},boxRainGrow:function(){return H((function(){return e(this).as2dArray(X.boxCols)}),true)},boxRainGrowReverse:function(){return H((function(){return e(this).reverse().as2dArray(X.boxCols)}),true)}};T=function(aj,ah,ai,af){var ag;if(N.currentSlide===N.totalSlides-1){ai.lastSlide.call(this)}if(N.stopped&&!af){return false}ai.beforeChange.call(this);N.currentSlide++;if(N.currentSlide===N.totalSlides){N.currentSlide=0;ai.slideshowEnd.call(this)}if(N.currentSlide<0){N.currentSlide=N.totalSlides-1}S(ah);if(ai.controlNav){aj.find(".rambling-controlNav a").removeClass("active").filter(":eq("+N.currentSlide+")").addClass("active")}s(ai);aj.find(".rambling-slice,.rambling-box").remove();if(ai.effect==="random"||ai.effect.contains(",")){N.randomAnimation=E()}else{N.randomAnimation=null}N.running=true;ag=N.randomAnimation||ai.effect;return ab[ag].apply(this)};X.afterLoad.call(this);this.stop=u;this.start=B;this.effect=V;this.option=L;this.destroy=R;this.initialize=j;this.run=z;return this}})(jQuery);String.prototype.contains=function(c){return this.match(""+c)};String.prototype.decapitalize=function(){var d,c;d=this.slice(0,1);c=this.slice(1);return""+(d.toLowerCase())+c};String.prototype.startsWith=function(c){return this.match("^"+c)}}).call(this);