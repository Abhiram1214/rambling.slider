(function(){Array.prototype.shuffle=function(){var c,b,d,a;d=this.length;for(c=d;d<=1?c<=1:c>=1;d<=1?c++:c--){this[c]=this[c];b=parseInt(Math.random()*c);a=this[--c];this[c]=this[b];this[b]=a}return this};Array.prototype.contains=function(c){var a,b;b=this.length;for(a=0;0<=b?a<b:a>b;0<=b?a++:a--){if(c===this[a]){return true}}return false};(function(a){a.fn.reverse=[].reverse;a.fn.shuffle=[].shuffle;return a.fn.as2dArray=function(b){var c,d,e;e=0;d=0;c=a("");c[e]=a("");this.each(function(){c[e][d]=a(this);d++;if(d===b){e++;d=0;return c[e]=a("")}});return c}})(jQuery);(function(b){var c,a;a=["stop","start"];b.fn.ramblingSlider=function(d){return this.each(function(f,h){var e,g;e=b(this);if((g=e.data("rambling:slider"))){if(a.contains(d)){g[d]()}return g}g=new c(this,d);e.data("rambling:slider",g);g.initialize();return g.run()})};b.fn.ramblingSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};return c=function(q,w){var n,G,F,t,W,m,i,z,T,U,j,s,y,S,d,X,J,A,o,g,R,K,H,V,p,D,M,C,l,v,P,N,L,E,Q,u,f,O,h,k,x,r,B,e,I;k=b(q);R=k.children(":not(#rambling-animation)");Q=b.extend({},b.fn.ramblingSlider.defaults,w);B=0;T=0;I={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false};j=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","foldLeft","fade","slideInRight","slideInLeft","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"];if(Q.effect.contains(",")){j=Q.effect.split(",")}r=function(){if(!I.stop){return I.stop=true}};x=function(){if(I.stop){return I.stop=false}};g=function(){E();I.currentSlide=Q.startSlide=Q.startSlide%I.totalSlides;L(k,I);n();F();G(R);t();if(Q.pauseOnHover){k.hover(K,e)}return P()};v=function(){if(!Q.manualAdvance&&R.length>1){return B=setInterval((function(){return M(k,R,Q,false)}),Q.pauseTime)}};E=function(){k.css({position:"relative"});k.addClass("ramblingSlider");I.totalSlides=R.length;if(Q.adaptImages){H()}return V()};H=function(){var Y;Y=b('<div id="rambling-animation"></div>');Y.css({width:k.width(),height:k.height(),overflow:"hidden"});k.prepend(Y);return k.addClass("adaptingSlider")};V=function(){var Y;R.each(function(){var ac,Z,aa,ab;ac=b(this);ab=null;if(!ac.is("img")){if(ac.is("a")){ab=ac.addClass("rambling-imageLink")}ac=ac.find("img:first")}aa=ac.width()||ac.attr("width");Z=ac.height()||ac.attr("height");if(aa>k.width()&&Q.useLargerImage){k.width(aa)}if(Z>k.height()&&(Q.useLargerImage||!Q.adaptImages)){k.height(Z)}if(ab){ab.css({display:"none"})}return ac.css({display:"none"})});Y=N(R);if(Y.is("a")){return Y.css({display:"block"})}};n=function(){var Y;Y=b('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:Q.captionOpacity});k.append(Y);return p(Q)};F=function(){var Y;if(Q.directionNav){Y=b("<div class='rambling-directionNav'><a class='rambling-prevNav'>"+Q.prevText+"</a><a class='rambling-nextNav'>"+Q.nextText+"</a></div>");k.append(Y);if(Q.directionNavHide){Y.hide();k.hover((function(){return Y.show()}),(function(){return Y.hide()}))}k.find("a.rambling-prevNav").live("click",function(){return f("prev")});return k.find("a.rambling-nextNav").live("click",function(){return f("next")})}};G=function(){var Z,Y,aa,ac,ab;if(Q.controlNav){aa=b('<div class="rambling-controlNav"></div>');k.append(aa);ac=function(ad){var ae;if(Q.controlNavThumbs){ae=R.eq(ad);if(!ae.is("img")){ae=ae.find("img:first")}if(Q.controlNavThumbsFromRel){return aa.append("<a class='rambling-control' rel='"+ad+"'><img src='"+(ae.attr("rel"))+"' alt='' /></a>")}else{return aa.append("<a class='rambling-control' rel='"+ad+"'><img src='"+(ae.attr("src").replace(Q.controlNavThumbsSearch,Q.controlNavThumbsReplace))+"' alt='' /></a>")}}else{return aa.append("<a class='rambling-control' rel='"+ad+"'>"+(ad+1)+"'</a>")}};for(Y=0,ab=R.length;0<=ab?Y<ab:Y>ab;0<=ab?Y++:Y--){ac(Y)}Z=k.find(".rambling-controlNav a");Z.filter(":eq("+I.currentSlide+")").addClass("active");return Z.live("click",function(){if(I.running){return false}if(b(this).hasClass("active")){return false}l();L(k,I);I.currentSlide=b(this).attr("rel")-1;return M(k,R,Q,"control")})}};t=function(){if(Q.keyboardNav){return b(window).keypress(function(Y){if(Y.keyCode===37){f("prev")}if(Y.keyCode===39){return f("next")}})}};P=function(){return k.bind("rambling:finished",function(){var Y;I.running=false;R.filter("a").css({display:"none"});Y=b(R[I.currentSlide]);if(Y.is("a")){Y.css({display:"block"})}if(B===""&&!I.paused){v()}L(k,I);return Q.afterChange.call(this)})};A=function(){return j[Math.floor(Math.random()*(j.length+1))]||"fade"};p=function(Z){var Y,aa;Y=k.find(".rambling-caption");aa=I.currentImage.attr("title");if(aa){if(aa.substr(0,1)==="#"){aa=b(aa).html()}if(Y.css("display")==="block"){Y.find("p").fadeOut(Z.animSpeed,function(){b(this).html(aa);return b(this).fadeIn(Z.animSpeed)})}else{Y.find("p").html(aa)}return Y.fadeIn(Z.animSpeed)}else{return Y.fadeOut(Z.animSpeed)}};N=function(Z){var Y;Y=b(Z[I.currentSlide]);I.currentImage=Y;if(!Y.is("img")){I.currentImage=Y.find("img:first")}return Y};l=function(){clearInterval(B);return B=""};K=function(){I.paused=true;return l()};e=function(){I.paused=false;if(B===""){return v()}};f=function(Y){if(I.running){return false}l();if(Y==="prev"){I.currentSlide-=2}return M(k,R,Q,Y)};y=function(aa,Z,ac){var Y,ad,ab;ad=function(af){var ae,ag;ag=Math.round(aa.width()/Z.slices);ae=aa;if(Z.adaptImages){ae=aa.find("#rambling-animation")}return ae.append(J(ag,af,Z.slices,ac))};for(Y=0,ab=Z.slices;0<=ab?Y<ab:Y>ab;0<=ab?Y++:Y--){ad(Y)}return aa.find(".rambling-slice")};s=function(aa,Y,ad){var ae,Z,ac,af,ab;Z=Math.round(aa.width()/Y.boxCols);ae=Math.round(aa.height()/Y.boxRows);af=function(ah){var ai,aj,ag;ag=[];for(ai=0,aj=Y.boxCols;0<=aj?ai<aj:ai>aj;0<=aj?ai++:ai--){ag.push((function(al){var ak;ak=aa;if(Y.adaptImages){ak=aa.find("#rambling-animation")}return ak.append(X(Z,ae,ah,al,Y,ad))})(ai))}return ag};for(ac=0,ab=Y.boxRows;0<=ab?ac<ab:ac>ab;0<=ab?ac++:ac--){af(ac)}return aa.find(".rambling-box")};L=function(Y,Z){return Y.css({background:"url("+(Z.currentImage.attr("src"))+") no-repeat"})};J=function(ad,Y,ab,ac){var Z,ae,aa;Z="url("+(ac.currentImage.attr("src"))+") no-repeat -"+((ad+(Y*ad))-ad)+"px 0%";aa=ad;if(Y===(ab-1)){Z="url("+(ac.currentImage.attr("src"))+") no-repeat -"+((ad+(Y*ad))-ad)+"px 0%";aa=k.width()-(ad*Y)}ae={left:""+(ad*Y)+"px",width:""+aa+"px",height:"0px",opacity:"0",background:Z,overflow:"hidden"};return b('<div class="rambling-slice"></div>').css(ae)};X=function(ac,ae,ag,aa,ab,ad){var Y,af,Z;Y="url("+(ad.currentImage.attr("src"))+") no-repeat -"+((ac+(aa*ac))-ac)+"px -"+((ae+(ag*ae))-ae)+"px";Z=ac;if(aa===(ab.boxCols-1)){Y="url("+(ad.currentImage.attr("src"))+") no-repeat -"+((ac+(aa*ac))-ac)+"px -"+((ae+(ag*ae))-ae)+"px";Z=k.width()-(ac*aa)}af={opacity:0,left:""+(ac*aa)+"px",top:""+(ae*ag)+"px",width:""+Z+"px",height:""+ae+"px",background:Y,overflow:"hidden"};return b('<div class="rambling-box"></div>').css(af)};if(Q.adaptImages){o=J;d=X;L=function(){var aa,Y,Z;Z=I.currentImage;Y=k.find(".currentImage");if(!Y.length){aa="alignTop";if(Q.alignBottom){aa="alignBottom"}Y=b('<img src="" alt="currentImage" class="currentImage"/>');Y.addClass(aa);Y.css({display:"block"});k.find("#rambling-animation").prepend(Y)}return Y.attr({src:Z.attr("src"),alt:Z.attr("alt")})};J=function(af,Y,ac,ae){var aa,ab,Z,ad;ab=o(af,Y,ac,ae);ab.css({background:"none"});ab.append('<span><img src="'+(ae.currentImage.attr("src"))+'" alt=""/></span>');aa=0;ad="auto";if(Q.alignBottom){aa="auto";ad=0}Z={display:"block",width:k.width(),left:"-"+((af+(Y*af))-af)+"px",bottom:aa,top:ad};ab.find("img").css(Z);return ab};X=function(ad,af,ah,aa,ab,ae){var Y,ac,Z,ag;ac=d(ad,af,ah,aa,ab,ae);Y=false;ag=""+((af+(ah*af))-af)+"px";if(ab.alignBottom){Y=""+(af*(ab.boxRows-(ah+1)))+"px";ag=false}Z={display:"block",width:k.width(),left:"-"+((ad+(aa*ad))-ad)+"px",top:"auto",bottom:"auto"};if(ag){Z.top="-"+ag}if(Y){Z.bottom="-"+Y}ac.css({background:"none",top:ag||"auto",bottom:Y||"auto"});ac.append("<span><img src='"+(ae.currentImage.attr("src"))+"' alt=''/></span>");ac.find("img").css(Z);return ac}}m=function(Y){var aa,Z;Z=y(k,Q,I);aa=Z.filter(":first");aa.css(Y.style);return aa.animate(Y.animate||{width:""+(k.width())+"px"},Q.animSpeed*2,"",function(){if(Y.afterChange){Y.afterChange.apply(aa)}return k.trigger("rambling:finished")})};i=function(Y,aa){var Z;Z=y(k,Q,I);T=0;if(aa){Z=aa.apply(Z)}return Z.each(Y)};W=function(Y,aa){var Z;Z=s(k,Q,I);T=0;if(aa){Z=aa.apply(Z)}return Y.apply(Z)};u=function(Y){return i(function(Z){var aa;aa=b(this);aa.css({top:"0px"});if(Z===Q.slices-1){setTimeout(function(){return aa.animate({height:"100%",opacity:"1.0"},Q.animSpeed,"",function(){return k.trigger("rambling:finished")})},100+T)}else{setTimeout((function(){return aa.animate({height:"100%",opacity:"1.0"},Q.animSpeed)}),100+T)}return T+=50},Y)};h=function(Y){return i(function(Z){var aa;aa=b(this);aa.css({bottom:"0px"});if(Z===Q.slices-1){setTimeout((function(){return aa.animate({height:"100%",opacity:"1.0"},Q.animSpeed,"",function(){return k.trigger("rambling:finished")})}),100+T)}else{setTimeout((function(){return aa.animate({height:"100%",opacity:"1.0"},Q.animSpeed)}),100+T)}return T+=50},Y)};O=function(Y){return i(function(Z){var aa;aa=b(this);aa.css((Z%2?{bottom:"0px"}:{top:"0px"}));if(Z===Q.slices-1){setTimeout((function(){return aa.animate({height:"100%",opacity:"1.0"},Q.animSpeed,"",function(){return k.trigger("rambling:finished")})}),100+T)}else{setTimeout((function(){return aa.animate({height:"100%",opacity:"1.0"},Q.animSpeed)}),100+T)}return T+=50},Y)};S=function(Y){return i(function(Z){var ab,aa;aa=b(this);ab=aa.width();aa.css({top:"0px",height:"100%",width:"0px"});if(Z===Q.slices-1){setTimeout((function(){return aa.animate({width:ab,opacity:"1.0"},Q.animSpeed,"",function(){return k.trigger("rambling:finished")})}),100+T)}else{setTimeout((function(){return aa.animate({width:ab,opacity:"1.0"},Q.animSpeed)}),100+T)}return T+=50},Y)};C=function(){return W(function(){var Y;Y=this.length;return this.each(function(Z){var aa;aa=b(this);if(Z===Y-1){setTimeout((function(){return aa.animate({opacity:"1"},Q.animSpeed,"",function(){return k.trigger("rambling:finished")})}),100+T)}else{setTimeout((function(){return aa.animate({opacity:"1"},Q.animSpeed)}),100+T)}return T+=20})},b.fn.shuffle)};D=function(Z,Y){return W(function(){var ac,ae,ab,af,ad,aa;ac=this;af=Q.boxCols*Q.boxRows;ab=0;aa=[];for(ae=0,ad=Q.boxCols*2;0<=ad?ae<ad:ae>ad;0<=ad?ae++:ae--){aa.push((function(aj){var ah,ai,ak,ag;ah=aj;ag=[];for(ai=0,ak=Q.boxRows;0<=ak?ai<ak:ai>ak;0<=ak?ai++:ai--){ag.push((function(ap){var ao,am,an,ar,aq,al;if(ah>=0&&ah<Q.boxCols){ar=ap;am=ah;aq=T;ao=b(ac[ar][am]);al=ao.width();an=ao.height();if(Y){ao.css({width:0,height:0})}if(ab===af-1){setTimeout((function(){return ao.animate({opacity:"1",width:al,height:an},Q.animSpeed/1.3,"",function(){return k.trigger("rambling:finished")})}),100+T)}else{setTimeout((function(){return ao.animate({opacity:"1",width:al,height:an},Q.animSpeed/1.3)}),100+T)}ab++;T+=20}return ah--})(ai))}return ag})(ae))}return aa},Z)};z={fade:{style:{height:"100%",width:""+(k.width())+"px",position:"absolute",top:0,left:0},animate:{opacity:"1"}},slideInRight:{style:{height:"100%",width:"0px",opacity:"1"}},slideInLeft:{style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},afterChange:function(){return this.css({left:"0px",right:""})}}};U={sliceDown:u,sliceDownRight:u,sliceDownLeft:function(){return u(b.fn.reverse)},sliceUp:h,sliceUpRight:h,sliceUpLeft:function(){return h(b.fn.reverse)},sliceUpDown:O,sliceUpDownRight:O,sliceUpDownLeft:function(){return O(b.fn.reverse)},fold:S,foldLeft:function(){return S(b.fn.reverse)},fade:function(){return m(z.fade)},slideIn:function(){return m(z.slideInRight)},slideInRight:function(){return m(z.slideInRight)},slideInLeft:function(){return m(z.slideInLeft)},boxRandom:C,boxRain:function(){return D(function(){return b(this).as2dArray(Q.boxCols)})},boxRainReverse:function(){return D(function(){return b(this).reverse().as2dArray(Q.boxCols)})},boxRainGrow:function(){return D((function(){return b(this).as2dArray(Q.boxCols)}),true)},boxRainGrowReverse:function(){return D((function(){return b(this).reverse().as2dArray(Q.boxCols)}),true)}};M=function(ac,aa,ab,Z){var Y;if(I.currentSlide===I.totalSlides-1){ab.lastSlide.call(this)}if(I.stop&&!Z){return false}ab.beforeChange.call(this);I.currentSlide++;if(I.currentSlide===I.totalSlides){I.currentSlide=0;ab.slideshowEnd.call(this)}if(I.currentSlide<0){I.currentSlide=I.totalSlides-1}N(aa);if(ab.controlNav){ac.find(".rambling-controlNav a").removeClass("active").filter(":eq("+I.currentSlide+")").addClass("active")}p(ab);ac.find(".rambling-slice,.rambling-box").remove();if(ab.effect==="random"||ab.effect.contains(",")){I.randAnim=A()}I.running=true;Y=I.randAnim||ab.effect;return U[Y].apply(this)};Q.afterLoad.call(this);this.stop=r;this.start=x;this.initialize=g;this.run=v;return this}})(jQuery);String.prototype.contains=function(a){return this.indexOf(a)!==-1};String.prototype.decapitalize=function(){var b,a;b=this.slice(0,1);a=this.slice(1);return""+(b.toLowerCase())+a}}).call(this);