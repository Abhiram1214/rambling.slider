(function(){(function(a){var b;b=function(d,e){var j,w,r,u,g,o,t,p,v,m,c,h,x,f,q,l,s,n,y,k;x=a.extend({},a.fn.ramblingSlider.defaults,e);n={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false};o={};g={setSliderBackground:function(i,z){return i.css({background:"url("+(z.currentImage.attr("src"))+") no-repeat"})},getRamblingSlice:function(D,i,B,C){var z,E,A;z="url("+(C.currentImage.attr("src"))+") no-repeat -"+((D+(i*D))-D)+"px 0%";A=D;if(i===(B-1)){z="url("+(C.currentImage.attr("src"))+") no-repeat -"+((D+(i*D))-D)+"px 0%";A=q.width()-(D*i)}E={left:(D*i)+"px",width:A+"px",height:"0px",opacity:"0",background:z,overflow:"hidden"};return a('<div class="rambling-slice"></div>').css(E)},getRamblingBox:function(C,E,G,A,B,D){var i,F,z;i="url("+(D.currentImage.attr("src"))+") no-repeat -"+((C+(A*C))-C)+"px -"+((E+(G*E))-E)+"px";z=C;if(A===(B.boxCols-1)){i="url("+(D.currentImage.attr("src"))+") no-repeat -"+((C+(A*C))-C)+"px -"+((E+(G*E))-E)+"px";z=q.width()-(C*A)}F={opacity:0,left:(C*A)+"px",top:(E*G)+"px",width:z+"px",height:E+"px",background:i,overflow:"hidden"};return a('<div class="rambling-box"></div>').css(F)}};j={setSliderBackground:function(){var A,i,z;z=n.currentImage;i=q.find(".currentImage");if(!i.length){A="alignTop";if(x.alignBottom){A="alignBottom"}i=a('<img src="" alt="currentImage" class="currentImage"/>');i.addClass(A);i.css({display:"block"});q.prepend(i)}return i.attr({src:z.attr("src"),alt:z.attr("alt")})},getRamblingSlice:function(F,i,C,E){var A,B,z,D;B=g.getRamblingSlice(F,i,C,E);B.css({background:"none"});B.append('<span><img src="'+(E.currentImage.attr("src"))+'" alt=""/></span>');A=0;D="auto";if(x.alignBottom){A="auto";D=0}z={display:"block",width:q.width(),left:"-"+((F+(i*F))-F)+"px",bottom:A,top:D};B.find("img").css(z);return B},getRamblingBox:function(D,F,H,A,B,E){var i,C,z,G;C=g.getRamblingBox(D,F,H,A,B,E);i=false;G=""+((F+(H*F))-F)+"px";if(B.alignBottom){i=""+(F*(B.boxRows-(H+1)))+"px";G=false}z={display:"block",width:q.width(),left:"-"+((D+(A*D))-D)+"px",top:"auto",bottom:"auto"};if(G){z.top="-"+G}if(i){z.bottom="-"+i}C.css({background:"none",top:G||"auto",bottom:i||"auto"});C.append('<span><img src="'+E.currentImage.attr("src")+'" alt=""/></span>');C.find("img").css(z);return C}};a.extend(o,g);if(x.adaptImages){a.extend(o,j)}q=a(d);q.data("rambling:vars",n);q.css({position:"relative"});q.addClass("ramblingSlider");p=q.children();p.each(function(){var B,i,z,A;B=a(this);A="";if(!B.is("img")){if(B.is("a")){B.addClass("rambling-imageLink");A=B}B=B.find("img:first")}z=B.width();if(z===0){z=B.attr("width")}i=B.height();if(i===0){i=B.attr("height")}if(z>q.width()&&x.useLargerImage){q.width(z)}if(i>q.height()&&(x.useLargerImage||!x.adaptImages)){q.height(i)}if(A!==""){A.css({display:"none"})}B.css({display:"none"});return n.totalSlides++});if(x.startSlide>0){if(x.startSlide>=n.totalSlides){x.startSlide=n.totalSlides-1}n.currentSlide=x.startSlide}if(a(p[n.currentSlide]).is("img")){n.currentImage=a(p[n.currentSlide])}else{n.currentImage=a(p[n.currentSlide]).find("img:first")}if(a(p[n.currentSlide]).is("a")){a(p[n.currentSlide]).css("display","block")}o.setSliderBackground(q,n);q.append(a('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:x.captionOpacity}));m=function(z){var i,A;i=a(".rambling-caption",q);A=n.currentImage.attr("title");if((A!=null)&&A!==""){if(A.substr(0,1)==="#"){A=a(A).html()}if(i.css("display")==="block"){i.find("p").fadeOut(z.animSpeed,function(){a(this).html(A);return a(this).fadeIn(z.animSpeed)})}else{i.find("p").html(A)}return i.fadeIn(z.animSpeed)}else{return i.fadeOut(z.animSpeed)}};m(x);l=0;if(!x.manualAdvance&&p.length>1){l=setInterval((function(){return h(q,p,x,false)}),x.pauseTime)}w=function(){clearInterval(l);return l=""};if(x.directionNav){q.append('<div class="rambling-directionNav"><a class="rambling-prevNav">'+x.prevText+'</a><a class="rambling-nextNav">'+x.nextText+"</a></div>");if(x.directionNavHide){a(".rambling-directionNav",q).hide();q.hover((function(){return a(".rambling-directionNav",q).show()}),(function(){return a(".rambling-directionNav",q).hide()}))}v=function(A,i,z,B){if(n.running){return false}w();n.currentSlide-=2;return h(A,i,z,B)};a("a.rambling-prevNav",q).live("click",function(){return v("prev")});a("a.rambling-nextNav",q).live("click",function(){return v("next")})}if(x.controlNav){c=a('<div class="rambling-controlNav"></div>');q.append(c);y=function(z){var A;if(x.controlNavThumbs){A=p.eq(z);if(!A.is("img")){A=A.find("img:first")}if(x.controlNavThumbsFromRel){return c.append('<a class="rambling-control" rel="'+z+'"><img src="'+A.attr("rel")+'" alt="" /></a>')}else{return c.append('<a class="rambling-control" rel="'+z+'"><img src="'+A.attr("src").replace(x.controlNavThumbsSearch,x.controlNavThumbsReplace)+'" alt="" /></a>')}}else{return c.append('<a class="rambling-control" rel="'+z+'">'+(z+1)+"</a>")}};for(t=0,k=p.length-1;0<=k?t<=k:t>=k;0<=k?t++:t--){y(t)}a(".rambling-controlNav a:eq("+n.currentSlide+")",q).addClass("active");a(".rambling-controlNav a",q).live("click",function(){if(n.running){return false}if(a(this).hasClass("active")){return false}w();o.setSliderBackground(q,n);n.currentSlide=a(this).attr("rel")-1;return h(q,p,x,"control")})}if(x.keyboardNav){a(window).keypress(function(i){if(i.keyCode==="37"){if(n.running){return false}w();n.currentSlide-=2;h(q,p,x,"prev")}if(i.keyCode==="39"){if(n.running){return false}w();return h(q,p,x,"next")}})}if(x.pauseOnHover){q.hover(function(){n.paused=true;return w()},function(){n.paused=false;if(l===""&&!x.manualAdvance){return l=setInterval((function(){return h(q,p,x,false)}),x.pauseTime)}})}q.bind("rambling:animFinished",function(){n.running=false;a(p).each(function(){if(a(this).is("a")){return a(this).css({display:"none"})}});if(a(p[n.currentSlide]).is("a")){a(p[n.currentSlide]).css({display:"block"})}if(l===""&&!n.paused&&!x.manualAdvance){l=setInterval((function(){return h(q,p,x,false)}),x.pauseTime)}o.setSliderBackground(q,n);return x.afterChange.call(this)});u=function(C,B,D){var A,E,z;z=[];for(A=0,E=B.slices-1;0<=E?A<=E:A>=E;0<=E?A++:A--){z.push((function(F){var G;G=Math.round(C.width()/B.slices);return C.append(o.getRamblingSlice(G,F,B.slices,D))})(A))}return z};r=function(B,z,D){var E,A,C,F,i;A=Math.round(B.width()/z.boxCols);E=Math.round(B.height()/z.boxRows);i=[];for(C=0,F=z.boxRows-1;0<=F?C<=F:C>=F;0<=F?C++:C--){i.push((function(H){var I,J,G;G=[];for(I=0,J=z.boxCols-1;0<=J?I<=J:I>=J;0<=J?I++:I--){G.push((function(K){return B.append(o.getRamblingBox(A,E,H,K,z,D))})(I))}return G})(C))}return i};h=function(L,K,N,I){var P,H,B,J,F,E,D,C,z,O,M,G,A,i;n=L.data("rambling:vars");if(n&&n.currentSlide===n.totalSlides-1){N.lastSlide.call(this)}if((!n||n.stop)&&!I){return false}N.beforeChange.call(this);n.currentSlide++;if(n.currentSlide===n.totalSlides){n.currentSlide=0;N.slideshowEnd.call(this)}if(n.currentSlide<0){n.currentSlide=n.totalSlides-1}if(a(K[n.currentSlide]).is("img")){n.currentImage=a(K[n.currentSlide])}else{n.currentImage=a(K[n.currentSlide]).find("img:first")}if(N.controlNav){a(".rambling-controlNav a",L).removeClass("active");a(".rambling-controlNav a:eq("+n.currentSlide+")",L).addClass("active")}m(N);a(".rambling-slice",L).remove();a(".rambling-box",L).remove();if(N.effect==="random"){P=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","fade","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"];n.randAnim=P[Math.floor(Math.random()*(P.length+1))];if(!n.randAnim){n.randAnim="fade"}}if(N.effect.indexOf(",")!==-1){P=N.effect.split(",");n.randAnim=P[Math.floor(Math.random()*P.length)];if(n.randAnim){n.randAnim="fade"}}n.running=true;if(N.effect==="sliceDown"||N.effect==="sliceDownRight"||n.randAnim==="sliceDownRight"||N.effect==="sliceDownLeft"||n.randAnim==="sliceDownLeft"){u(L,N,n);O=0;t=0;z=a(".rambling-slice",L);if(N.effect==="sliceDownLeft"||n.randAnim==="sliceDownLeft"){z=a(".rambling-slice",L)._reverse()}return z.each(function(){var Q;Q=a(this);Q.css({top:"0px"});if(t===N.slices-1){setTimeout(function(){return Q.animate({height:"100%",opacity:"1.0"},N.animSpeed,"",function(){return L.trigger("rambling:animFinished")})},100+O)}else{setTimeout((function(){return Q.animate({height:"100%",opacity:"1.0"},N.animSpeed)}),100+O)}O+=50;return t++})}else{if(N.effect==="sliceUp"||N.effect==="sliceUpRight"||n.randAnim==="sliceUpRight"||N.effect==="sliceUpLeft"||n.randAnim==="sliceUpLeft"){u(L,N,n);O=0;t=0;z=a(".rambling-slice",L);if(N.effect==="sliceUpLeft"||n.randAnim==="sliceUpLeft"){z=a(".rambling-slice",L)._reverse()}return z.each(function(){var Q;Q=a(this);Q.css({bottom:"0px"});if(t===N.slices-1){setTimeout((function(){return Q.animate({height:"100%",opacity:"1.0"},N.animSpeed,"",function(){return L.trigger("rambling:animFinished")})}),100+O)}else{setTimeout((function(){return Q.animate({height:"100%",opacity:"1.0"},N.animSpeed)}),100+O)}O+=50;return t++})}else{if(N.effect==="sliceUpDown"||N.effect==="sliceUpDownRight"||n.randAnim==="sliceUpDown"||N.effect==="sliceUpDownLeft"||n.randAnim==="sliceUpDownLeft"){u(L,N,n);O=0;t=0;G=0;z=a(".rambling-slice",L);if(N.effect==="sliceUpDownLeft"||n.randAnim==="sliceUpDownLeft"){z=a(".rambling-slice",L)._reverse()}return z.each(function(){var Q;Q=a(this);if(t===0){Q.css("top","0px");t++}else{Q.css("bottom","0px");t=0}if(G===N.slices-1){setTimeout((function(){return Q.animate({height:"100%",opacity:"1.0"},N.animSpeed,"",function(){return L.trigger("rambling:animFinished")})}),100+O)}else{setTimeout((function(){return Q.animate({height:"100%",opacity:"1.0"},N.animSpeed)}),100+O)}O+=50;return G++})}else{if(N.effect==="fold"||n.randAnim==="fold"){u(L,N,n);O=0;t=0;return a(".rambling-slice",L).each(function(){var R,Q;Q=a(this);R=Q.width();Q.css({top:"0px",height:"100%",width:"0px"});if(t===N.slices-1){setTimeout((function(){return Q.animate({width:R,opacity:"1.0"},N.animSpeed,"",function(){return L.trigger("rambling:animFinished")})}),100+O)}else{setTimeout((function(){return Q.animate({width:R,opacity:"1.0"},N.animSpeed)}),100+O)}O+=50;return t++})}else{if(N.effect==="fade"||n.randAnim==="fade"){u(L,N,n);E=a(".rambling-slice:first",L);C={height:"100%",width:L.width()+"px",position:"absolute",top:0,left:0};E.css(C);return E.animate({opacity:"1.0"},N.animSpeed*2,"",function(){return L.trigger("rambling:animFinished")})}else{if(N.effect==="slideInRight"||n.randAnim==="slideInRight"){u(L,N,n);E=a(".rambling-slice:first",L);C={height:"100%",width:"0px",opacity:"1"};E.css(C);return E.animate({width:L.width()+"px"},N.animSpeed*2,"",function(){return L.trigger("rambling:animFinished")})}else{if(N.effect==="slideInLeft"||n.randAnim==="slideInLeft"){u(L,N,n);E=a(".rambling-slice:first",L);C={height:"100%",width:"0px",opacity:"1",left:"",right:"0px"};E.css(C);return E.animate({width:L.width()+"px"},N.animSpeed*2,"",function(){var Q;Q={left:"0px",right:""};E.css(Q);return L.trigger("rambling:animFinished")})}else{if(N.effect==="boxRandom"||n.randAnim==="boxRandom"){r(L,N,n);M=N.boxCols*N.boxRows;t=0;O=0;B=f(a(".rambling-box",L));return B.each(function(){var Q;Q=a(this);if(t===M-1){setTimeout((function(){return Q.animate({opacity:"1"},N.animSpeed,"",function(){return L.trigger("rambling:animFinished")})}),100+O)}else{setTimeout((function(){return Q.animate({opacity:"1"},N.animSpeed)}),100+O)}O+=20;return t++})}else{if(N.effect==="boxRain"||n.randAnim==="boxRain"||N.effect==="boxRainReverse"||n.randAnim==="boxRainReverse"||N.effect==="boxRainGrow"||n.randAnim==="boxRainGrow"||N.effect==="boxRainGrowReverse"||n.randAnim==="boxRainGrowReverse"){r(L,N,n);M=N.boxCols*N.boxRows;t=0;O=0;D=0;J=0;H=new Array();H[D]=new Array();B=a(".rambling-box",L);if(N.effect==="boxRainReverse"||n.randAnim==="boxRainReverse"||N.effect==="boxRainGrowReverse"||n.randAnim==="boxRainGrowReverse"){B=a(".rambling-box",L)._reverse()}B.each(function(){H[D][J]=a(this);J++;if(J===N.boxCols){D++;J=0;return H[D]=new Array()}});i=[];for(F=0,A=N.boxCols*2-1;0<=A?F<=A:F>=A;0<=A?F++:F--){i.push((function(T){var R,S,Q,U;R=T;Q=function(V){if(R>=0&&R<N.boxCols){(function(ac,X,ab,Y,ad){var aa,Z,W;aa=a(H[ac][X]);W=aa.width();Z=aa.height();if(N.effect==="boxRainGrow"||n.randAnim==="boxRainGrow"||N.effect==="boxRainGrowReverse"||n.randAnim==="boxRainGrowReverse"){aa.width(0).height(0)}if(Y===ad-1){return setTimeout((function(){return aa.animate({opacity:"1",width:W,height:Z},N.animSpeed/1.3,"",function(){return L.trigger("rambling:animFinished")})}),100+ab)}else{return setTimeout((function(){return aa.animate({opacity:"1",width:W,height:Z},N.animSpeed/1.3)}),100+ab)}})(V,R,O,t,M);t++}return R--};for(S=0,U=N.boxRows-1;0<=U?S<=U:S>=U;0<=U?S++:S--){Q(S)}return O+=100})(F))}return i}}}}}}}}}};f=function(z){var B,A,C;A=function(F){var E,D;E=parseInt(Math.random()*F);D=z[--F];z[F]=z[E];return z[E]=E};for(B=C=z.length;C<=1?B<=1:B>=1;C<=1?B++:B--){A(B)}return z};s=function(i){if(this.console&&console&&console.log){return console.log(i)}};this.stop=function(){var i;i=a(d);if(!i.data("rambling:vars").stop){i.data("rambling:vars").stop=true;return s("Stop Slider")}};this.start=function(){var i;i=a(d);if(i.data("rambling:vars").stop){i.data("rambling:vars").stop=false;return s("Start Slider")}};x.afterLoad.call(this);return this};a.fn.ramblingSlider=function(c){return this.each(function(e,g){var d,f;d=a(this);if(d.data("ramblingslider")){return d.data("ramblingslider")}f=new b(this,c);return d.data("ramblingslider",f)})};a.fn.ramblingSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};return a.fn._reverse=[].reverse})(jQuery)}).call(this);