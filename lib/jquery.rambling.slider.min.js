(function(){Array.prototype.shuffle=function(){var c,b,d,a;d=this.length;for(c=d;d<=1?c<=1:c>=1;d<=1?c++:c--){this[c]=this[c];b=parseInt(Math.random()*c);a=this[--c];this[c]=this[b];this[b]=a}return this};Array.prototype.contains=function(c){var a,b;b=this.length;for(a=0;0<=b?a<b:a>b;0<=b?a++:a--){if(c===this[a]){return true}}return false};(function(a){a.fn.reverse=[].reverse;a.fn.shuffle=[].shuffle;return a.fn.as2dArray=function(b){var c,d,e;e=0;d=0;c=a("");c[e]=a("");this.each(function(){c[e][d]=a(this);d++;if(d===b){e++;d=0;return c[e]=a("")}});return c}})(jQuery);(function(b){var c,a;a=["stop","start"];b.fn.ramblingSlider=function(d){return this.each(function(f,h){var e,g;e=b(this);if((g=e.data("rambling:slider"))){if(a.contains(d)){g[d]()}return g}return e.data("rambling:slider",new c(this,d))})};b.fn.ramblingSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};return c=function(h,n){var i,q,E,G,J,B,D,I,p,A,C,j,d,x,H,l,z,u,o,e,t,k,m,g,r,F,v,y,s,f,w;y=b(h);F=b.extend({},b.fn.ramblingSlider.defaults,n);s=0;w={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false};J=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","foldLeft","fade","slideInRight","slideInLeft","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"];if(F.effect.contains(",")){J=F.effect.split(",")}this.stop=function(){if(!w.stop){return w.stop=true}};this.start=function(){if(w.stop){return w.stop=false}};d=function(){r();w.currentSlide=F.startSlide=F.startSlide%w.totalSlides;g(y,w);i();E();q(x);G();if(F.pauseOnHover){y.hover(H,f)}return k()};t=function(){if(!F.manualAdvance&&x.length>1){return s=setInterval((function(){return o(y,x,F,false)}),F.pauseTime)}};r=function(){y.css({position:"relative"});y.addClass("ramblingSlider");w.totalSlides=x.length;if(F.adaptImages){l()}return z()};l=function(){var K;K=b('<div id="rambling-animation"></div>');K.css({width:y.width(),height:y.height(),overflow:"hidden"});y.prepend(K);return y.addClass("adaptingSlider")};z=function(){var K;x.each(function(){var O,L,M,N;O=b(this);N=null;if(!O.is("img")){if(O.is("a")){N=O.addClass("rambling-imageLink")}O=O.find("img:first")}M=O.width()||O.attr("width");L=O.height()||O.attr("height");if(M>y.width()&&F.useLargerImage){y.width(M)}if(L>y.height()&&(F.useLargerImage||!F.adaptImages)){y.height(L)}if(N){N.css({display:"none"})}return O.css({display:"none"})});K=m(x);if(K.is("a")){return K.css({display:"block"})}};i=function(){var K;K=b('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:F.captionOpacity});y.append(K);return u(F)};E=function(){var K;if(F.directionNav){K=b("<div class='rambling-directionNav'><a class='rambling-prevNav'>"+F.prevText+"</a><a class='rambling-nextNav'>"+F.nextText+"</a></div>");y.append(K);if(F.directionNavHide){K.hide();y.hover((function(){return K.show()}),(function(){return K.hide()}))}y.find("a.rambling-prevNav").live("click",function(){return v("prev")});return y.find("a.rambling-nextNav").live("click",function(){return v("next")})}};q=function(){var L,K,M,O,N;if(F.controlNav){M=b('<div class="rambling-controlNav"></div>');y.append(M);O=function(P){var Q;if(F.controlNavThumbs){Q=x.eq(P);if(!Q.is("img")){Q=Q.find("img:first")}if(F.controlNavThumbsFromRel){return M.append("<a class='rambling-control' rel='"+P+"'><img src='"+(Q.attr("rel"))+"' alt='' /></a>")}else{return M.append("<a class='rambling-control' rel='"+P+"'><img src='"+(Q.attr("src").replace(F.controlNavThumbsSearch,F.controlNavThumbsReplace))+"' alt='' /></a>")}}else{return M.append("<a class='rambling-control' rel='"+P+"'>"+(P+1)+"'</a>")}};for(K=0,N=x.length;0<=N?K<N:K>N;0<=N?K++:K--){O(K)}L=y.find(".rambling-controlNav a");L.filter(":eq("+w.currentSlide+")").addClass("active");return L.live("click",function(){if(w.running){return false}if(b(this).hasClass("active")){return false}e();g(y,w);w.currentSlide=b(this).attr("rel")-1;return o(y,x,F,"control")})}};G=function(){if(F.keyboardNav){return b(window).keypress(function(K){if(K.keyCode===37){v("prev")}if(K.keyCode===39){return v("next")}})}};k=function(){return y.bind("rambling:finished",function(){var K;w.running=false;x.filter("a").css({display:"none"});K=b(x[w.currentSlide]);if(K.is("a")){K.css({display:"block"})}if(s===""&&!w.paused){t()}g(y,w);return F.afterChange.call(this)})};C=function(){return J[Math.floor(Math.random()*(J.length+1))]||"fade"};u=function(L){var K,M;K=y.find(".rambling-caption");M=w.currentImage.attr("title");if(M){if(M.substr(0,1)==="#"){M=b(M).html()}if(K.css("display")==="block"){K.find("p").fadeOut(L.animSpeed,function(){b(this).html(M);return b(this).fadeIn(L.animSpeed)})}else{K.find("p").html(M)}return K.fadeIn(L.animSpeed)}else{return K.fadeOut(L.animSpeed)}};m=function(L){var K;K=b(L[w.currentSlide]);w.currentImage=K;if(!K.is("img")){w.currentImage=K.find("img:first")}return K};e=function(){clearInterval(s);return s=""};H=function(){w.paused=true;return e()};f=function(){w.paused=false;if(s===""){return t()}};v=function(K){if(w.running){return false}e();if(K==="prev"){w.currentSlide-=2}return o(y,x,F,K)};D=function(N,M,P){var L,O,K;K=[];for(L=0,O=M.slices;0<=O?L<O:L>O;0<=O?L++:L--){K.push((function(R){var Q,S;S=Math.round(N.width()/M.slices);Q=N;if(M.adaptImages){Q=N.find("#rambling-animation")}return Q.append(A(S,R,M.slices,P))})(L))}return K};B=function(N,L,Q){var R,M,P,O,K;M=Math.round(N.width()/L.boxCols);R=Math.round(N.height()/L.boxRows);K=[];for(P=0,O=L.boxRows;0<=O?P<O:P>O;0<=O?P++:P--){K.push((function(T){var U,V,S;S=[];for(U=0,V=L.boxCols;0<=V?U<V:U>V;0<=V?U++:U--){S.push((function(X){var W;W=N;if(L.adaptImages){W=N.find("#rambling-animation")}return W.append(p(M,R,T,X,L,Q))})(U))}return S})(P))}return K};g=function(K,L){return K.css({background:"url("+(L.currentImage.attr("src"))+") no-repeat"})};A=function(P,K,N,O){var L,Q,M;L="url("+(O.currentImage.attr("src"))+") no-repeat -"+((P+(K*P))-P)+"px 0%";M=P;if(K===(N-1)){L="url("+(O.currentImage.attr("src"))+") no-repeat -"+((P+(K*P))-P)+"px 0%";M=y.width()-(P*K)}Q={left:""+(P*K)+"px",width:""+M+"px",height:"0px",opacity:"0",background:L,overflow:"hidden"};return b('<div class="rambling-slice"></div>').css(Q)};p=function(O,Q,S,M,N,P){var K,R,L;K="url("+(P.currentImage.attr("src"))+") no-repeat -"+((O+(M*O))-O)+"px -"+((Q+(S*Q))-Q)+"px";L=O;if(M===(N.boxCols-1)){K="url("+(P.currentImage.attr("src"))+") no-repeat -"+((O+(M*O))-O)+"px -"+((Q+(S*Q))-Q)+"px";L=y.width()-(O*M)}R={opacity:0,left:""+(O*M)+"px",top:""+(Q*S)+"px",width:""+L+"px",height:""+Q+"px",background:K,overflow:"hidden"};return b('<div class="rambling-box"></div>').css(R)};if(F.adaptImages){j=A;I=p;g=function(){var M,K,L;L=w.currentImage;K=y.find(".currentImage");if(!K.length){M="alignTop";if(F.alignBottom){M="alignBottom"}K=b('<img src="" alt="currentImage" class="currentImage"/>');K.addClass(M);K.css({display:"block"});y.find("#rambling-animation").prepend(K)}return K.attr({src:L.attr("src"),alt:L.attr("alt")})};A=function(R,K,O,Q){var M,N,L,P;N=j(R,K,O,Q);N.css({background:"none"});N.append('<span><img src="'+(Q.currentImage.attr("src"))+'" alt=""/></span>');M=0;P="auto";if(F.alignBottom){M="auto";P=0}L={display:"block",width:y.width(),left:"-"+((R+(K*R))-R)+"px",bottom:M,top:P};N.find("img").css(L);return N};p=function(P,R,T,M,N,Q){var K,O,L,S;O=I(P,R,T,M,N,Q);K=false;S=""+((R+(T*R))-R)+"px";if(N.alignBottom){K=""+(R*(N.boxRows-(T+1)))+"px";S=false}L={display:"block",width:y.width(),left:"-"+((P+(M*P))-P)+"px",top:"auto",bottom:"auto"};if(S){L.top="-"+S}if(K){L.bottom="-"+K}O.css({background:"none",top:S||"auto",bottom:K||"auto"});O.append("<span><img src='"+(Q.currentImage.attr("src"))+"' alt=''/></span>");O.find("img").css(L);return O}}x=y.children(":not(#rambling-animation)");d();t();o=function(U,T,Z,S){var M,Y,O,Q,N,ad,L,aa,ac,V,P,W,K,ab,X,R;if(w&&w.currentSlide===w.totalSlides-1){Z.lastSlide.call(this)}if((!w||w.stop)&&!S){return false}Z.beforeChange.call(this);w.currentSlide++;if(w.currentSlide===w.totalSlides){w.currentSlide=0;Z.slideshowEnd.call(this)}if(w.currentSlide<0){w.currentSlide=w.totalSlides-1}m(T);if(Z.controlNav){L=U.find(".rambling-controlNav a");L.removeClass("active");L.filter(":eq("+w.currentSlide+")").addClass("active")}u(Z);U.find(".rambling-slice,.rambling-box").remove();if(Z.effect==="random"||Z.effect.contains(",")){w.randAnim=C()}w.running=true;ac=w.randAnim||Z.effect;if(ac.contains("slice")||ac.contains("fold")){D(U,Z,w);ab=0;W=0;R=0;K=U.find(".rambling-slice");if(ac.contains("Left")){K=K.reverse()}Y=ac.replace(/Right/,"").replace(/Left/,"");O={sliceDown:function(){var ae;ae=b(this);ae.css({top:"0px"});if(W===Z.slices-1){setTimeout(function(){return ae.animate({height:"100%",opacity:"1.0"},Z.animSpeed,"",function(){return U.trigger("rambling:finished")})},100+ab)}else{setTimeout((function(){return ae.animate({height:"100%",opacity:"1.0"},Z.animSpeed)}),100+ab)}ab+=50;return W++},sliceUp:function(){var ae;ae=b(this);ae.css({bottom:"0px"});if(W===Z.slices-1){setTimeout((function(){return ae.animate({height:"100%",opacity:"1.0"},Z.animSpeed,"",function(){return U.trigger("rambling:finished")})}),100+ab)}else{setTimeout((function(){return ae.animate({height:"100%",opacity:"1.0"},Z.animSpeed)}),100+ab)}ab+=50;return W++},sliceUpDown:function(){var ae;ae=b(this);if(W===0){ae.css({top:"0px"});W++}else{ae.css({bottom:"0px"});W=0}if(R===Z.slices-1){setTimeout((function(){return ae.animate({height:"100%",opacity:"1.0"},Z.animSpeed,"",function(){return U.trigger("rambling:finished")})}),100+ab)}else{setTimeout((function(){return ae.animate({height:"100%",opacity:"1.0"},Z.animSpeed)}),100+ab)}ab+=50;return R++},fold:function(){var af,ae;ae=b(this);af=ae.width();ae.css({top:"0px",height:"100%",width:"0px"});if(W===Z.slices-1){setTimeout((function(){return ae.animate({width:af,opacity:"1.0"},Z.animSpeed,"",function(){return U.trigger("rambling:finished")})}),100+ab)}else{setTimeout((function(){return ae.animate({width:af,opacity:"1.0"},Z.animSpeed)}),100+ab)}ab+=50;return W++}};return K.each(O[Y])}else{if(ac==="fade"||ac==="slideInRight"||ac==="slideInLeft"){D(U,Z,w);Q={fade:{style:{height:"100%",width:""+(U.width())+"px",position:"absolute",top:0,left:0},animate:{opacity:"1"}},slideInRight:{style:{height:"100%",width:"0px",opacity:"1"}},slideInLeft:{style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},callback:function(ae){var af;af={left:"0px",right:""};return ae.css(af)}}};V=Q[ac];M=V.animate||{width:""+(U.width())+"px"};P=U.find(".rambling-slice:first");P.css(Q[ac].style);return P.animate(M,Z.animSpeed*2,"",function(){if(V.callback){V.callback(P)}return U.trigger("rambling:finished")})}else{if(ac.contains("box")){B(U,Z,w);X=Z.boxCols*Z.boxRows;W=0;ab=0;N=U.find(".rambling-box");if(ac.contains("Reverse")){N=N.reverse()}O={random:{beforeAnimation:function(){return N=N.shuffle()},animate:function(ae){return ae.each(function(){var af;af=b(this);if(W===X-1){setTimeout((function(){return af.animate({opacity:"1"},Z.animSpeed,"",function(){return U.trigger("rambling:finished")})}),100+ab)}else{setTimeout((function(){return af.animate({opacity:"1"},Z.animSpeed)}),100+ab)}ab+=20;return W++})}},rain:{beforeAnimation:function(){return N=N.as2dArray(Z.boxCols)},animate:function(af){var ah,ag,ae;ae=[];for(ah=0,ag=Z.boxCols*2;0<=ag?ah<ag:ah>ag;0<=ag?ah++:ah--){ae.push((function(ak){var ai,aj,am,al;ai=ak;am=function(ar){var aq,ao,ap,au,at,an;if(ai>=0&&ai<Z.boxCols){au=ar;ao=ai;at=ab;aq=b(af[au][ao]);an=aq.width();ap=aq.height();if(ac.contains("Grow")){aq.css({width:0,height:0})}if(W===X-1){setTimeout((function(){return aq.animate({opacity:"1",width:an,height:ap},Z.animSpeed/1.3,"",function(){return U.trigger("rambling:finished")})}),100+at)}else{setTimeout((function(){return aq.animate({opacity:"1",width:an,height:ap},Z.animSpeed/1.3)}),100+at)}W++}return ai--};for(aj=0,al=Z.boxRows;0<=al?aj<al:aj>al;0<=al?aj++:aj--){am(aj)}return ab+=100})(ah))}return ae}}};aa=ac.replace(/box/,"").replace(/Grow/,"").replace(/Reverse/,"").decapitalize();ad=O[aa];ad.beforeAnimation();return ad.animate(N)}}}};F.afterLoad.call(this);return this}})(jQuery);String.prototype.contains=function(a){return this.indexOf(a)!==-1};String.prototype.decapitalize=function(){var b,a;b=this.slice(0,1);a=this.slice(1);return""+(b.toLowerCase())+a}}).call(this);