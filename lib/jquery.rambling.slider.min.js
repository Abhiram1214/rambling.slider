(function(){var b=Array.prototype.slice,a=Array.prototype.indexOf||function(e){for(var d=0,c=this.length;d<c;d++){if(this[d]===e){return d}}return -1};Array.prototype.shuffle=function(){var e,d,f,c;f=this.length;for(e=f;f<=1?e<=1:e>=1;f<=1?e++:e--){this[e]=this[e];d=parseInt(Math.random()*e);c=this[--e];this[e]=this[d];this[d]=c}return this};Array.prototype.contains=function(e){var c,d;d=this.length;for(c=0;0<=d?c<d:c>d;0<=d?c++:c--){if(e===this[c]){return true}}return false};(function(d){var e,c;c=["stop","start","options","effect"];d.fn.ramblingSlider=function(){var f,g;f=arguments[0],g=2<=arguments.length?b.call(arguments,1):[];return this.each(function(i,k){var h,j;h=d(this);j=h.data("rambling:slider");if(j){if(a.call(c,f)>=0){j[f].apply(j,g)}else{if((typeof f)==="string"){d.error("Method '"+f+"' not found.")}}return j}else{if(a.call(c,f)>=0){d.error("Tried to call method '"+f+"' on element without slider.")}}j=new e(this,f);h.data("rambling:slider",j);j.initialize();return j.run()})};d.fn.ramblingSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};return e=function(s,y){var p,I,H,v,Z,o,k,B,W,X,l,u,A,R,V,f,aa,L,C,q,i,U,N,J,Y,r,F,O,E,n,x,S,P,M,G,T,w,h,Q,j,m,z,t,D,g,K;m=d(s);U=m.children(":not(#rambling-animation)");T=d.extend({},d.fn.ramblingSlider.defaults,y);l=[];D=0;W=0;K={currentSlide:0,currentImage:"",totalSlides:0,randomAnimation:"",running:false,paused:false,stop:false};t=function(){if(!K.stop){return K.stop=true}};z=function(){if(K.stop){return K.stop=false}};y=function(ab){return d.extend(T,ab)};R=function(ab){T.effect=ab;l=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","foldLeft","fade","slideInRight","slideInLeft","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"];if(T.effect.contains(",")){return l=T.effect.split(",")}};i=function(){G();K.currentSlide=T.startSlide=T.startSlide%K.totalSlides;M(m,K);p();H();I(U);v();if(T.pauseOnHover){m.hover(N,g)}return S()};x=function(){if(!T.manualAdvance&&U.length>1){return D=setInterval((function(){return O(m,U,T,false)}),T.pauseTime)}};G=function(){m.css({position:"relative"});m.addClass("ramblingSlider");K.totalSlides=U.length;if(T.adaptImages){J()}return Y()};J=function(){var ab;ab=d('<div id="rambling-animation"></div>');ab.css({width:m.width(),height:m.height(),overflow:"hidden"});m.prepend(ab);return m.addClass("adaptingSlider")};Y=function(){var ab;U.each(function(){var af,ac,ad,ae;af=d(this);ae=null;if(!af.is("img")){if(af.is("a")){ae=af.addClass("rambling-imageLink")}af=af.find("img:first")}ad=af.width()||af.attr("width");ac=af.height()||af.attr("height");if(ad>m.width()&&T.useLargerImage){m.width(ad)}if(ac>m.height()&&(T.useLargerImage||!T.adaptImages)){m.height(ac)}if(ae){ae.css({display:"none"})}return af.css({display:"none"})});ab=P(U);if(ab.is("a")){return ab.css({display:"block"})}};p=function(){var ab;ab=d('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:T.captionOpacity});m.append(ab);return r(T)};H=function(){var ab;if(T.directionNav){ab=d("<div class='rambling-directionNav'><a class='rambling-prevNav'>"+T.prevText+"</a><a class='rambling-nextNav'>"+T.nextText+"</a></div>");m.append(ab);if(T.directionNavHide){ab.hide();m.hover((function(){return ab.show()}),(function(){return ab.hide()}))}m.find("a.rambling-prevNav").live("click",function(){return h("prev")});return m.find("a.rambling-nextNav").live("click",function(){return h("next")})}};I=function(){var ac,ab,ad,af,ae;if(T.controlNav){ad=d('<div class="rambling-controlNav"></div>');m.append(ad);af=function(ag){var ah;if(T.controlNavThumbs){ah=U.eq(ag);if(!ah.is("img")){ah=ah.find("img:first")}if(T.controlNavThumbsFromRel){return ad.append("<a class='rambling-control' rel='"+ag+"'><img src='"+(ah.attr("rel"))+"' alt='' /></a>")}else{return ad.append("<a class='rambling-control' rel='"+ag+"'><img src='"+(ah.attr("src").replace(T.controlNavThumbsSearch,T.controlNavThumbsReplace))+"' alt='' /></a>")}}else{return ad.append("<a class='rambling-control' rel='"+ag+"'>"+(ag+1)+"'</a>")}};for(ab=0,ae=U.length;0<=ae?ab<ae:ab>ae;0<=ae?ab++:ab--){af(ab)}ac=m.find(".rambling-controlNav a");ac.filter(":eq("+K.currentSlide+")").addClass("active");return ac.live("click",function(){if(K.running){return false}if(d(this).hasClass("active")){return false}n();M(m,K);K.currentSlide=d(this).attr("rel")-1;return O(m,U,T,"control")})}};v=function(){if(T.keyboardNav){return d(window).keypress(function(ab){if(ab.keyCode===37){h("prev")}if(ab.keyCode===39){return h("next")}})}};S=function(){return m.bind("rambling:finished",function(){var ab;K.running=false;U.filter("a").css({display:"none"});ab=d(U[K.currentSlide]);if(ab.is("a")){ab.css({display:"block"})}if(D===""&&!K.paused){x()}M(m,K);return T.afterChange.call(this)})};C=function(){return l[Math.floor(Math.random()*(l.length+1))]||"fade"};r=function(ac){var ab,ad;ab=m.find(".rambling-caption");ad=K.currentImage.attr("title");if(ad){if(ad.substr(0,1)==="#"){ad=d(ad).html()}if(ab.css("display")==="block"){ab.find("p").fadeOut(ac.animSpeed,function(){d(this).html(ad);return d(this).fadeIn(ac.animSpeed)})}else{ab.find("p").html(ad)}return ab.fadeIn(ac.animSpeed)}else{return ab.fadeOut(ac.animSpeed)}};P=function(ac){var ab;ab=d(ac[K.currentSlide]);K.currentImage=ab;if(!ab.is("img")){K.currentImage=ab.find("img:first")}return ab};n=function(){clearInterval(D);return D=""};N=function(){K.paused=true;return n()};g=function(){K.paused=false;if(D===""){return x()}};h=function(ab){if(K.running){return false}n();if(ab==="prev"){K.currentSlide-=2}return O(m,U,T,ab)};A=function(ad,ac,af){var ab,ag,ae;ag=function(ai){var ah,aj;aj=Math.round(ad.width()/ac.slices);ah=ad;if(ac.adaptImages){ah=ad.find("#rambling-animation")}return ah.append(L(aj,ai,ac.slices,af))};for(ab=0,ae=ac.slices;0<=ae?ab<ae:ab>ae;0<=ae?ab++:ab--){ag(ab)}return ad.find(".rambling-slice")};u=function(ad,ab,ag){var ah,ac,af,ai,ae;ac=Math.round(ad.width()/ab.boxCols);ah=Math.round(ad.height()/ab.boxRows);ai=function(ak){var al,am,aj;aj=[];for(al=0,am=ab.boxCols;0<=am?al<am:al>am;0<=am?al++:al--){aj.push((function(ao){var an;an=ad;if(ab.adaptImages){an=ad.find("#rambling-animation")}return an.append(aa(ac,ah,ak,ao,ab,ag))})(al))}return aj};for(af=0,ae=ab.boxRows;0<=ae?af<ae:af>ae;0<=ae?af++:af--){ai(af)}return ad.find(".rambling-box")};M=function(ab,ac){return ab.css({background:"url("+(ac.currentImage.attr("src"))+") no-repeat"})};L=function(ag,ab,ae,af){var ac,ah,ad;ac="url("+(af.currentImage.attr("src"))+") no-repeat -"+((ag+(ab*ag))-ag)+"px 0%";ad=ag;if(ab===(ae-1)){ac="url("+(af.currentImage.attr("src"))+") no-repeat -"+((ag+(ab*ag))-ag)+"px 0%";ad=m.width()-(ag*ab)}ah={left:""+(ag*ab)+"px",width:""+ad+"px",height:"0px",opacity:"0",background:ac,overflow:"hidden"};return d('<div class="rambling-slice"></div>').css(ah)};aa=function(af,ah,aj,ad,ae,ag){var ab,ai,ac;ab="url("+(ag.currentImage.attr("src"))+") no-repeat -"+((af+(ad*af))-af)+"px -"+((ah+(aj*ah))-ah)+"px";ac=af;if(ad===(ae.boxCols-1)){ab="url("+(ag.currentImage.attr("src"))+") no-repeat -"+((af+(ad*af))-af)+"px -"+((ah+(aj*ah))-ah)+"px";ac=m.width()-(af*ad)}ai={opacity:0,left:""+(af*ad)+"px",top:""+(ah*aj)+"px",width:""+ac+"px",height:""+ah+"px",background:ab,overflow:"hidden"};return d('<div class="rambling-box"></div>').css(ai)};if(T.adaptImages){q=L;f=aa;M=function(){var ad,ab,ac;ac=K.currentImage;ab=m.find(".currentImage");if(!ab.length){ad="alignTop";if(T.alignBottom){ad="alignBottom"}ab=d('<img src="" alt="currentImage" class="currentImage"/>');ab.addClass(ad);ab.css({display:"block"});m.find("#rambling-animation").prepend(ab)}return ab.attr({src:ac.attr("src"),alt:ac.attr("alt")})};L=function(ai,ab,af,ah){var ad,ae,ac,ag;ae=q(ai,ab,af,ah);ae.css({background:"none"});ae.append('<span><img src="'+(ah.currentImage.attr("src"))+'" alt=""/></span>');ad=0;ag="auto";if(T.alignBottom){ad="auto";ag=0}ac={display:"block",width:m.width(),left:"-"+((ai+(ab*ai))-ai)+"px",bottom:ad,top:ag};ae.find("img").css(ac);return ae};aa=function(ag,ai,ak,ad,ae,ah){var ab,af,ac,aj;af=f(ag,ai,ak,ad,ae,ah);ab=false;aj=""+((ai+(ak*ai))-ai)+"px";if(ae.alignBottom){ab=""+(ai*(ae.boxRows-(ak+1)))+"px";aj=false}ac={display:"block",width:m.width(),left:"-"+((ag+(ad*ag))-ag)+"px",top:"auto",bottom:"auto"};if(aj){ac.top="-"+aj}if(ab){ac.bottom="-"+ab}af.css({background:"none",top:aj||"auto",bottom:ab||"auto"});af.append("<span><img src='"+(ah.currentImage.attr("src"))+"' alt=''/></span>");af.find("img").css(ac);return af}}o=function(ab){var ad,ac;ac=A(m,T,K);ad=ac.filter(":first");ad.css(ab.style);return ad.animate(ab.animate||{width:""+(m.width())+"px"},T.animSpeed*2,"",function(){if(ab.afterChange){ab.afterChange.apply(ad)}return m.trigger("rambling:finished")})};k=function(ab,ad){var ac;ac=A(m,T,K);W=0;if(ad){ac=ad.apply(ac)}return ac.each(ab)};Z=function(ab,ad){var ac;ac=u(m,T,K);W=0;if(ad){ac=ad.apply(ac)}return ab.apply(ac)};w=function(ab){return k(function(ac){var ad;ad=d(this);ad.css({top:"0px"});if(ac===T.slices-1){setTimeout(function(){return ad.animate({height:"100%",opacity:"1.0"},T.animSpeed,"",function(){return m.trigger("rambling:finished")})},100+W)}else{setTimeout((function(){return ad.animate({height:"100%",opacity:"1.0"},T.animSpeed)}),100+W)}return W+=50},ab)};j=function(ab){return k(function(ac){var ad;ad=d(this);ad.css({bottom:"0px"});if(ac===T.slices-1){setTimeout((function(){return ad.animate({height:"100%",opacity:"1.0"},T.animSpeed,"",function(){return m.trigger("rambling:finished")})}),100+W)}else{setTimeout((function(){return ad.animate({height:"100%",opacity:"1.0"},T.animSpeed)}),100+W)}return W+=50},ab)};Q=function(ab){return k(function(ac){var ad;ad=d(this);ad.css((ac%2?{bottom:"0px"}:{top:"0px"}));if(ac===T.slices-1){setTimeout((function(){return ad.animate({height:"100%",opacity:"1.0"},T.animSpeed,"",function(){return m.trigger("rambling:finished")})}),100+W)}else{setTimeout((function(){return ad.animate({height:"100%",opacity:"1.0"},T.animSpeed)}),100+W)}return W+=50},ab)};V=function(ab){return k(function(ac){var ae,ad;ad=d(this);ae=ad.width();ad.css({top:"0px",height:"100%",width:"0px"});if(ac===T.slices-1){setTimeout((function(){return ad.animate({width:ae,opacity:"1.0"},T.animSpeed,"",function(){return m.trigger("rambling:finished")})}),100+W)}else{setTimeout((function(){return ad.animate({width:ae,opacity:"1.0"},T.animSpeed)}),100+W)}return W+=50},ab)};E=function(){return Z(function(){var ab;ab=this.length;return this.each(function(ac){var ad;ad=d(this);if(ac===ab-1){setTimeout((function(){return ad.animate({opacity:"1"},T.animSpeed,"",function(){return m.trigger("rambling:finished")})}),100+W)}else{setTimeout((function(){return ad.animate({opacity:"1"},T.animSpeed)}),100+W)}return W+=20})},d.fn.shuffle)};F=function(ac,ab){return Z(function(){var af,ah,ae,ai,ag,ad;af=this;ai=T.boxCols*T.boxRows;ae=0;ad=[];for(ah=0,ag=T.boxCols*2;0<=ag?ah<ag:ah>ag;0<=ag?ah++:ah--){ad.push((function(am){var ak,al,an,aj;ak=am;aj=[];for(al=0,an=T.boxRows;0<=an?al<an:al>an;0<=an?al++:al--){aj.push((function(at){var ar,ap,aq,av,au,ao;if(ak>=0&&ak<T.boxCols){av=at;ap=ak;au=W;ar=d(af[av][ap]);ao=ar.width();aq=ar.height();if(ab){ar.css({width:0,height:0})}if(ae===ai-1){setTimeout((function(){return ar.animate({opacity:"1",width:ao,height:aq},T.animSpeed/1.3,"",function(){return m.trigger("rambling:finished")})}),100+W)}else{setTimeout((function(){return ar.animate({opacity:"1",width:ao,height:aq},T.animSpeed/1.3)}),100+W)}ae++;W+=20}return ak--})(al))}return aj})(ah))}return ad},ac)};B={fade:{style:{height:"100%",width:""+(m.width())+"px",position:"absolute",top:0,left:0},animate:{opacity:"1"}},slideInRight:{style:{height:"100%",width:"0px",opacity:"1"}},slideInLeft:{style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},afterChange:function(){return this.css({left:"0px",right:""})}}};X={sliceDown:w,sliceDownRight:w,sliceDownLeft:function(){return w(d.fn.reverse)},sliceUp:j,sliceUpRight:j,sliceUpLeft:function(){return j(d.fn.reverse)},sliceUpDown:Q,sliceUpDownRight:Q,sliceUpDownLeft:function(){return Q(d.fn.reverse)},fold:V,foldLeft:function(){return V(d.fn.reverse)},fade:function(){return o(B.fade)},slideIn:function(){return o(B.slideInRight)},slideInRight:function(){return o(B.slideInRight)},slideInLeft:function(){return o(B.slideInLeft)},boxRandom:E,boxRain:function(){return F(function(){return d(this).as2dArray(T.boxCols)})},boxRainReverse:function(){return F(function(){return d(this).reverse().as2dArray(T.boxCols)})},boxRainGrow:function(){return F((function(){return d(this).as2dArray(T.boxCols)}),true)},boxRainGrowReverse:function(){return F((function(){return d(this).reverse().as2dArray(T.boxCols)}),true)}};O=function(af,ad,ae,ab){var ac;if(K.currentSlide===K.totalSlides-1){ae.lastSlide.call(this)}if(K.stop&&!ab){return false}ae.beforeChange.call(this);K.currentSlide++;if(K.currentSlide===K.totalSlides){K.currentSlide=0;ae.slideshowEnd.call(this)}if(K.currentSlide<0){K.currentSlide=K.totalSlides-1}P(ad);if(ae.controlNav){af.find(".rambling-controlNav a").removeClass("active").filter(":eq("+K.currentSlide+")").addClass("active")}r(ae);af.find(".rambling-slice,.rambling-box").remove();if(ae.effect==="random"||ae.effect.contains(",")){K.randomAnimation=C()}else{K.randomAnimation=null}K.running=true;ac=K.randomAnimation||ae.effect;return X[ac].apply(this)};T.afterLoad.call(this);this.stop=t;this.start=z;this.effect=R;this.options=y;this.initialize=i;this.run=x;return this}})(jQuery);(function(c){c.fn.reverse=[].reverse;c.fn.shuffle=[].shuffle;return c.fn.as2dArray=function(d){var e,f,g;g=0;f=0;e=c("");e[g]=c("");this.each(function(){e[g][f]=c(this);f++;if(f===d){g++;f=0;return e[g]=c("")}});return e}})(jQuery);String.prototype.contains=function(c){return this.indexOf(c)!==-1};String.prototype.decapitalize=function(){var d,c;d=this.slice(0,1);c=this.slice(1);return""+(d.toLowerCase())+c}}).call(this);