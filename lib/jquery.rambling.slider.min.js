(function(){Array.prototype.shuffle=function(){var c,b,d,a;d=this.length;for(c=d;d<=1?c<=1:c>=1;d<=1?c++:c--){this[c]=this[c];b=parseInt(Math.random()*c);a=this[--c];this[c]=this[b];this[b]=a}return this};Array.prototype.contains=function(c){var a,b;b=this.length;for(a=0;0<=b?a<b:a>b;0<=b?a++:a--){if(c===this[a]){return true}}return false};(function(a){a.fn.reverse=[].reverse;a.fn.shuffle=[].shuffle;return a.fn.as2dArray=function(b){var c,d,e;e=0;d=0;c=a("");c[e]=a("");this.each(function(){c[e][d]=a(this);d++;if(d===b){e++;d=0;return c[e]=a("")}});return c}})(jQuery);(function(b){var c,a;c=function(e,f){var k,B,g,t,x,h,m,q,v,w,r,y,o,A,d,j,z,s,n,u,p,C,l;z=b.extend({},b.fn.ramblingSlider.defaults,f);p={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false};q={};h={setSliderBackground:function(i,D){return i.css({background:"url("+(D.currentImage.attr("src"))+") no-repeat"})},getRamblingSlice:function(H,i,F,G){var D,I,E;D="url("+(G.currentImage.attr("src"))+") no-repeat -"+((H+(i*H))-H)+"px 0%";E=H;if(i===(F-1)){D="url("+(G.currentImage.attr("src"))+") no-repeat -"+((H+(i*H))-H)+"px 0%";E=s.width()-(H*i)}I={left:""+(H*i)+"px",width:""+E+"px",height:"0px",opacity:"0",background:D,overflow:"hidden"};return b('<div class="rambling-slice"></div>').css(I)},getRamblingBox:function(G,I,K,E,F,H){var i,J,D;i="url("+(H.currentImage.attr("src"))+") no-repeat -"+((G+(E*G))-G)+"px -"+((I+(K*I))-I)+"px";D=G;if(E===(F.boxCols-1)){i="url("+(H.currentImage.attr("src"))+") no-repeat -"+((G+(E*G))-G)+"px -"+((I+(K*I))-I)+"px";D=s.width()-(G*E)}J={opacity:0,left:""+(G*E)+"px",top:""+(I*K)+"px",width:""+D+"px",height:""+I+"px",background:i,overflow:"hidden"};return b('<div class="rambling-box"></div>').css(J)}};k={setSliderBackground:function(){var E,i,D;D=p.currentImage;i=s.find(".currentImage");if(!i.length){E="alignTop";if(z.alignBottom){E="alignBottom"}i=b('<img src="" alt="currentImage" class="currentImage"/>');i.addClass(E);i.css({display:"block"});s.find("#rambling-animation").prepend(i)}return i.attr({src:D.attr("src"),alt:D.attr("alt")})},getRamblingSlice:function(J,i,G,I){var E,F,D,H;F=h.getRamblingSlice(J,i,G,I);F.css({background:"none"});F.append('<span><img src="'+(I.currentImage.attr("src"))+'" alt=""/></span>');E=0;H="auto";if(z.alignBottom){E="auto";H=0}D={display:"block",width:s.width(),left:"-"+((J+(i*J))-J)+"px",bottom:E,top:H};F.find("img").css(D);return F},getRamblingBox:function(H,J,L,E,F,I){var i,G,D,K;G=h.getRamblingBox(H,J,L,E,F,I);i=false;K=""+((J+(L*J))-J)+"px";if(F.alignBottom){i=""+(J*(F.boxRows-(L+1)))+"px";K=false}D={display:"block",width:s.width(),left:"-"+((H+(E*H))-H)+"px",top:"auto",bottom:"auto"};if(K){D.top="-"+K}if(i){D.bottom="-"+i}G.css({background:"none",top:K||"auto",bottom:i||"auto"});G.append("<span><img src='"+(I.currentImage.attr("src"))+"' alt=''/></span>");G.find("img").css(D);return G}};b.extend(q,h);if(z.adaptImages){b.extend(q,k)}s=b(e);s.data("rambling:vars",p);s.css({position:"relative"});s.addClass("ramblingSlider");if(z.adaptImages){A=b('<div id="rambling-animation"></div>');A.css({width:s.width(),height:s.height(),overflow:"hidden"});s.prepend(A);s.addClass("adaptingSlider")}r=s.children(":not(#rambling-animation)");r.each(function(){var F,i,D,E;F=b(this);E="";if(!F.is("img")){if(F.is("a")){F.addClass("rambling-imageLink");E=F}F=F.find("img:first")}D=F.width();if(D===0){D=F.attr("width")}i=F.height();if(i===0){i=F.attr("height")}if(D>s.width()&&z.useLargerImage){s.width(D)}if(i>s.height()&&(z.useLargerImage||!z.adaptImages)){s.height(i)}if(E!==""){E.css({display:"none"})}F.css({display:"none"});return p.totalSlides++});if(z.startSlide>0){if(z.startSlide>=p.totalSlides){z.startSlide=p.totalSlides-1}p.currentSlide=z.startSlide}w=b(r[p.currentSlide]);p.currentImage=w;if(!w.is("img")){p.currentImage=w.find("img:first")}if(w.is("a")){w.css({display:"block"})}q.setSliderBackground(s,p);s.append(b('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:z.captionOpacity},(function(){})()));o=function(D){var i,E;i=s.find(".rambling-caption");E=p.currentImage.attr("title");if((E!=null)&&E!==""){if(E.substr(0,1)==="#"){E=b(E).html()}if(i.css("display")==="block"){i.find("p").fadeOut(D.animSpeed,function(){b(this).html(E);return b(this).fadeIn(D.animSpeed)})}else{i.find("p").html(E)}return i.fadeIn(D.animSpeed)}else{return i.fadeOut(D.animSpeed)}};o(z);n=0;if(!z.manualAdvance&&r.length>1){n=setInterval((function(){return j(s,r,z,false)}),z.pauseTime)}B=function(){clearInterval(n);return n=""};if(z.directionNav){s.append("<div class='rambling-directionNav'><a class='rambling-prevNav'>"+z.prevText+"</a><a class='rambling-nextNav'>"+z.nextText+"</a></div>");if(z.directionNavHide){m=s.find(".rambling-directionNav");m.hide();s.hover((function(){return m.show()}),(function(){return m.hide()}))}y=function(E,i,D,F){if(p.running){return false}B();p.currentSlide-=2;return j(E,i,D,F)};s.find("a.rambling-prevNav").live("click",function(){return y("prev")});s.find("a.rambling-nextNav").live("click",function(){return y("next")})}if(z.controlNav){d=b('<div class="rambling-controlNav"></div>');s.append(d);C=function(D){var E;if(z.controlNavThumbs){E=r.eq(D);if(!E.is("img")){E=E.find("img:first")}if(z.controlNavThumbsFromRel){return d.append("<a class='rambling-control' rel='"+D+"'><img src='"+(E.attr("rel"))+"' alt='' /></a>")}else{return d.append("<a class='rambling-control' rel='"+D+"'><img src='"+(E.attr("src").replace(z.controlNavThumbsSearch,z.controlNavThumbsReplace))+"' alt='' /></a>")}}else{return d.append("<a class='rambling-control' rel='"+D+"'>"+(D+1)+"'</a>")}};for(v=0,l=r.length;0<=l?v<l:v>l;0<=l?v++:v--){C(v)}g=s.find(".rambling-controlNav a");g.filter(":eq("+p.currentSlide+")").addClass("active");g.live("click",function(){if(p.running){return false}if(b(this).hasClass("active")){return false}B();q.setSliderBackground(s,p);p.currentSlide=b(this).attr("rel")-1;return j(s,r,z,"control")})}if(z.keyboardNav){b(window).keypress(function(i){if(i.keyCode==="37"){if(p.running){return false}B();p.currentSlide-=2;j(s,r,z,"prev")}if(i.keyCode==="39"){if(p.running){return false}B();return j(s,r,z,"next")}})}if(z.pauseOnHover){s.hover(function(){p.paused=true;return B()},function(){p.paused=false;if(n===""&&!z.manualAdvance){return n=setInterval((function(){return j(s,r,z,false)}),z.pauseTime)}})}s.bind("rambling:animFinished",function(){p.running=false;b(r).each(function(){w=b(this);if(w.is("a")){return w.css({display:"none"})}});w=b(r[p.currentSlide]);if(w.is("a")){w.css({display:"block"})}if(n===""&&!p.paused&&!z.manualAdvance){n=setInterval((function(){return j(s,r,z,false)}),z.pauseTime)}q.setSliderBackground(s,p);return z.afterChange.call(this)});x=function(G,F,H){var E,I,D;D=[];for(E=0,I=F.slices;0<=I?E<I:E>I;0<=I?E++:E--){D.push((function(K){var J,L;L=Math.round(G.width()/F.slices);J=G;if(F.adaptImages){J=G.find("#rambling-animation")}return J.append(q.getRamblingSlice(L,K,F.slices,H))})(E))}return D};t=function(F,D,H){var I,E,G,J,i;E=Math.round(F.width()/D.boxCols);I=Math.round(F.height()/D.boxRows);i=[];for(G=0,J=D.boxRows;0<=J?G<J:G>J;0<=J?G++:G--){i.push((function(L){var M,N,K;K=[];for(M=0,N=D.boxCols;0<=N?M<N:M>N;0<=N?M++:M--){K.push((function(P){var O;O=F;if(D.adaptImages){O=F.find("#rambling-animation")}return O.append(q.getRamblingBox(E,I,L,P,D,H))})(M))}return K})(G))}return i};j=function(L,K,P,J){var D,O,F,H,T,E,U,Q,S,M,G,i,R,N,I;p=L.data("rambling:vars");if(p&&p.currentSlide===p.totalSlides-1){P.lastSlide.call(this)}if((!p||p.stop)&&!J){return false}P.beforeChange.call(this);p.currentSlide++;if(p.currentSlide===p.totalSlides){p.currentSlide=0;P.slideshowEnd.call(this)}if(p.currentSlide<0){p.currentSlide=p.totalSlides-1}w=b(K[p.currentSlide]);p.currentImage=w;if(!w.is("img")){p.currentImage=w.find("img:first")}if(P.controlNav){g=L.find(".rambling-controlNav a");g.removeClass("active");g.filter(":eq("+p.currentSlide+")").addClass("active")}o(P);L.find(".rambling-slice").remove();L.find(".rambling-box").remove();if(P.effect==="random"){T=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","foldLeft","fade","slideInRight","slideInLeft","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"];p.randAnim=T[Math.floor(Math.random()*(T.length+1))];if(!p.randAnim){p.randAnim="fade"}}if(P.effect.contains(",")){T=P.effect.split(",");p.randAnim=T[Math.floor(Math.random()*T.length)];if(!p.randAnim){p.randAnim="fade"}}p.running=true;S=p.randAnim||P.effect;if(S.contains("slice")||S.contains("fold")){x(L,P,p);R=0;v=0;I=0;i=L.find(".rambling-slice");if(S.contains("Left")){i=i.reverse()}O=S.replace(/Right/,"").replace(/Left/,"");F={sliceDown:function(){var V;V=b(this);V.css({top:"0px"});if(v===P.slices-1){setTimeout(function(){return V.animate({height:"100%",opacity:"1.0"},P.animSpeed,"",function(){return L.trigger("rambling:animFinished")})},100+R)}else{setTimeout((function(){return V.animate({height:"100%",opacity:"1.0"},P.animSpeed)}),100+R)}R+=50;return v++},sliceUp:function(){var V;V=b(this);V.css({bottom:"0px"});if(v===P.slices-1){setTimeout((function(){return V.animate({height:"100%",opacity:"1.0"},P.animSpeed,"",function(){return L.trigger("rambling:animFinished")})}),100+R)}else{setTimeout((function(){return V.animate({height:"100%",opacity:"1.0"},P.animSpeed)}),100+R)}R+=50;return v++},sliceUpDown:function(){var V;V=b(this);if(v===0){V.css({top:"0px"});v++}else{V.css({bottom:"0px"});v=0}if(I===P.slices-1){setTimeout((function(){return V.animate({height:"100%",opacity:"1.0"},P.animSpeed,"",function(){return L.trigger("rambling:animFinished")})}),100+R)}else{setTimeout((function(){return V.animate({height:"100%",opacity:"1.0"},P.animSpeed)}),100+R)}R+=50;return I++},fold:function(){var W,V;V=b(this);W=V.width();V.css({top:"0px",height:"100%",width:"0px"});if(v===P.slices-1){setTimeout((function(){return V.animate({width:W,opacity:"1.0"},P.animSpeed,"",function(){return L.trigger("rambling:animFinished")})}),100+R)}else{setTimeout((function(){return V.animate({width:W,opacity:"1.0"},P.animSpeed)}),100+R)}R+=50;return v++}};return i.each(F[O])}else{if(S==="fade"||S==="slideInRight"||S==="slideInLeft"){x(L,P,p);H={fade:{style:{height:"100%",width:""+(L.width())+"px",position:"absolute",top:0,left:0},animate:{opacity:"1"}},slideInRight:{style:{height:"100%",width:"0px",opacity:"1"}},slideInLeft:{style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},callback:function(V){var W;W={left:"0px",right:""};return V.css(W)}}};M=H[S];D=M.animate||{width:""+(L.width())+"px"};G=L.find(".rambling-slice:first");G.css(H[S].style);return G.animate(D,P.animSpeed*2,"",function(){if(M.callback){M.callback(G)}return L.trigger("rambling:animFinished")})}else{if(S.contains("box")){t(L,P,p);N=P.boxCols*P.boxRows;v=0;R=0;E=L.find(".rambling-box");if(S.contains("Reverse")){E=E.reverse()}F={random:{beforeAnimation:function(){return E=E.shuffle()},animate:function(V){return V.each(function(){var W;W=b(this);if(v===N-1){setTimeout((function(){return W.animate({opacity:"1"},P.animSpeed,"",function(){return L.trigger("rambling:animFinished")})}),100+R)}else{setTimeout((function(){return W.animate({opacity:"1"},P.animSpeed)}),100+R)}R+=20;return v++})}},rain:{beforeAnimation:function(){return E=E.as2dArray(P.boxCols)},animate:function(W){var X,Y,V;V=[];for(X=0,Y=P.boxCols*2;0<=Y?X<Y:X>Y;0<=Y?X++:X--){V.push((function(ac){var aa,ab,Z,ad;aa=ac;Z=function(ai){var ah,af,ag,ak,aj,ae;if(aa>=0&&aa<P.boxCols){ak=ai;af=aa;aj=R;ah=b(W[ak][af]);ae=ah.width();ag=ah.height();if(S.contains("Grow")){ah.css({width:0,height:0})}if(v===N-1){setTimeout((function(){return ah.animate({opacity:"1",width:ae,height:ag},P.animSpeed/1.3,"",function(){return L.trigger("rambling:animFinished")})}),100+aj)}else{setTimeout((function(){return ah.animate({opacity:"1",width:ae,height:ag},P.animSpeed/1.3)}),100+aj)}v++}return aa--};for(ab=0,ad=P.boxRows;0<=ad?ab<ad:ab>ad;0<=ad?ab++:ab--){Z(ab)}return R+=100})(X))}return V}}};Q=S.replace(/box/,"").replace(/Grow/,"").replace(/Reverse/,"").decapitalize();U=F[Q];U.beforeAnimation();return U.animate(E)}}}};u=function(i){if(this.console&&console&&console.log){return console.log(i)}};this.stop=function(){var i;i=b(e);if(!i.data("rambling:vars").stop){i.data("rambling:vars").stop=true;return u("Stop Slider")}};this.start=function(){var i;i=b(e);if(i.data("rambling:vars").stop){i.data("rambling:vars").stop=false;return u("Start Slider")}};z.afterLoad.call(this);return this};a=["stop","start"];b.fn.ramblingSlider=function(d){return this.each(function(f,h){var e,g;e=b(this);g=e.data("ramblingSlider");if(a.contains(d)&&g){g[d]()}if(g){return g}g=new c(this,d);return e.data("ramblingSlider",g)})};return b.fn.ramblingSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}}})(jQuery);String.prototype.contains=function(a){return this.indexOf(a)!==-1};String.prototype.decapitalize=function(){var b,a;b=this.slice(0,1);a=this.slice(1);return""+(b.toLowerCase())+a}}).call(this);