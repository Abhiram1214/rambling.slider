(function(){Array.prototype.shuffle=function(){var c,b,d,a;d=this.length;for(c=d;d<=1?c<=1:c>=1;d<=1?c++:c--){this[c]=this[c];b=parseInt(Math.random()*c);a=this[--c];this[c]=this[b];this[b]=a}return this};Array.prototype.contains=function(c){var a,b;b=this.length;for(a=0;0<=b?a<b:a>b;0<=b?a++:a--){if(c===this[a]){return true}}return false};(function(a){a.fn.reverse=[].reverse;a.fn.shuffle=[].shuffle;return a.fn.as2dArray=function(b){var c,d,e;e=0;d=0;c=a("");c[e]=a("");this.each(function(){c[e][d]=a(this);d++;if(d===b){e++;d=0;return c[e]=a("")}});return c}})(jQuery);(function(b){var c,a;a=["stop","start"];b.fn.ramblingSlider=function(d){return this.each(function(f,h){var e,g;e=b(this);g=e.data("ramblingSlider");if(a.contains(d)&&g){g[d]()}if(g){return g}g=new c(this,d);return e.data("ramblingSlider",g)})};b.fn.ramblingSlider.defaults={effect:"random",slices:15,boxCols:8,boxRows:4,animSpeed:500,pauseTime:3000,startSlide:0,directionNav:true,directionNavHide:true,controlNav:true,controlNavThumbs:false,controlNavThumbsFromRel:false,controlNavThumbsSearch:".jpg",controlNavThumbsReplace:"_thumb.jpg",adaptImages:false,useLargerImage:true,alignBottom:false,keyboardNav:true,pauseOnHover:true,manualAdvance:false,captionOpacity:0.8,prevText:"Prev",nextText:"Next",beforeChange:function(){},afterChange:function(){},slideshowEnd:function(){},lastSlide:function(){},afterLoad:function(){}};return c=function(e,f){var A,y,g,s,v,k,t,u,q,m,x,d,h,p,B,w,n,r,l,o,z,j;p=this;r=b(e);w=b.extend({},b.fn.ramblingSlider.defaults,f);l=0;o={currentSlide:0,currentImage:"",totalSlides:0,randAnim:"",running:false,paused:false,stop:false};A=["sliceDownRight","sliceDownLeft","sliceUpRight","sliceUpLeft","sliceUpDown","sliceUpDownLeft","fold","foldLeft","fade","slideInRight","slideInLeft","boxRandom","boxRain","boxRainReverse","boxRainGrow","boxRainGrowReverse"];this.stop=function(){var i;i=r.data("rambling:vars");if(!i.stop){return i.stop=true}};this.start=function(){var i;i=r.data("rambling:vars");if(i.stop){return i.stop=false}};m=function(C){var i,D;i=r.find(".rambling-caption");D=o.currentImage.attr("title");if(D){if(D.substr(0,1)==="#"){D=b(D).html()}if(i.css("display")==="block"){i.find("p").fadeOut(C.animSpeed,function(){b(this).html(D);return b(this).fadeIn(C.animSpeed)})}else{i.find("p").html(D)}return i.fadeIn(C.animSpeed)}else{return i.fadeOut(C.animSpeed)}};B=function(C){var i;i=b(C[o.currentSlide]);o.currentImage=i;if(!i.is("img")){o.currentImage=i.find("img:first")}return i};y=function(){clearInterval(l);return l=""};n=function(i){if(o.running){return false}y();if(i==="prev"){o.currentSlide-=2}return h(r,q,w,i)};v=function(F,E,H){var D,G,C;C=[];for(D=0,G=E.slices;0<=G?D<G:D>G;0<=G?D++:D--){C.push((function(J){var I,K;K=Math.round(F.width()/E.slices);I=F;if(E.adaptImages){I=F.find("#rambling-animation")}return I.append(p.getRamblingSlice(K,J,E.slices,H))})(D))}return C};s=function(E,C,H){var I,D,G,F,i;D=Math.round(E.width()/C.boxCols);I=Math.round(E.height()/C.boxRows);i=[];for(G=0,F=C.boxRows;0<=F?G<F:G>F;0<=F?G++:G--){i.push((function(K){var L,M,J;J=[];for(L=0,M=C.boxCols;0<=M?L<M:L>M;0<=M?L++:L--){J.push((function(O){var N;N=E;if(C.adaptImages){N=E.find("#rambling-animation")}return N.append(p.getRamblingBox(D,I,K,O,C,H))})(L))}return J})(G))}return i};(function(){var C,i;this.setSliderBackground=function(D,E){return D.css({background:"url("+(E.currentImage.attr("src"))+") no-repeat"})};this.getRamblingSlice=function(I,D,G,H){var E,J,F;E="url("+(H.currentImage.attr("src"))+") no-repeat -"+((I+(D*I))-I)+"px 0%";F=I;if(D===(G-1)){E="url("+(H.currentImage.attr("src"))+") no-repeat -"+((I+(D*I))-I)+"px 0%";F=r.width()-(I*D)}J={left:""+(I*D)+"px",width:""+F+"px",height:"0px",opacity:"0",background:E,overflow:"hidden"};return b('<div class="rambling-slice"></div>').css(J)};this.getRamblingBox=function(H,J,L,F,G,I){var D,K,E;D="url("+(I.currentImage.attr("src"))+") no-repeat -"+((H+(F*H))-H)+"px -"+((J+(L*J))-J)+"px";E=H;if(F===(G.boxCols-1)){D="url("+(I.currentImage.attr("src"))+") no-repeat -"+((H+(F*H))-H)+"px -"+((J+(L*J))-J)+"px";E=r.width()-(H*F)}K={opacity:0,left:""+(H*F)+"px",top:""+(J*L)+"px",width:""+E+"px",height:""+J+"px",background:D,overflow:"hidden"};return b('<div class="rambling-box"></div>').css(K)};if(w.adaptImages){i=this.getRamblingSlice;C=this.getRamblingBox;this.setSliderBackground=function(){var F,D,E;E=o.currentImage;D=r.find(".currentImage");if(!D.length){F="alignTop";if(w.alignBottom){F="alignBottom"}D=b('<img src="" alt="currentImage" class="currentImage"/>');D.addClass(F);D.css({display:"block"});r.find("#rambling-animation").prepend(D)}return D.attr({src:E.attr("src"),alt:E.attr("alt")})};this.getRamblingSlice=function(K,D,H,J){var F,G,E,I;G=i(K,D,H,J);G.css({background:"none"});G.append('<span><img src="'+(J.currentImage.attr("src"))+'" alt=""/></span>');F=0;I="auto";if(w.alignBottom){F="auto";I=0}E={display:"block",width:r.width(),left:"-"+((K+(D*K))-K)+"px",bottom:F,top:I};G.find("img").css(E);return G};this.getRamblingBox=function(I,K,M,F,G,J){var D,H,E,L;H=C(I,K,M,F,G,J);D=false;L=""+((K+(M*K))-K)+"px";if(G.alignBottom){D=""+(K*(G.boxRows-(M+1)))+"px";L=false}E={display:"block",width:r.width(),left:"-"+((I+(F*I))-I)+"px",top:"auto",bottom:"auto"};if(L){E.top="-"+L}if(D){E.bottom="-"+D}H.css({background:"none",top:L||"auto",bottom:D||"auto"});H.append("<span><img src='"+(J.currentImage.attr("src"))+"' alt=''/></span>");H.find("img").css(E);return H}}return this}).apply(this);r.data("rambling:vars",o);r.css({position:"relative"});r.addClass("ramblingSlider");if(w.adaptImages){x=b('<div id="rambling-animation"></div>');x.css({width:r.width(),height:r.height(),overflow:"hidden"});r.prepend(x);r.addClass("adaptingSlider")}q=r.children(":not(#rambling-animation)");q.each(function(){var E,i,C,D;E=b(this);D="";if(!E.is("img")){if(E.is("a")){E.addClass("rambling-imageLink");D=E}E=E.find("img:first")}C=E.width();if(C===0){C=E.attr("width")}i=E.height();if(i===0){i=E.attr("height")}if(C>r.width()&&w.useLargerImage){r.width(C)}if(i>r.height()&&(w.useLargerImage||!w.adaptImages)){r.height(i)}if(D!==""){D.css({display:"none"})}E.css({display:"none"});return o.totalSlides++});w.startSlide=w.startSlide%o.totalSlides;o.currentSlide=w.startSlide;u=B(q);if(u.is("a")){u.css({display:"block"})}this.setSliderBackground(r,o);r.append(b('<div class="rambling-caption"><p></p></div>').css({display:"none",opacity:w.captionOpacity},(function(){})()));m(w);if(!w.manualAdvance&&q.length>1){l=setInterval((function(){return h(r,q,w,false)}),w.pauseTime)}if(w.directionNav){r.append("<div class='rambling-directionNav'><a class='rambling-prevNav'>"+w.prevText+"</a><a class='rambling-nextNav'>"+w.nextText+"</a></div>");if(w.directionNavHide){k=r.find(".rambling-directionNav");k.hide();r.hover((function(){return k.show()}),(function(){return k.hide()}))}r.find("a.rambling-prevNav").live("click",function(){return n("prev")});r.find("a.rambling-nextNav").live("click",function(){return n("next")})}if(w.controlNav){d=b('<div class="rambling-controlNav"></div>');r.append(d);z=function(C){var D;if(w.controlNavThumbs){D=q.eq(C);if(!D.is("img")){D=D.find("img:first")}if(w.controlNavThumbsFromRel){return d.append("<a class='rambling-control' rel='"+C+"'><img src='"+(D.attr("rel"))+"' alt='' /></a>")}else{return d.append("<a class='rambling-control' rel='"+C+"'><img src='"+(D.attr("src").replace(w.controlNavThumbsSearch,w.controlNavThumbsReplace))+"' alt='' /></a>")}}else{return d.append("<a class='rambling-control' rel='"+C+"'>"+(C+1)+"'</a>")}};for(t=0,j=q.length;0<=j?t<j:t>j;0<=j?t++:t--){z(t)}g=r.find(".rambling-controlNav a");g.filter(":eq("+o.currentSlide+")").addClass("active");g.live("click",function(){if(o.running){return false}if(b(this).hasClass("active")){return false}y();this.setSliderBackground(r,o);o.currentSlide=b(this).attr("rel")-1;return h(r,q,w,"control")})}if(w.keyboardNav){b(window).keypress(function(i){if(i.keyCode==="37"){if(o.running){return false}y();o.currentSlide-=2;h(r,q,w,"prev")}if(i.keyCode==="39"){if(o.running){return false}y();return h(r,q,w,"next")}})}if(w.pauseOnHover){r.hover(function(){o.paused=true;return y()},function(){o.paused=false;if(l===""&&!w.manualAdvance){return l=setInterval((function(){return h(r,q,w,false)}),w.pauseTime)}})}r.bind("rambling:animFinished",function(){o.running=false;b(q).each(function(){u=b(this);if(u.is("a")){return u.css({display:"none"})}});u=b(q[o.currentSlide]);if(u.is("a")){u.css({display:"block"})}if(l===""&&!o.paused&&!w.manualAdvance){l=setInterval((function(){return h(r,q,w,false)}),w.pauseTime)}p.setSliderBackground(r,o);return w.afterChange.call(this)});h=function(K,J,O,I){var C,N,E,G,D,S,P,R,L,F,i,Q,M,H;o=K.data("rambling:vars");if(o&&o.currentSlide===o.totalSlides-1){O.lastSlide.call(this)}if((!o||o.stop)&&!I){return false}O.beforeChange.call(this);o.currentSlide++;if(o.currentSlide===o.totalSlides){o.currentSlide=0;O.slideshowEnd.call(this)}if(o.currentSlide<0){o.currentSlide=o.totalSlides-1}B(J);if(O.controlNav){g=K.find(".rambling-controlNav a");g.removeClass("active");g.filter(":eq("+o.currentSlide+")").addClass("active")}m(O);K.find(".rambling-slice").remove();K.find(".rambling-box").remove();if(O.effect==="random"){o.randAnim=A[Math.floor(Math.random()*(A.length+1))];if(!o.randAnim){o.randAnim="fade"}}if(O.effect.contains(",")){A=O.effect.split(",");o.randAnim=A[Math.floor(Math.random()*A.length)];if(!o.randAnim){o.randAnim="fade"}}o.running=true;R=o.randAnim||O.effect;if(R.contains("slice")||R.contains("fold")){v(K,O,o);Q=0;t=0;H=0;i=K.find(".rambling-slice");if(R.contains("Left")){i=i.reverse()}N=R.replace(/Right/,"").replace(/Left/,"");E={sliceDown:function(){var T;T=b(this);T.css({top:"0px"});if(t===O.slices-1){setTimeout(function(){return T.animate({height:"100%",opacity:"1.0"},O.animSpeed,"",function(){return K.trigger("rambling:animFinished")})},100+Q)}else{setTimeout((function(){return T.animate({height:"100%",opacity:"1.0"},O.animSpeed)}),100+Q)}Q+=50;return t++},sliceUp:function(){var T;T=b(this);T.css({bottom:"0px"});if(t===O.slices-1){setTimeout((function(){return T.animate({height:"100%",opacity:"1.0"},O.animSpeed,"",function(){return K.trigger("rambling:animFinished")})}),100+Q)}else{setTimeout((function(){return T.animate({height:"100%",opacity:"1.0"},O.animSpeed)}),100+Q)}Q+=50;return t++},sliceUpDown:function(){var T;T=b(this);if(t===0){T.css({top:"0px"});t++}else{T.css({bottom:"0px"});t=0}if(H===O.slices-1){setTimeout((function(){return T.animate({height:"100%",opacity:"1.0"},O.animSpeed,"",function(){return K.trigger("rambling:animFinished")})}),100+Q)}else{setTimeout((function(){return T.animate({height:"100%",opacity:"1.0"},O.animSpeed)}),100+Q)}Q+=50;return H++},fold:function(){var U,T;T=b(this);U=T.width();T.css({top:"0px",height:"100%",width:"0px"});if(t===O.slices-1){setTimeout((function(){return T.animate({width:U,opacity:"1.0"},O.animSpeed,"",function(){return K.trigger("rambling:animFinished")})}),100+Q)}else{setTimeout((function(){return T.animate({width:U,opacity:"1.0"},O.animSpeed)}),100+Q)}Q+=50;return t++}};return i.each(E[N])}else{if(R==="fade"||R==="slideInRight"||R==="slideInLeft"){v(K,O,o);G={fade:{style:{height:"100%",width:""+(K.width())+"px",position:"absolute",top:0,left:0},animate:{opacity:"1"}},slideInRight:{style:{height:"100%",width:"0px",opacity:"1"}},slideInLeft:{style:{height:"100%",width:"0px",opacity:"1",left:"",right:"0px"},callback:function(T){var U;U={left:"0px",right:""};return T.css(U)}}};L=G[R];C=L.animate||{width:""+(K.width())+"px"};F=K.find(".rambling-slice:first");F.css(G[R].style);return F.animate(C,O.animSpeed*2,"",function(){if(L.callback){L.callback(F)}return K.trigger("rambling:animFinished")})}else{if(R.contains("box")){s(K,O,o);M=O.boxCols*O.boxRows;t=0;Q=0;D=K.find(".rambling-box");if(R.contains("Reverse")){D=D.reverse()}E={random:{beforeAnimation:function(){return D=D.shuffle()},animate:function(T){return T.each(function(){var U;U=b(this);if(t===M-1){setTimeout((function(){return U.animate({opacity:"1"},O.animSpeed,"",function(){return K.trigger("rambling:animFinished")})}),100+Q)}else{setTimeout((function(){return U.animate({opacity:"1"},O.animSpeed)}),100+Q)}Q+=20;return t++})}},rain:{beforeAnimation:function(){return D=D.as2dArray(O.boxCols)},animate:function(U){var V,W,T;T=[];for(V=0,W=O.boxCols*2;0<=W?V<W:V>W;0<=W?V++:V--){T.push((function(aa){var Y,Z,X,ab;Y=aa;X=function(ag){var af,ad,ae,ai,ah,ac;if(Y>=0&&Y<O.boxCols){ai=ag;ad=Y;ah=Q;af=b(U[ai][ad]);ac=af.width();ae=af.height();if(R.contains("Grow")){af.css({width:0,height:0})}if(t===M-1){setTimeout((function(){return af.animate({opacity:"1",width:ac,height:ae},O.animSpeed/1.3,"",function(){return K.trigger("rambling:animFinished")})}),100+ah)}else{setTimeout((function(){return af.animate({opacity:"1",width:ac,height:ae},O.animSpeed/1.3)}),100+ah)}t++}return Y--};for(Z=0,ab=O.boxRows;0<=ab?Z<ab:Z>ab;0<=ab?Z++:Z--){X(Z)}return Q+=100})(V))}return T}}};P=R.replace(/box/,"").replace(/Grow/,"").replace(/Reverse/,"").decapitalize();S=E[P];S.beforeAnimation();return S.animate(D)}}}};w.afterLoad.call(this);return this}})(jQuery);String.prototype.contains=function(a){return this.indexOf(a)!==-1};String.prototype.decapitalize=function(){var b,a;b=this.slice(0,1);a=this.slice(1);return""+(b.toLowerCase())+a}}).call(this);